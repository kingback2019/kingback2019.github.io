<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="王延凯的博客">
<meta property="og:url" content="https:&#x2F;&#x2F;kingback2019.github.io&#x2F;index.html">
<meta property="og:site_name" content="王延凯的博客">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://kingback2019.github.io/"/>





  <title>王延凯的博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">王延凯的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" target="_blank" rel="noopener" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kingback2019.github.io/2019/11/19/window%E4%B8%8Agnuplot%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8%E3%80%901%E3%80%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王延凯的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/19/window%E4%B8%8Agnuplot%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8%E3%80%901%E3%80%91/" itemprop="url">window上gnuplot的安装和使用【1】</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-19T09:05:10+08:00">
                2019-11-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>@<a href="gunplot的安装以及使用">toc</a></p>
<h2 id="1-gnuplot的原理及用途"><a href="#1-gnuplot的原理及用途" class="headerlink" title="1.gnuplot的原理及用途"></a>1.gnuplot的原理及用途</h2><p>$\qquad$它是一个小巧实用的数据处理工具，主要用来绘制2D/3D的数据或者函数图像，但是也包含数学计算、拟合等功能。虽然它的名字里边有个“gnu”,但是它和大名鼎鼎的<a href="http://www.gnu.org/" target="_blank" rel="noopener">GNU</a>没有什么关系，使用的授权协议也不是GNU GPL,所以这里的“gnu”是小写，全名应该读作“new plot”。<br>所有主流的Linux版本都包含gnuplot,因此在Linux上安装很简单，只要用各相应发行版的软件安装工具直接安装就可以了。<br>$\qquad$在苹果电脑的安装也并不复杂，<a href="https://www.macports.org/" target="_blank" rel="noopener">MacPorts</a>项目把很多Linux上的应用程序移植到了苹果系统上，其中就包括gnuplot.只要在苹果电脑上安装MacPorts,之后就可以使用port命令进行安装了。<br>$\qquad$在windows下，可以直接到<a href="http://www.gnuplot.info/" target="_blank" rel="noopener">gnuplot</a>在<a href="https://sourceforge.net/projects/gnuplot/files/gnuplot/" target="_blank" rel="noopener">sourceforge</a>的下载页面进行下载，解压之后，直接安装即可使用了。</p>
<h2 id="2-gnuplot的下载及安装"><a href="#2-gnuplot的下载及安装" class="headerlink" title="2.gnuplot的下载及安装"></a>2.gnuplot的下载及安装</h2><p>$\qquad$首先在官网下载gnuplot的最新版本，<a href="https://www.typora.io/#windows" target="_blank" rel="noopener">下载地址</a>，之后按照提示，更改安装位置即可。<br><img src="https://img-blog.csdnimg.cn/20190920151746978.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>$\qquad$之后在软件安装页面找到并运行  <strong>gnuplot 5.2 patchlevel 7</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20190920151852296.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>$\qquad$在这里我们不妨先实验一下画图效果，以下我们显示画出<strong>sinx</strong>和<strong>cosx</strong>的图像</p>
<p><img src="https://img-blog.csdnimg.cn/20190920151914519.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20190920152029658.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>$\qquad$到这里我们的gnuplot的安装大功告成了。</p>
<h2 id="3-使用gcc编译c语言程序"><a href="#3-使用gcc编译c语言程序" class="headerlink" title="3.使用gcc编译c语言程序"></a>3.使用gcc编译c语言程序</h2><p>$\qquad$在编译之前，我们先创建一个c语言文件，主要实现生成画图所需要的离散变量数组。以下我们以产生<strong>sinc</strong>函数为例，并将该函数命名为<strong>test.c</strong>。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PI 3.1415926</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	 <span class="comment">//获取负半轴部分数据</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1600</span>; i &gt;<span class="number">0</span>; i--)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">double</span> t;</span><br><span class="line">		t=i/<span class="number">16.0</span>;<span class="comment">//设置采集时间=采样点数/采样频率</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%.2f %.2f\n"</span>,(<span class="keyword">float</span>)(-t),(<span class="built_in">sin</span>(t)/t));</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">//获取正半轴部分数据</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;<span class="number">1600</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">double</span> t;</span><br><span class="line">		t=i/<span class="number">16.0</span>;<span class="comment">//设置采集时间=采样点数/采样频率</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%.2f %.2f\n"</span>,(<span class="keyword">float</span>)(t),(<span class="built_in">sin</span>(t)/t));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对其使用<strong>gcc</strong>进行编译则有:<br><img src="https://img-blog.csdnimg.cn/20190920152115895.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>编译完成之后,我们就会发现多了一个<strong>test.exe</strong>文件，接下来我们要运行该可执行文件，并且将它<strong>printf</strong>的结果重定向到<strong>sinc.bat</strong>文件。</p>
<p><img src="https://img-blog.csdnimg.cn/20190920152140951.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>如果我们此时使用记事本打开sinc.bat文件我们就会发现，整个函数的输出结果全被保存到这里。<br><img src="https://img-blog.csdnimg.cn/20190920152336186.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="4-使用gnuplot调用c语言程序所产生的数据并且画出图像"><a href="#4-使用gnuplot调用c语言程序所产生的数据并且画出图像" class="headerlink" title="4.使用gnuplot调用c语言程序所产生的数据并且画出图像"></a>4.使用gnuplot调用c语言程序所产生的数据并且画出图像</h2><p>$\qquad$在做这一步之前我们需要做的一点就是，需要先将<strong>gnuplot.exe</strong>所在的路径，存入环境变量<strong>path</strong>中，这里我的路径是：<br><img src="https://img-blog.csdnimg.cn/20190920152428672.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>$\qquad$添加完成之后点击确定即可。然后在含有<strong>sinc.bat</strong>文件的文件夹下进入cmd命令行窗口,之后输入<strong>gnuplot</strong>,调用该画图函数。然后再在新出来的窗口输入命令.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plot [<span class="number">-16</span>:<span class="number">16</span>] [<span class="number">-0.3</span>:<span class="number">1</span>] <span class="string">"sinc.bat"</span>  u <span class="number">1</span>:<span class="number">2</span> w l lt <span class="number">1</span> lw <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>$\qquad$具体操作以及结果如下所示：<br><img src="https://img-blog.csdnimg.cn/20190920152543860.gif" alt="在这里插入图片描述"></p>
<h2 id="5-参考文章"><a href="#5-参考文章" class="headerlink" title="5.参考文章"></a>5.参考文章</h2><blockquote>
<p>史上最完美的Typora快捷键大全：<a href="https://blog.csdn.net/cris_zz/article/details/82919401" target="_blank" rel="noopener">https://blog.csdn.net/cris_zz/article/details/82919401</a></p>
<p>c语言及gnuplot任意波形产生以及作图-三角波：<a href="https://blog.csdn.net/shaoyubin999/article/details/82819974" target="_blank" rel="noopener">https://blog.csdn.net/shaoyubin999/article/details/82819974</a></p>
<p>gnuplot使用说明：<a href="https://www.cnblogs.com/waterystone/p/5085801.html" target="_blank" rel="noopener">https://www.cnblogs.com/waterystone/p/5085801.html</a></p>
<p>gnuplot介绍：<a href="https://www.xuebuyuan.com/572269.html" target="_blank" rel="noopener">https://www.xuebuyuan.com/572269.html</a></p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kingback2019.github.io/2019/11/19/%E8%B6%85%E8%AF%A6%E7%BB%86%E7%9A%84gnuplot%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%E3%80%902%E3%80%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王延凯的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/19/%E8%B6%85%E8%AF%A6%E7%BB%86%E7%9A%84gnuplot%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%E3%80%902%E3%80%91/" itemprop="url">超详细的gnuplot使用教程【2】</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-19T09:04:52+08:00">
                2019-11-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>@<a href="超详细的gnuplot使用教程">TOC</a></p>
<h1 id="1-gnuplot参数介绍及演示"><a href="#1-gnuplot参数介绍及演示" class="headerlink" title="1.gnuplot参数介绍及演示"></a>1.gnuplot参数介绍及演示</h1><h2 id="1-1首先来解释一下会用到的各类参数以及其解释"><a href="#1-1首先来解释一下会用到的各类参数以及其解释" class="headerlink" title="1.1首先来解释一下会用到的各类参数以及其解释"></a>1.1首先来解释一下会用到的各类参数以及其解释</h2><table>
<thead>
<tr>
<th>命令</th>
<th>缩写</th>
<th>意义</th>
</tr>
</thead>
<tbody><tr>
<td>With</td>
<td>w</td>
<td>with后边跟需要指定的样式</td>
</tr>
<tr>
<td>Line</td>
<td>l</td>
<td>用线l显示</td>
</tr>
<tr>
<td>Point</td>
<td>p</td>
<td>用点显示</td>
</tr>
<tr>
<td>LinePoints</td>
<td>lp</td>
<td>用线和点画，对数据绘图时有用</td>
</tr>
<tr>
<td>LineType</td>
<td>lt</td>
<td>线的样式（0代表虚线，1-7代表实线,颜色分别为紫、蓝、绿、橙、黄、靛、红。超过7以后颜色依次循环）</td>
</tr>
<tr>
<td>LineWidth</td>
<td>lw</td>
<td>线的宽度（level从0开始，默认为1）</td>
</tr>
<tr>
<td>PointType</td>
<td>pt</td>
<td>点的样式（level从0开始，默认为1）</td>
</tr>
<tr>
<td>PointSize</td>
<td>ps</td>
<td>点的宽度（level从0开始，默认为1）</td>
</tr>
<tr>
<td>## 1.2 画图实际测试</td>
<td></td>
<td></td>
</tr>
<tr>
<td>为了显示出不同的差别，此处我谨以sinx函数或者cos函数来进行显示：</td>
<td></td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">plot <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//当没有设置其格式时，调用默认的设置</span></span></span><br></pre></td></tr></table></figure></td>
<td></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190920160153918.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td></td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">plot <span class="title">sin</span><span class="params">(x)</span> w p</span></span><br><span class="line"><span class="function"><span class="comment">//表示使用点画</span></span></span><br></pre></td></tr></table></figure></td>
<td></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190920161057593.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td></td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">plot <span class="title">sin</span><span class="params">(x)</span> w l</span></span><br><span class="line"><span class="function"><span class="comment">//表示使用线画</span></span></span><br></pre></td></tr></table></figure></td>
<td></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190920161010753.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">plot <span class="title">sin</span><span class="params">(x)</span> w lp</span></span><br><span class="line"><span class="function"><span class="comment">//表示使用点和线画</span></span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190920160735752.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">plot <span class="title">sin</span><span class="params">(x)</span> w lp lt 0</span></span><br><span class="line"><span class="function"><span class="comment">//表示使用点和线画，线的种类为0</span></span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190920160839952.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">plot <span class="title">sin</span><span class="params">(x)</span> w l lt 1</span></span><br><span class="line"><span class="function"><span class="comment">//表示使用线画，线的种类为1</span></span></span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20190920161257971.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">plot <span class="title">sin</span><span class="params">(x)</span> w l lt 7</span></span><br><span class="line"><span class="function"><span class="comment">//表示使用线画，线的种类为7</span></span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190920162128303.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">plot <span class="title">sin</span><span class="params">(x)</span> w l lt 1 lw 4</span></span><br><span class="line"><span class="function"><span class="comment">//表示使用线画，线的种类为1，线的宽度为4</span></span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190920162321667.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">plot <span class="title">sin</span><span class="params">(x)</span> w p pt 4</span></span><br><span class="line"><span class="function"><span class="comment">//表示使用点画，点的种类为4</span></span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190920162840218.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">plot <span class="title">sin</span><span class="params">(x)</span> w p pt 4 ps 2</span></span><br><span class="line"><span class="function"><span class="comment">//表示使用点画。点的种类为4，点的大小为2</span></span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/2019092016304359.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="1-3-其它参数介绍（约定范围、坐标轴设定）"><a href="#1-3-其它参数介绍（约定范围、坐标轴设定）" class="headerlink" title="1.3 其它参数介绍（约定范围、坐标轴设定）"></a>1.3 其它参数介绍（约定范围、坐标轴设定）</h2><h3 id="1-3-1-约束画图范围"><a href="#1-3-1-约束画图范围" class="headerlink" title="1.3.1 约束画图范围"></a>1.3.1 约束画图范围</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plot [<span class="number">-5</span>:<span class="number">5</span>] [<span class="number">-1.2</span>:<span class="number">1.2</span>] <span class="built_in">sin</span>(x)</span><br><span class="line"><span class="comment">//表示x取值范围为[-5,5],y的取值范围为[-1.2,1.2]</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190920164811487.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h3 id="1-3-2-关于坐标轴的设定"><a href="#1-3-2-关于坐标轴的设定" class="headerlink" title="1.3.2 关于坐标轴的设定"></a>1.3.2 关于坐标轴的设定</h3><p>在对于坐标轴的设定，要注意的一点就是，在画图之前执行命令。<br>命令     | 含义<br>———— | ———-<br>set xlabel ‘x’ |x轴标为‘x’<br>set ylabel ‘y’ | y轴标为’y’<br>set ylabel ‘DOS’ tc lt 3 | ‘DOS’的颜色用第三种颜色<br>set xtics 1.0|x轴的主刻度的宽度为1.0，同样可以为y轴定义ytics<br>set mxtics 3|x轴上每个主刻度中画3个分刻度，同样可以为y轴定义mytics<br>set border 3|设为第三种边界，同样可以为上边的x轴（称为x2）和右边y（称为y2）轴进行设置，即x2tics，mx2tics，y2tics，my2tics。<br>set xtics nomirror|去掉上边x的刻度，同样可以为ytics设置<br>unset x2tics|去掉上边x的标度，同样可以为y2tics设置<br>下面我们就来验证一下上边的图吧。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; set title 'kmust team'</span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> xlabel <span class="string">'x'</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> ylabel <span class="string">'y'</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> xtics <span class="number">1.0</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> mxtics <span class="number">3</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> border <span class="number">3</span></span><br><span class="line">gnuplot&gt; <span class="function">plot <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line">gnuplot&gt;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190920170828421.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h3 id="1-3-3-图例"><a href="#1-3-3-图例" class="headerlink" title="1.3.3 图例"></a>1.3.3 图例</h3><table>
<thead>
<tr>
<th>命令</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>set key left</td>
<td>放在左边，有left 和right两个选项</td>
</tr>
<tr>
<td>set key bottom</td>
<td>放在下边，只有这一个选项；默认在上边</td>
</tr>
<tr>
<td>set key outside</td>
<td>放在外边，但只能在右面的外边</td>
</tr>
<tr>
<td>set key left bottom</td>
<td>表示放在左下边</td>
</tr>
<tr>
<td>代码示例：</td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> key right bottom</span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> title <span class="string">"kmust"</span></span><br><span class="line">gnuplot&gt; <span class="function">plot <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//将图例放在右下角</span></span></span><br><span class="line"><span class="function"><span class="comment">//设置标题为“kmust”</span></span></span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190920194230103.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td></td>
</tr>
<tr>
<td>### 1.3.4 在图中任意位置插入文字</td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; set label 'I Love Kmust!' at 2.5,0.5</span><br><span class="line">gnuplot&gt; <span class="function">plot <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//在坐标（2.5，0.5）处插入文字</span></span></span><br><span class="line"><span class="function"><span class="comment">//如果想要删除文字就使用 unset label 1(此处数字代表要删除label的序号)</span></span></span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190920203757755.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td></td>
</tr>
<tr>
<td>## 1.4 同时画出多条曲线</td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plot sin(x),cos(x)</span><br><span class="line"><span class="comment">//注意连个函数之间要使用逗号分隔开</span></span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190920171358263.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td></td>
</tr>
<tr>
<td>当然两个函数之间也可以单独约束</td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plot sin(x) title 'sin(x)' w l lt 0 lw 2, cos(x) title 'cos(x)' w l lt 2 lw 2</span><br><span class="line"><span class="comment">//注意连个函数之间要使用逗号分隔开，每个函数的绘画要求紧跟着对应的函数</span></span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190920171518832.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td></td>
</tr>
<tr>
<td>## 1.5 x轴时间设置</td>
<td></td>
</tr>
<tr>
<td>命令</td>
<td>含义</td>
</tr>
<tr>
<td>——–</td>
<td>—–</td>
</tr>
<tr>
<td>set xdata time</td>
<td>X轴设置为时间格式</td>
</tr>
<tr>
<td>set timefmt “%Y-%m-%d”</td>
<td>文件中时间格式</td>
</tr>
<tr>
<td>set format x “%m/%d”</td>
<td>目标时间格式~</td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> xdata time</span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> timefmt <span class="string">"%Y-%m-%d"</span></span><br><span class="line">gnuplot&gt; <span class="function">plot <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//设置x轴为时间格式，并且其显示形式为年-月-日</span></span></span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190920195359322.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_60#pic_center" alt="在这里插入图片描述"></td>
<td></td>
</tr>
<tr>
<td>## 1.6 在图中添加直线和箭头</td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> arrow from <span class="number">0.0</span>,<span class="number">0.0</span> to <span class="number">2.0</span>,<span class="number">0.0</span></span><br><span class="line">gnuplot&gt; <span class="function">plot <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//在图的中心点（0，0）向（2，0）画一条射线</span></span></span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190920200240285.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> arrow from <span class="number">0.0</span>,<span class="number">0.0</span> to <span class="number">0.0</span>,<span class="number">-0.4</span> nohead</span><br><span class="line">gnuplot&gt; <span class="function">plot <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//只画一条直线的话，在画箭头的语句上方添加nohead标签</span></span></span><br><span class="line"><span class="function"><span class="comment">//从中心点（0，0）到（0，-0.4）画一条直线</span></span></span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190920200806563.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td></td>
</tr>
<tr>
<td>除此之外我们还可以进行颜色调制</td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> arrow from <span class="number">0.0</span>,<span class="number">0.0</span> to <span class="number">-2.0</span>,<span class="number">0.4</span> lt <span class="number">2</span> lw <span class="number">2</span></span><br><span class="line">gnuplot&gt; <span class="function">plot <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//从中心点（0，0）到（-2.0，0.4）画一条绿色射线，线条粗细等级为2</span></span></span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190920201216642.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td></td>
</tr>
<tr>
<td>如果我们不小心画错了一个图形，我们又该如何删除呢，很简单，一句话就搞定了。</td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; unset arrow <span class="number">3</span></span><br><span class="line">gnuplot&gt; unset arrow <span class="number">2</span></span><br><span class="line">gnuplot&gt; unset arrow <span class="number">1</span></span><br><span class="line">gnuplot&gt; <span class="function">plot <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//如果我们发现第几个值线画错了，就可以使用语句unset删除对应的直线即可</span></span></span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190920201549513.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td></td>
</tr>
<tr>
<td>## 1.7 读取dat、txt文件进行画图</td>
<td></td>
</tr>
<tr>
<td>在用c语言进行程序设计的时候，有时就需要画图任务，这时gnuplot可以读取dat、txt文件内的内容，并再进行绘画。</td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> arrow from <span class="number">-16.0</span>,<span class="number">0.0</span> to <span class="number">16.0</span>,<span class="number">0.0</span> nohead</span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> arrow from <span class="number">-0.3</span>,<span class="number">0.0</span> to <span class="number">1.0</span>,<span class="number">0.0</span></span><br><span class="line">gnuplot&gt; plot [<span class="number">-16</span>:<span class="number">16</span>] [<span class="number">-0.3</span>:<span class="number">1</span>] <span class="string">"sinc.bat"</span>  u <span class="number">1</span>:<span class="number">2</span> w l lt <span class="number">1</span> lw <span class="number">1</span></span><br><span class="line"><span class="comment">//从（-16，0）到（16，0）画一条直线</span></span><br><span class="line"><span class="comment">//从（-0.3，0）到（1.0，0）画一条带箭头射线</span></span><br><span class="line"><span class="comment">//读取“sinc.bat”文件内的数据，并用其内的第一列和第二列作图，，并且设置线条颜色和粗细。</span></span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190920202433729.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td></td>
</tr>
<tr>
<td>## 1.8 设定图的大小和位置</td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> <span class="built_in">size</span> <span class="number">0.5</span>,<span class="number">0.5</span></span><br><span class="line">gnuplot&gt; <span class="function">plot <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//长宽均为默认宽度的一半，建议用这个取值，尤其是画成ps或eps图形的时候</span></span></span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190920204413633.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> origin <span class="number">0.0</span>,<span class="number">0.5</span></span><br><span class="line">gnuplot&gt; <span class="function">plot <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//设定图的最左下角的那一点在图形面板中的位置。这里图将出现在左上角。</span></span></span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190920204545846.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td></td>
</tr>
<tr>
<td>## 1.9 画多个图</td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> multiplot</span><br><span class="line"><span class="comment">//设置为多图模式</span></span><br><span class="line">multiplot&gt; <span class="built_in">set</span> origin <span class="number">0.0</span>,<span class="number">0.5</span></span><br><span class="line"><span class="comment">//设置第一个图的原点的位置</span></span><br><span class="line">multiplot&gt; <span class="built_in">set</span> <span class="built_in">size</span> <span class="number">0.5</span>,<span class="number">0.5</span></span><br><span class="line"><span class="comment">//设置第一个图的大小，长和宽均为整个图的一半</span></span><br><span class="line">multiplot&gt; <span class="function">plot <span class="title">tan</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//开始绘制第一个图</span></span></span><br><span class="line">multiplot&gt; set origin 0.5,0.5</span><br><span class="line"><span class="comment">//设置第2个图的原点的位置</span></span><br><span class="line">multiplot&gt; <span class="built_in">set</span> <span class="built_in">size</span> <span class="number">0.5</span>,<span class="number">0.5</span></span><br><span class="line"><span class="comment">//设置第2个图的大小，长和宽均为整个图的一半</span></span><br><span class="line">multiplot&gt; <span class="function">plot  <span class="title">cos</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//开始绘制第2个图</span></span></span><br><span class="line">multiplot&gt; set origin 0.0,0.0</span><br><span class="line"><span class="comment">//设置第3个图的原点的位置</span></span><br><span class="line">multiplot&gt; <span class="built_in">set</span> <span class="built_in">size</span> <span class="number">0.5</span>,<span class="number">0.5</span></span><br><span class="line"><span class="comment">//设置第3个图的大小，长和宽均为整个图的一半</span></span><br><span class="line">multiplot&gt; <span class="function">plot  <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//开始绘制第3个图</span></span></span><br><span class="line">multiplot&gt; set origin 0.5,0.0</span><br><span class="line"><span class="comment">//设置第4个图的原点的位置</span></span><br><span class="line">multiplot&gt; <span class="built_in">set</span> <span class="built_in">size</span> <span class="number">0.5</span>,<span class="number">0.5</span></span><br><span class="line"><span class="comment">//设置第4个图的大小，长和宽均为整个图的一半</span></span><br><span class="line">multiplot&gt; plot <span class="number">1</span>/x</span><br><span class="line"><span class="comment">//开始绘制第4个图</span></span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
<tr>
<td>绘制完成之后就会出现这个四合一的图，当然我们还可以 为每个图设置自己的特有属性，比如颜色、标题等。</td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190920212747179.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td></td>
</tr>
<tr>
<td># 2.gnuplot进阶</td>
<td></td>
</tr>
<tr>
<td>## 2.1 使两坐标轴的单位长度等长</td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt;  <span class="built_in">set</span> <span class="built_in">size</span> square</span><br><span class="line"><span class="comment">//设置形状为方形</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> <span class="built_in">size</span> <span class="number">0.5</span>,<span class="number">0.5</span></span><br><span class="line"><span class="comment">//设置图形的大小各为一半</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> xrange[<span class="number">-10</span>:<span class="number">10</span>]</span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> yrange[<span class="number">-10</span>:<span class="number">10</span>]</span><br><span class="line"><span class="comment">//设置x,y的范围相同</span></span><br><span class="line">gnuplot&gt; plot x+<span class="number">2</span></span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190920220255315.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td></td>
</tr>
<tr>
<td>## 2.2 在同一张图里利用左右两边的y轴分别画图</td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> xtics nomirror</span><br><span class="line"><span class="comment">//去掉上边坐标轴x2的刻度</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> ytics nomirror</span><br><span class="line"><span class="comment">//去掉上边坐标轴y2的刻度</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> x2tics</span><br><span class="line"><span class="comment">//让上面坐标轴x2刻度自动产生</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> y2tics</span><br><span class="line"><span class="comment">//让上面坐标轴y2刻度自动产生</span></span><br><span class="line">gnuplot&gt; plot sin(x),cos(x) axes x1y2</span><br><span class="line"><span class="comment">//用x1y2坐标，axes x1y2表示用x1y2坐标轴</span></span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190920220659444.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; plot sin(x),cos(x) axes x2y2</span><br><span class="line"><span class="comment">//用x2y2坐标，axes x2y2表示用x2y2坐标轴</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> x2range[<span class="number">-20</span>:<span class="number">20</span>]</span><br><span class="line"><span class="comment">//设定x2坐标的范围</span></span><br><span class="line">gnuplot&gt; report</span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190920220837819.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> xrange[<span class="number">-5</span>:<span class="number">5</span>]</span><br><span class="line"><span class="comment">//设定x的范围</span></span><br><span class="line">gnuplot&gt; replot</span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190920221004407.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> xlabel <span class="string">'x'</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> x2label <span class="string">'t'</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> ylabel <span class="string">'y'</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> y2label <span class="string">'s'</span></span><br><span class="line"><span class="comment">//为图形的上下左右分别起标</span></span><br><span class="line">gnuplot&gt; replot</span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190920221127740.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; set title 'The figure'</span><br><span class="line"><span class="comment">//设置标题</span></span><br><span class="line">gnuplot&gt; replot</span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190920221253818.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center#pic_center" alt="在这里插入图片描述"></td>
<td></td>
</tr>
<tr>
<td>## 2.3画漂亮的pm3D图</td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> pm3d</span><br><span class="line"><span class="comment">//设置pm3d模式</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> isosamples <span class="number">50</span>,<span class="number">50</span></span><br><span class="line"><span class="comment">//设置网格点为50x50</span></span><br><span class="line">gnuplot&gt; splot x**<span class="number">2</span>+y**<span class="number">2</span></span><br><span class="line"><span class="comment">//画三维图像</span></span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190921162344681.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td></td>
</tr>
<tr>
<td>## 2.4 画等高线</td>
<td></td>
</tr>
<tr>
<td><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> dgrid3d <span class="number">100</span>,<span class="number">100</span></span><br><span class="line"><span class="comment">//设置三维表面的网格书目</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> contour</span><br><span class="line"><span class="comment">//设置画等高线</span></span><br><span class="line">gnuplot&gt; splot x**<span class="number">2</span>+y**<span class="number">2</span></span><br><span class="line"><span class="comment">//画图像</span></span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20190921163220948.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td></td>
</tr>
</tbody></table>
<h2 id="2-5-利用脚本文件避免重复输入"><a href="#2-5-利用脚本文件避免重复输入" class="headerlink" title="2.5 利用脚本文件避免重复输入"></a>2.5 利用脚本文件避免重复输入</h2><p>我在文件夹下创建了一个 try.plt文件，其内容如下所示</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">reset</span><br><span class="line"><span class="comment">//重置画图属性</span></span><br><span class="line"><span class="built_in">set</span> pm3d</span><br><span class="line"><span class="comment">//设置为pm3d模式</span></span><br><span class="line">unset ztics</span><br><span class="line"><span class="comment">//取消z轴标题</span></span><br><span class="line"><span class="built_in">set</span> isosamples <span class="number">200</span>,<span class="number">200</span></span><br><span class="line"><span class="comment">//设置网格属性为200x200</span></span><br><span class="line">splot x**<span class="number">2</span>+y**<span class="number">2</span> w pm3d</span><br><span class="line"><span class="comment">//开始画图并且设置为pm3d模式</span></span><br></pre></td></tr></table></figure>
<p>然后只需在gnuplot命令界面输入</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">load 'try.plt'</span><br><span class="line"><span class="comment">//加载plt文件，执行画图任务</span></span><br></pre></td></tr></table></figure>
<p>其结果如下所示：<br><img src="https://img-blog.csdnimg.cn/20190921165002556.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="2-6-gnuplot画GIF动图"><a href="#2-6-gnuplot画GIF动图" class="headerlink" title="2.6 gnuplot画GIF动图"></a>2.6 gnuplot画GIF动图</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> term gif animate</span><br><span class="line"><span class="comment">//设置可以画动画</span></span><br><span class="line"><span class="built_in">set</span> output <span class="string">"e1.gif"</span></span><br><span class="line"><span class="comment">//设置输出的文件路径</span></span><br><span class="line"><span class="built_in">set</span> xrange [<span class="number">0</span>:<span class="number">4</span>*pi]</span><br><span class="line"><span class="built_in">set</span> yrange [<span class="number">-1</span>:<span class="number">1</span>]</span><br><span class="line"><span class="comment">//设置x,y范围</span></span><br><span class="line"><span class="keyword">do</span> <span class="keyword">for</span> [i=<span class="number">0</span>:<span class="number">40</span>]&#123;</span><br><span class="line">  plot <span class="built_in">sin</span>(x+i*pi/<span class="number">40</span>) lw <span class="number">1.5</span> title <span class="built_in">sprintf</span>(<span class="string">"t=%i"</span>,i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//循环输出图像</span></span><br><span class="line"><span class="built_in">set</span> output</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190921170213773.gif#pic_center" alt="在这里插入图片描述"></p>
<h1 id="3-参考文章"><a href="#3-参考文章" class="headerlink" title="3.参考文章"></a>3.参考文章</h1><blockquote>
<p>gnuplot使用: <a href="https://www.cnblogs.com/waterystone/p/5085801.html" target="_blank" rel="noopener">https://www.cnblogs.com/waterystone/p/5085801.html</a><br>gnuplot生成gif动图：<a href="https://blog.csdn.net/weixin_34187862/article/details/85648365" target="_blank" rel="noopener">https://blog.csdn.net/weixin_34187862/article/details/85648365</a><br>gnuplot三维绘图;<a href="https://blog.csdn.net/ouening/article/details/72141345" target="_blank" rel="noopener">https://blog.csdn.net/ouening/article/details/72141345</a></p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kingback2019.github.io/2019/11/19/matlab%E5%92%8Cc%E8%AF%AD%E8%A8%80%E5%9C%A8%E4%B8%8D%E8%B0%83%E7%94%A8%E5%8C%85%EF%BC%88%E5%BA%93%EF%BC%89%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E5%AE%9E%E7%8E%B0%E6%97%B6%E5%9F%9F%E5%8D%B7%E7%A7%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王延凯的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/19/matlab%E5%92%8Cc%E8%AF%AD%E8%A8%80%E5%9C%A8%E4%B8%8D%E8%B0%83%E7%94%A8%E5%8C%85%EF%BC%88%E5%BA%93%EF%BC%89%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E5%AE%9E%E7%8E%B0%E6%97%B6%E5%9F%9F%E5%8D%B7%E7%A7%AF/" itemprop="url">matlab和c语言在不调用包（库）的情况下实现时域卷积</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-19T09:04:27+08:00">
                2019-11-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>@<a href="matlab不调用conv函数实现卷积运算并用C语言进行卷积计算">TOC</a></p>
<h1 id="1-实验要求，matlab实现卷积运算（不调用函数和方法）"><a href="#1-实验要求，matlab实现卷积运算（不调用函数和方法）" class="headerlink" title="1.实验要求，matlab实现卷积运算（不调用函数和方法）"></a>1.实验要求，matlab实现卷积运算（不调用函数和方法）</h1><h2 id="1-1-卷积原理讲解"><a href="#1-1-卷积原理讲解" class="headerlink" title="1.1 卷积原理讲解"></a>1.1 卷积原理讲解</h2><p>$$<br>y[n]=\sum_{k=-\infty}^{\infty}{x[k]h[n-k]}=x[n]<em>h[n]\s(t)=f_1(t)</em>f_2(t)=\int_{-\infty}^tf_1(\tau)f_1(t-\tau)d\tau<br>$$<br>$\qquad$上述两式分别为离散卷积运算和连续卷积运算。实际上我们的电脑要进行卷积运算就是将连续的函数离散化，再来进行离散的卷积计算。</p>
<h2 id="1-2-卷积计算步骤（图解法）"><a href="#1-2-卷积计算步骤（图解法）" class="headerlink" title="1.2 卷积计算步骤（图解法）"></a>1.2 卷积计算步骤（图解法）</h2><blockquote>
<p><strong>1.翻折</strong>  先在坐标轴上画出$x(m)$和$h(m)$,将$h(m)$以纵坐标为坐标轴折叠成$h(-m)$。<br><strong>2.移位</strong> 将$h(-m)$移位$n$,得到$h(n-m)$[或将$f_1(-\tau)$移位$t$,得到$f_1(t-\tau)$],当n或t为正数时右移n或t,当n或t为负数时左移n或t。<br><strong>3.相乘</strong> 将$h(n-m)$[或$f_1(t-\tau)$]与$x(m)$[或$f_1(\tau)$]的对应序列值[(数值)]对应相乘<br><strong>4.相加</strong> 将所有的乘机累加[(积分)]起来，就得到了$y(n)$[或$s(t)$]</p>
</blockquote>
<h2 id="1-3-matlab画出两个窗函数"><a href="#1-3-matlab画出两个窗函数" class="headerlink" title="1.3 matlab画出两个窗函数"></a>1.3 matlab画出两个窗函数</h2><p>$\qquad$以下列出的是产生两个门函数的matlab代码，式中主要运用了matlab的<strong>f=@(x)</strong> 函数句柄 ，它主要是包含了函数的路径、函数名、类型以及可能存在的重载方法。函数句柄必须通过专门的定义创建的,而一般的图像的句柄是自动建立的。使用该形式的函数的方法相比于.m函数文件的优点就是，因为在计算机开始执行运算的时候是需要在整个的matlab代码中去寻找是否存在该.m文件，我们也知道，matlab整个的文件数量是非常多的，所以直接调用.m文件是会耗费一些时间的，而如果我们直接采用 <strong>@</strong> 的方式则会节省一部分时间。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">clc</span><br><span class="line"><span class="built_in">clear</span></span><br><span class="line">%定义函数，该函数主要实现任意形式的门函数</span><br><span class="line">high_1=<span class="number">1</span>;</span><br><span class="line">left_1=<span class="number">0</span>;</span><br><span class="line">right_1=<span class="number">1</span>;</span><br><span class="line">%定义要产生的窗函数的左右区间范围以及高度</span><br><span class="line">f_1=@(x) (high_1)*(x&gt;=left_1 &amp; x&lt;right_1);%<span class="number">0</span><span class="number">-1</span>的阶跃 高<span class="number">1</span></span><br><span class="line">f_2=@(x) (high_1+<span class="number">0.5</span>)*(x&gt;=left_1+<span class="number">2</span> &amp; x&lt;right_1+<span class="number">2</span>);%<span class="number">0</span><span class="number">-1</span>的阶跃 高<span class="number">1.5</span></span><br><span class="line">x=<span class="number">-4</span>:<span class="number">0.0006</span>:<span class="number">4</span>;</span><br><span class="line">y_1=f_1(x);%得到对应的窗函数的y轴数据</span><br><span class="line">y_2=f_2(x);</span><br><span class="line">%开始画第一个图</span><br><span class="line">figure(<span class="number">1</span>)</span><br><span class="line">hold on</span><br><span class="line">plot(x,y_1,'b','LineWidth',2.5);</span><br><span class="line">%加载x(t)图像</span><br><span class="line">grid on;</span><br><span class="line">axis([<span class="number">-1</span> <span class="number">5</span> <span class="number">0</span> <span class="number">2</span>])%确定画图范围</span><br><span class="line">plot(x,y_2,'r','linewidth',2.5);</span><br><span class="line">%加载y(t)图像</span><br><span class="line">%以下是坐标轴设置</span><br><span class="line">xlabel('s/t')</span><br><span class="line">ylabel('f(x)')</span><br><span class="line">title('需要卷积的两个窗函数的时域图像')</span><br><span class="line">legend('x(t)','h(t)');</span><br><span class="line">hold off;</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20190928213950692.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="1-4-对h-t-进行翻折得到"><a href="#1-4-对h-t-进行翻折得到" class="headerlink" title="1.4 对h(t)进行翻折得到"></a>1.4 对h(t)进行翻折得到</h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line">grid on;</span><br><span class="line">axis([<span class="number">-6</span> <span class="number">0</span> <span class="number">0</span> <span class="number">2</span>])<span class="comment">%确定画图范围</span></span><br><span class="line"><span class="built_in">plot</span>(-x,y_2,<span class="string">'r'</span>,<span class="string">'linewidth'</span>,<span class="number">2.5</span>);</span><br><span class="line"><span class="comment">%加载y(t)图像</span></span><br><span class="line"><span class="comment">%以下是坐标轴设置</span></span><br><span class="line">xlabel(<span class="string">'\tau'</span>)</span><br><span class="line">ylabel(<span class="string">'h(-\tau)'</span>)</span><br><span class="line">title(<span class="string">'对函数h(\tau)翻折'</span>)</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">'h(-\tau)'</span>);</span><br><span class="line"><span class="built_in">hold</span> off;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190928233201406.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="1-5-对-h-tau-进行移位"><a href="#1-5-对-h-tau-进行移位" class="headerlink" title="1.5 对$h(-\tau)$进行移位"></a>1.5 对$h(-\tau)$进行移位</h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot</span>(x,y_1,<span class="string">'b'</span>,<span class="string">'LineWidth'</span>,<span class="number">2.5</span>);</span><br><span class="line"><span class="comment">%画出x(t)函数</span></span><br><span class="line">grid on;</span><br><span class="line">title(<span class="string">'h(-\tau)移位演示'</span>)</span><br><span class="line">xlabel(<span class="string">'\tau'</span>)</span><br><span class="line">ylabel(<span class="string">'h(-\tau)'</span>)</span><br><span class="line"><span class="comment">%完成坐标轴设置</span></span><br><span class="line"><span class="keyword">for</span> n=<span class="number">-1</span>:<span class="number">0.08</span>:<span class="number">5</span></span><br><span class="line">    <span class="comment">%开始画卷积conv(t)=x(t)*h(t)</span></span><br><span class="line">    <span class="comment">%step1 得到h(-x)</span></span><br><span class="line">    <span class="keyword">if</span> n~=<span class="number">-1</span></span><br><span class="line">        pause(<span class="number">0.0003</span>);<span class="comment">%暂停</span></span><br><span class="line">        delete(text1);       </span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    h=f_2(n-x);</span><br><span class="line">    plot_n=<span class="built_in">plot</span>(x,h,<span class="string">'--r'</span>,<span class="string">'linewidth'</span>,<span class="number">2.5</span>);</span><br><span class="line">    axis([<span class="number">-4</span> <span class="number">5</span> <span class="number">0</span> <span class="number">2</span>]);</span><br><span class="line">    <span class="comment">%设置坐标轴范围</span></span><br><span class="line">    grid on;</span><br><span class="line">    pause(<span class="number">0.001</span>);<span class="comment">%暂停</span></span><br><span class="line">    delete(plot_n);<span class="comment">%删除原曲线</span></span><br><span class="line">    text(<span class="number">0.5</span>,<span class="number">1.8</span>,<span class="string">'当前的n数值为：'</span>);</span><br><span class="line">    text1=text(<span class="number">3.5</span>,<span class="number">1.8</span>,num2str(n*<span class="number">1.0</span>),<span class="string">'color'</span>,<span class="string">'r'</span>); </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">hold</span> off</span><br><span class="line"><span class="comment">%停止接收数据</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190929011035913.gif#pic_center" alt="在这里插入图片描述"></p>
<h2 id="1-6-对两个函数进行累乘加，并绘制卷积图像"><a href="#1-6-对两个函数进行累乘加，并绘制卷积图像" class="headerlink" title="1.6 对两个函数进行累乘加，并绘制卷积图像"></a>1.6 对两个函数进行累乘加，并绘制卷积图像</h2><p>在这一部分，我将附上整个卷积运算的全部代码和其运行结果演示。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">clc</span><br><span class="line">clear</span><br><span class="line"><span class="comment">%定义函数，该函数主要实现任意形式的门函数</span></span><br><span class="line">high_1=<span class="number">1</span>;</span><br><span class="line">left_1=<span class="number">0</span>;</span><br><span class="line">right_1=<span class="number">1</span>;</span><br><span class="line"><span class="comment">%定义要产生的窗函数的左右区间范围以及高度</span></span><br><span class="line">f_1=@(x) (high_1)*(x&gt;=left_1 &amp; x&lt;right_1);<span class="comment">%0-1的阶跃 高1</span></span><br><span class="line">f_2=@(x) (high_1+<span class="number">0.5</span>)*(x&gt;=left_1+<span class="number">2</span> &amp; x&lt;right_1+<span class="number">2</span>);<span class="comment">%0-1的阶跃 高1.5</span></span><br><span class="line">x=<span class="number">-4</span>:<span class="number">0.0006</span>:<span class="number">4</span>;</span><br><span class="line">y_1=f_1(x);<span class="comment">%得到对应的窗函数的y轴数据</span></span><br><span class="line">y_2=f_2(x);</span><br><span class="line"><span class="comment">%开始画第一个图</span></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot</span>(x,y_1,<span class="string">'b'</span>,<span class="string">'LineWidth'</span>,<span class="number">2.5</span>);</span><br><span class="line"><span class="comment">%加载x(t)图像</span></span><br><span class="line">grid on;</span><br><span class="line">axis([<span class="number">-1</span> <span class="number">5</span> <span class="number">0</span> <span class="number">2</span>])<span class="comment">%确定画图范围</span></span><br><span class="line"><span class="built_in">plot</span>(x,y_2,<span class="string">'r'</span>,<span class="string">'linewidth'</span>,<span class="number">2.5</span>);</span><br><span class="line"><span class="comment">%加载y(t)图像</span></span><br><span class="line"><span class="comment">%以下是坐标轴设置</span></span><br><span class="line">xlabel(<span class="string">'s/t'</span>)</span><br><span class="line">ylabel(<span class="string">'f(x)'</span>)</span><br><span class="line">title(<span class="string">'需要卷积的两个窗函数的时域图像'</span>)</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">'x(t)'</span>,<span class="string">'h(t)'</span>);</span><br><span class="line"><span class="built_in">hold</span> off;</span><br><span class="line"><span class="comment">%画出第二个演示图像</span></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot</span>(x,y_1,<span class="string">'b'</span>,<span class="string">'LineWidth'</span>,<span class="number">2.5</span>);</span><br><span class="line"><span class="comment">%画出x(t)函数</span></span><br><span class="line">grid on;</span><br><span class="line">title(<span class="string">'卷积演示'</span>)</span><br><span class="line">xlabel(<span class="string">'时间\tau'</span>)</span><br><span class="line">ylabel(<span class="string">'s(\tau)'</span>)</span><br><span class="line"><span class="comment">%完成坐标轴设置</span></span><br><span class="line"><span class="keyword">for</span> n=<span class="number">-1</span>:<span class="number">0.04</span>:<span class="number">5</span></span><br><span class="line">    <span class="comment">%开始画卷积conv(t)=x(t)*h(t)</span></span><br><span class="line">    <span class="comment">%step1 得到h(-x)</span></span><br><span class="line">    h=f_2(n-x);</span><br><span class="line">    plot_n=<span class="built_in">plot</span>(x,h,<span class="string">'--r'</span>,<span class="string">'linewidth'</span>,<span class="number">2.5</span>);</span><br><span class="line">    axis([<span class="number">-4</span> <span class="number">5</span> <span class="number">0</span> <span class="number">2</span>]);</span><br><span class="line">    <span class="comment">%设置坐标轴范围</span></span><br><span class="line">    grid on;</span><br><span class="line">    pause(<span class="number">0.001</span>);<span class="comment">%暂停</span></span><br><span class="line">    delete(plot_n);<span class="comment">%删除原曲线</span></span><br><span class="line">    <span class="comment">%开始计算卷积</span></span><br><span class="line">    sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> tao=<span class="number">-2</span>:<span class="number">0.01</span>:<span class="number">5</span></span><br><span class="line">        sum=sum+<span class="number">0.01</span>*f_1(tao)*f_2(n-tao);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">%此处完成加和操作。</span></span><br><span class="line">    <span class="built_in">disp</span>(sum);</span><br><span class="line">    <span class="built_in">plot</span>(n,sum,<span class="string">'.k'</span>)</span><br><span class="line">    <span class="comment">%此次执行结束相当于完成了n=-1时的图像的卷积</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">hold</span> off</span><br><span class="line"><span class="comment">%停止接收数据</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/2019092901182480.gif#pic_center" alt="在这里插入图片描述"></p>
<h1 id="2-实验要求，使用c语言画出该图像"><a href="#2-实验要求，使用c语言画出该图像" class="headerlink" title="2. 实验要求，使用c语言画出该图像"></a>2. 实验要求，使用c语言画出该图像</h1><p>$\qquad$首先讲解一下使用c语言产生该函数的数据，然后使用gnuplot画图工具调用这些数据并重绘数据图形。以下我将 分别列出产生这两个窗函数的c程序。</p>
<h2 id="2-1-产生在0-1区间上的窗函数数据"><a href="#2-1-产生在0-1区间上的窗函数数据" class="headerlink" title="2.1 产生在0-1区间上的窗函数数据"></a>2.1 产生在0-1区间上的窗函数数据</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">windows.c</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">change</span><span class="params">(<span class="keyword">double</span> x)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> y=<span class="number">0</span>;</span><br><span class="line">	y=(<span class="keyword">int</span>)((x)&gt;<span class="number">0</span> &amp;&amp; (x)&lt;=<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> x;</span><br><span class="line">	<span class="comment">//产生第一个窗函数的负半轴部分数据</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">4000</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">		<span class="comment">//此for循环产生</span></span><br><span class="line">        x=-i/<span class="number">1000.0</span>;</span><br><span class="line">        <span class="keyword">int</span> y=<span class="number">8</span>;</span><br><span class="line">		<span class="keyword">float</span> result=<span class="number">0</span>;</span><br><span class="line">		y=change(x);</span><br><span class="line">		<span class="comment">//调用函数实现窗函数数字转换</span></span><br><span class="line">		result=(<span class="keyword">float</span>)y*<span class="number">1.5</span>;</span><br><span class="line">		<span class="comment">//设置窗函数的高度</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%.3f\t%.2f\n"</span>,x,result);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//产生第一个窗函数的正半轴部分</span></span><br><span class="line">	 <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">4000</span>;i++)&#123;</span><br><span class="line">		<span class="comment">//此for循环产生</span></span><br><span class="line">        x=i/<span class="number">1000.0</span>;</span><br><span class="line">        <span class="keyword">int</span> y=<span class="number">8</span>;</span><br><span class="line">		<span class="keyword">float</span> result=<span class="number">0</span>;</span><br><span class="line">		y=change(x);</span><br><span class="line">		<span class="comment">//调用函数实现窗函数数字转换</span></span><br><span class="line">		result=(<span class="keyword">float</span>)y*<span class="number">1.0</span>;</span><br><span class="line">		<span class="comment">//设置窗函数的高度</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%.3f\t%.2f\n"</span>,x,result);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>$\quad$在编辑完该程序之后，我们再采用gcc编译器对其编译，并将其输出结果存入到res.dat文件中。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">E:\研一c语言工程训练\gnuplot&gt;gcc windows.c -o windows</span><br><span class="line">E:\研一c语言工程训练\gnuplot&gt;windows.exe &gt; res.dat</span><br></pre></td></tr></table></figure>
<h2 id="2-2产生2-3区间上的窗函数"><a href="#2-2产生2-3区间上的窗函数" class="headerlink" title="2.2产生2-3区间上的窗函数"></a>2.2产生2-3区间上的窗函数</h2><p>此窗函数其非零部分高度设置一样设置为1.5，和matlab里边的设置保持一致。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">window2.c</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">change</span><span class="params">(<span class="keyword">double</span> x)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> y=<span class="number">0</span>;</span><br><span class="line">	y=(<span class="keyword">int</span>)((x)&gt;<span class="number">2</span> &amp;&amp; (x)&lt;=<span class="number">3</span>);</span><br><span class="line">	<span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> x;</span><br><span class="line">	<span class="comment">//产生第一个窗函数的负半轴部分数据</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">4000</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">		<span class="comment">//此for循环产生</span></span><br><span class="line">        x=-i/<span class="number">1000.0</span>;</span><br><span class="line">        <span class="keyword">int</span> y=<span class="number">8</span>;</span><br><span class="line">		<span class="keyword">float</span> result=<span class="number">0</span>;</span><br><span class="line">		y=change(x);</span><br><span class="line">		<span class="comment">//调用函数实现窗函数数字转换</span></span><br><span class="line">		result=(<span class="keyword">float</span>)y*<span class="number">1.5</span>;</span><br><span class="line">		<span class="comment">//设置窗函数的高度</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%.3f\t%.2f\n"</span>,x,result);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//产生第一个窗函数的正半轴部分</span></span><br><span class="line">	 <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">4000</span>;i++)&#123;</span><br><span class="line">		<span class="comment">//此for循环产生</span></span><br><span class="line">        x=i/<span class="number">1000.0</span>;</span><br><span class="line">        <span class="keyword">int</span> y=<span class="number">8</span>;</span><br><span class="line">		<span class="keyword">float</span> result=<span class="number">0</span>;</span><br><span class="line">		y=change(x);</span><br><span class="line">		<span class="comment">//调用函数实现窗函数数字转换</span></span><br><span class="line">		result=(<span class="keyword">float</span>)y*<span class="number">1.5</span>;</span><br><span class="line">		<span class="comment">//设置窗函数的高度</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%.3f\t%.2f\n"</span>,x,result);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>$\qquad$同样，在编辑完该程序之后，我们再采用gcc编译器对其编译，并将其输出结果存入到res2.dat文件中。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">E:\研一c语言工程训练\gnuplot&gt;gcc window2.c -o window2</span><br><span class="line">E:\研一c语言工程训练\gnuplot&gt;window2.exe &gt; res2.dat</span><br></pre></td></tr></table></figure>
<h2 id="2-3-使用gnuplot重绘两个窗函数"><a href="#2-3-使用gnuplot重绘两个窗函数" class="headerlink" title="2.3 使用gnuplot重绘两个窗函数"></a>2.3 使用gnuplot重绘两个窗函数</h2><p>在命令行输入如下命令，对图像进行一些基础设置和绘图。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; set title('pictures of different windows function')</span><br><span class="line">gnuplot&gt; set xlabel 'time/s'</span><br><span class="line">gnuplot&gt; set ylabel 'f(t)'</span><br><span class="line">gnuplot&gt; plot [<span class="number">-4</span>:<span class="number">4</span>] [<span class="number">0</span>:<span class="number">2</span>] <span class="string">"res.dat"</span> u <span class="number">1</span>:<span class="number">2</span> w l lt <span class="number">6</span> lw <span class="number">2</span>,<span class="string">"res2.dat"</span> w l lt <span class="number">7</span> lw <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>执行完之后则会产生如下图。</p>
<p><img src="https://img-blog.csdnimg.cn/20190929162713558.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>可以看到c语言产生的绘制图片与matlab绘画出来的并没有什么差别。</p>
<h2 id="2-4-c语言实现时域卷积"><a href="#2-4-c语言实现时域卷积" class="headerlink" title="2.4 c语言实现时域卷积"></a>2.4 c语言实现时域卷积</h2><p>$\qquad$对于c语言实现卷积，此处我对于上边的代码又进行了修改以及综合，在该文件内，我分别将自变量t的取值范围、窗函数1的取值、窗函数2的取值以及两个窗函数的卷积存储在对应的数组内。然后再对这几个数组统一访问，输出到本地文件。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">change</span><span class="params">(<span class="keyword">double</span> x)</span></span>&#123;</span><br><span class="line">	<span class="comment">//定义函数1，该函数主要实现对窗函数1数值的转换，使得只在0-1范围内有取值且为1</span></span><br><span class="line">	<span class="keyword">double</span> y=<span class="number">0</span>;</span><br><span class="line">	y=(<span class="keyword">double</span>)((x)&gt;<span class="number">0</span> &amp;&amp; (x)&lt;=<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">change2</span><span class="params">(<span class="keyword">double</span> x)</span></span>&#123;</span><br><span class="line">	<span class="comment">//定义函数2，该函数主要实现对窗函数2数值的转换，使得只在2-3范围内有取值且为1</span></span><br><span class="line">	<span class="keyword">double</span> y=<span class="number">0</span>;</span><br><span class="line">	y=(<span class="keyword">double</span>)((x)&gt;<span class="number">2</span> &amp;&amp; (x)&lt;=<span class="number">3</span>);</span><br><span class="line">	<span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> x;</span><br><span class="line">	<span class="keyword">double</span> x_nums[<span class="number">8001</span>] = &#123;<span class="number">0.0</span>&#125;;</span><br><span class="line">	<span class="keyword">double</span> y_1[<span class="number">8001</span>]=&#123;<span class="number">0.0</span>&#125;;</span><br><span class="line">	<span class="keyword">double</span> y_2[<span class="number">8001</span>]=&#123;<span class="number">0.0</span>&#125;;</span><br><span class="line">	<span class="keyword">double</span> y_y[<span class="number">8001</span>]=&#123;<span class="number">0.0</span>&#125;;</span><br><span class="line">	<span class="comment">//其中x_nums中存储的是-4:0.001:4</span></span><br><span class="line">	<span class="comment">//y_1中存储的是在-4:0.001:4条件下窗函数1的取值</span></span><br><span class="line">	<span class="comment">//y_2中存储的是-4:0.001:4条件下窗函数2的取值</span></span><br><span class="line">	<span class="comment">//y_y中存储的是-4:0.001:4条件下窗函数1和窗函数卷积的取值</span></span><br><span class="line">	<span class="keyword">int</span> j=<span class="number">0</span>;</span><br><span class="line">	<span class="comment">//产生第一个窗函数的负半轴部分数据</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">4000</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">		<span class="comment">//此for循环产生</span></span><br><span class="line">        x=-(i/<span class="number">1000.0</span>);</span><br><span class="line">		j=<span class="number">4000</span>-i;</span><br><span class="line">        <span class="keyword">double</span> y,y2;</span><br><span class="line">		<span class="keyword">float</span> result,result2;</span><br><span class="line">		y=change(x);</span><br><span class="line">		y2=change2(x);</span><br><span class="line">		<span class="comment">//调用函数实现窗函数数字转换</span></span><br><span class="line">		result=y;</span><br><span class="line">		result2=y2;</span><br><span class="line">		x_nums[j]=x;</span><br><span class="line">		y_1[j]=result;</span><br><span class="line">		y_2[j]=result2*<span class="number">1.5</span>;</span><br><span class="line">		<span class="comment">//设置窗函数的高度</span></span><br><span class="line">		<span class="comment">//printf("%.3f\t%.2f\n",x,result);</span></span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//产生第一个窗函数的正半轴部分</span></span><br><span class="line">	 <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">4000</span>;i++)&#123;</span><br><span class="line">		<span class="comment">//此for循环产生</span></span><br><span class="line">        x=i/<span class="number">1000.0</span>;</span><br><span class="line">		j=i+<span class="number">4000</span>;</span><br><span class="line">        <span class="keyword">double</span> y,y2;</span><br><span class="line">		<span class="keyword">double</span> result,result2;</span><br><span class="line">		y=change(x);</span><br><span class="line">		y2=change2(x);</span><br><span class="line">		<span class="comment">//调用函数实现窗函数数字转换</span></span><br><span class="line">		result=y;</span><br><span class="line">		result2=y2;</span><br><span class="line">		<span class="comment">//设置窗函数的高度</span></span><br><span class="line">		<span class="comment">//printf("%.3f\t%.2f\n",x,result);</span></span><br><span class="line">		x_nums[j]=x;</span><br><span class="line">		y_1[j]=result;</span><br><span class="line">		y_2[j]=result2*<span class="number">1.5</span>;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//开始计算卷积</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">//step 1.计算负半轴部分卷积</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">4000</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">		x=-(i/<span class="number">1000.0</span>);</span><br><span class="line">		j=<span class="number">4000</span>-i;</span><br><span class="line">		<span class="comment">//计算tao为负的情况</span></span><br><span class="line">		<span class="keyword">double</span> sum;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">200</span>;t&gt;=<span class="number">0</span>;t--)&#123;</span><br><span class="line">			<span class="keyword">double</span> tao=-(t/<span class="number">100.0</span>);</span><br><span class="line">			sum=sum+<span class="number">0.01</span>*change(tao)*change2(x-tao)*<span class="number">1.5</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//计算tao为正的情况</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">1</span>;t&lt;=<span class="number">500</span>;t++)&#123;</span><br><span class="line">			<span class="keyword">double</span> tao=(t/<span class="number">100.0</span>);</span><br><span class="line">			sum=sum+<span class="number">0.01</span>*change(tao)*change2(x-tao)*<span class="number">1.5</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		y_y[j]=sum;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//step 2.计算正半轴部分卷积</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">4000</span>;i++)&#123;</span><br><span class="line">		x=(i/<span class="number">1000.0</span>);</span><br><span class="line">		j=<span class="number">4000</span>+i;</span><br><span class="line">		<span class="comment">//计算tao为负的情况</span></span><br><span class="line">		<span class="keyword">double</span> sum=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">200</span>;t&gt;=<span class="number">0</span>;t--)&#123;</span><br><span class="line">			<span class="keyword">double</span> tao=-(t/<span class="number">100.0</span>);</span><br><span class="line">			sum=sum+<span class="number">0.01</span>*change(tao)*change2(x-tao)*<span class="number">1.5</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//计算tao为正的情况</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">1</span>;t&lt;=<span class="number">500</span>;t++)&#123;</span><br><span class="line">			<span class="keyword">double</span> tao=(t/<span class="number">100.0</span>);</span><br><span class="line">			sum=sum+<span class="number">0.01</span>*change(tao)*change2(x-tao)*<span class="number">1.5</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		y_y[j]=sum;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//for循环输出画图需要的数据</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">8000</span>;i++) &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%.3f\t%.2f\t%.2f\t%.2f\n"</span>,x_nums[i],y_1[i],y_2[i],y_y[i]);</span><br><span class="line">		<span class="comment">//其中x_nums中存储的是-4:0.001:4</span></span><br><span class="line">		<span class="comment">//y_1中存储的是在-4:0.001:4条件下窗函数1的取值</span></span><br><span class="line">		<span class="comment">//y_2中存储的是-4:0.001:4条件下窗函数2的取值</span></span><br><span class="line">		<span class="comment">//y_y中存储的是-4:0.001:4条件下窗函数1和窗函数卷积的取值</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其具体的操作流程如下所示:<br><img src="https://img-blog.csdnimg.cn/20190929200938158.gif#pic_center" alt="在这里插入图片描述"><br>$\qquad$在上一步的操作中，我们已经实现了将我们绘图需要的数据存到了本地，接下来我们就要使用gnuplot来对这些数据绘制。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plot [<span class="number">-3</span>:<span class="number">5</span>] [<span class="number">0</span>:<span class="number">2</span>] <span class="string">"convolution.dat"</span> u <span class="number">1</span>:<span class="number">2</span> w l lt <span class="number">6</span> lw <span class="number">2.5</span>,<span class="string">"convolution.dat"</span> u <span class="number">1</span>:<span class="number">3</span> w l lt <span class="number">7</span> lw <span class="number">2.5</span>,<span class="string">"convolution.dat"</span> u <span class="number">1</span>:<span class="number">4</span> w p pt <span class="number">1</span> ps <span class="number">0.1</span></span><br></pre></td></tr></table></figure>
<p>具体的操作如下所示:<br><img src="https://img-blog.csdnimg.cn/20190929201444175.gif#pic_center" alt="在这里插入图片描述"></p>
<h1 id="3-c语言图像与matlab图像的比对"><a href="#3-c语言图像与matlab图像的比对" class="headerlink" title="3. c语言图像与matlab图像的比对"></a>3. c语言图像与matlab图像的比对</h1><p>$\qquad$另外，此时我们还需要将C语言画出来的卷积图像和matlab绘制出来的图像进行比对。下图中图1为c语言绘制的，图2为matlab绘制的。<br><img src="https://img-blog.csdnimg.cn/2019092920172674.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_50#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20190929202045488.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_50#pic_center" alt="在这里插入图片描述"></p>
<h2 id="3-1-总结-amp-体会"><a href="#3-1-总结-amp-体会" class="headerlink" title="3.1 总结 &amp; 体会"></a>3.1 总结 &amp; 体会</h2><p>$\qquad$本次实践分别使用matlab和c语言，在不调用其它函数包的情况下，自主绘画了两个窗函数并且实现了两个函数的时域卷积练习。通过本次实践，更加深刻的理解了卷积的概念，对于信号与系统以及数字语音处理的学习提供了帮助。另外希望此次博客可以为自己以后的练习提供帮助吧。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kingback2019.github.io/2019/11/19/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86matlab%E8%AE%AD%E7%BB%83%E7%AC%AC%E3%80%901%E3%80%91%E5%BC%B9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王延凯的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/19/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86matlab%E8%AE%AD%E7%BB%83%E7%AC%AC%E3%80%901%E3%80%91%E5%BC%B9/" itemprop="url">数字信号处理matlab训练第【1】弹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-19T09:04:15+08:00">
                2019-11-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>@<a href="数字信号处理matlab练习【1】">TOC</a></p>
<h1 id="1-产生一个均匀分布的白噪声信号u-n-画出波形，并检验其分布"><a href="#1-产生一个均匀分布的白噪声信号u-n-画出波形，并检验其分布" class="headerlink" title="1.产生一个均匀分布的白噪声信号u(n),画出波形，并检验其分布"></a>1.产生一个均匀分布的白噪声信号u(n),画出波形，并检验其分布</h1><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%使用rand函数产生均值为0.5，幅度在0-1之间的均匀分布的伪随机数</span></span><br><span class="line"><span class="comment">%以下将会调用rand函数产生一个均匀分布的白噪声信号</span></span><br><span class="line">clear;</span><br><span class="line">clc;</span><br><span class="line">N=<span class="number">5000</span>;<span class="comment">%长序列u(n)的长度</span></span><br><span class="line">u=<span class="built_in">rand</span>(<span class="number">1</span>,N);<span class="comment">%产生N个均与分布的伪随机数u(n)</span></span><br><span class="line">u_mean=<span class="built_in">mean</span>(u)<span class="comment">%求取u(n)的均值</span></span><br><span class="line">u_power=var(u)<span class="comment">%求取u(n)的方差</span></span><br><span class="line">subplot(<span class="number">211</span>);<span class="comment">%两行一列第1个图</span></span><br><span class="line"><span class="built_in">plot</span>(u(<span class="number">1</span>:<span class="number">100</span>));<span class="comment">%选取u(n)序列的前100个数据点</span></span><br><span class="line">grid on;<span class="comment">%显示方格</span></span><br><span class="line">ylabel(<span class="string">'u(n)'</span>);</span><br><span class="line">xlabel(<span class="string">'n'</span>)</span><br><span class="line">title(<span class="string">'1-100的u(n)数值显示'</span>)</span><br><span class="line"><span class="comment">%显示标题</span></span><br><span class="line">subplot(<span class="number">212</span>);<span class="comment">%两行一列第2个图</span></span><br><span class="line">hist(u,<span class="number">50</span>);grid on;</span><br><span class="line"><span class="comment">%对u(n)作直方图，检验其分布。50是对u(n)的取值范围（0-1）所分解的细胞数</span></span><br><span class="line">xlabel(<span class="string">'u(n)'</span>);</span><br><span class="line">ylabel(<span class="string">'个数'</span>);</span><br><span class="line">title(<span class="string">'u(n)的直方图'</span>)</span><br><span class="line"><span class="comment">%显示标题</span></span><br></pre></td></tr></table></figure>
<p>在上边的程序中我们可以看出，所求的白噪声$u(n)$的长度特别大(N=5000),在实际中，我们可能不需要这么大，之所以取这么大是希望当u(n)序列足够长时更接近于白噪声接近于均匀分布。我们可以根据自己需要选取自己喜欢的任何一段即可。<br>其结果如下所示：<br><img src="https://img-blog.csdnimg.cn/20191005135804986.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>在上边的运行结果我们也可以得到该随机序列的均值(u_mean)和方差(u_power).</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">u_mean =</span><br><span class="line"></span><br><span class="line">    <span class="number">0.5005</span></span><br><span class="line"></span><br><span class="line">u_power =</span><br><span class="line"></span><br><span class="line">    <span class="number">0.0836</span></span><br></pre></td></tr></table></figure>
<p>我们可以看到，产生的u(n)的均值为0.5，方差为0.0836（1/12）.</p>
<h1 id="2-产生一均匀分布、均值为0、功率为0-01的白噪声信号"><a href="#2-产生一均匀分布、均值为0、功率为0-01的白噪声信号" class="headerlink" title="2.产生一均匀分布、均值为0、功率为0.01的白噪声信号"></a>2.产生一均匀分布、均值为0、功率为0.01的白噪声信号</h1><p>在上边的例子中我们使用rand函数产生的u(n)为均值为0.5，功率$P_1=\frac{1}{12}$，现在需要将均值变为0、功率变为$P_2=\frac{1}{100}$。实现前者比较容易，只需将u(n)减去均值即可，而实现后者则需要调整u(n)的幅度。根据已知，我们可以得到以下公式：<br>$$<br>\frac{P_2}{P_1}=\frac{\frac{1}{100}}{\frac{1}{12}}=\frac{\sum_{i=0}^{N}(a_{2i})^2}{\sum_{i=0}^{N}(a_{1i})^2}=12P_2<br>$$<br>由于我们要实现的就是对于幅度的调整，来实现改变其方差，所以我们令以下等式成立$a_{2i}=a\cdot a_{1i}$ ,其中常数$a$就是我们所要求的一个比例因子。<br>$$<br>\frac{\sum_{i=0}^{N}(a_{2i})^2}{\sum_{i=0}^{N}(a_{1i})^2}=\frac{\sum_{i=0}^{N}(a\cdot a_{1i})^2}{\sum_{i=0}^{N}(a_{1i})^2}\ \quad<br>\=\frac{(a\cdot a_{10})^2+(a\cdot a_{11})^2+…+(a\cdot a_{1N})^2}{a_{10}^2+a_{11}^2+…+a_{1N}^2}\ \quad<br>\=\frac{a^2\cdot(a_{10}^2+a_{11}^2+…+a_{1N}^2)}{a_{10}^2+a_{11}^2+…+a_{1N}^2}=\quad a^2\quad=12P_2<br>$$<br>由上式的推导我们可以得出$a=\sqrt{12P_2}$,其中$P_2$的数值我们已知。<br>根据上边的推导，我们在matlab中敲下代码如下：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%%产生一个均匀分布、均值为0、功率为0.01的白噪声信号u(n)</span></span><br><span class="line">clc;</span><br><span class="line">clear;</span><br><span class="line">N=<span class="number">50000</span>;</span><br><span class="line"><span class="comment">%长序列u(n)的长度</span></span><br><span class="line">p_1=<span class="number">0.083</span>;</span><br><span class="line">p_2=<span class="number">0.01</span>;</span><br><span class="line"><span class="comment">%转换前的功率和所需要的功率</span></span><br><span class="line">u=<span class="built_in">rand</span>(<span class="number">1</span>,N);</span><br><span class="line"><span class="comment">%产生5000个0-1的伪随机数</span></span><br><span class="line">u=u-<span class="built_in">mean</span>(u);</span><br><span class="line"><span class="comment">%此处实现将均值置为0</span></span><br><span class="line">a=<span class="built_in">sqrt</span>(<span class="number">12</span>*p_2)</span><br><span class="line"><span class="comment">%求取常数比例因子</span></span><br><span class="line">u1=u*a;</span><br><span class="line"><span class="comment">%对序列的幅度进行调整</span></span><br><span class="line">u1_power=var(u1)</span><br><span class="line"><span class="comment">%求取该序列的方差</span></span><br><span class="line"><span class="built_in">plot</span>(u1(<span class="number">1</span>:<span class="number">100</span>));</span><br><span class="line"><span class="comment">%选取u(n)序列的前100个数据点</span></span><br><span class="line">grid on;</span><br><span class="line"><span class="comment">%显示网格</span></span><br><span class="line">xlabel(<span class="string">'n'</span>)</span><br><span class="line">ylabel(<span class="string">'u1(n)'</span>)</span><br><span class="line">title(<span class="string">'1-100的u1(n)数值显示'</span>)</span><br><span class="line"><span class="comment">%坐标轴设置</span></span><br></pre></td></tr></table></figure>
<p>运行之后，我们可以在输出行得到该序列的均值和功率以及需要求取的比例因子a：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">a =</span><br><span class="line"></span><br><span class="line">    <span class="number">0.3464</span></span><br><span class="line"></span><br><span class="line">u1_power =</span><br><span class="line"></span><br><span class="line">    <span class="number">0.0100</span></span><br><span class="line"></span><br><span class="line">u1_mean =</span><br><span class="line"></span><br><span class="line">  <span class="number">-2.3466e-15</span></span><br></pre></td></tr></table></figure>
<p>其运行结果如下所示：<br><img src="https://img-blog.csdnimg.cn/20191005162012833.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>通过上边的显示结果，我们可以看出，显然该序列的均值为0，幅度范围在-0.1733-0.1733之间。到此我们已经实现了我们的需求。</p>
<h1 id="3-产生均值为0，方差为1，服从高斯（正态）分布的高斯白噪声-u-n-及其位移和尺度变换"><a href="#3-产生均值为0，方差为1，服从高斯（正态）分布的高斯白噪声-u-n-及其位移和尺度变换" class="headerlink" title="3.产生均值为0，方差为1，服从高斯（正态）分布的高斯白噪声$u(n)$及其位移和尺度变换"></a>3.产生均值为0，方差为1，服从高斯（正态）分布的高斯白噪声$u(n)$及其位移和尺度变换</h1><p>在matlab中我们一般使用randn函数来产生该函数，其调用格式与rand格式相同，改变功率的方法也相同，只不过我们只需要将式子改为$a=\sqrt{1\cdot(P_2)}$即可。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%%产生均值为0，方差为1，服从高斯分布的白噪声信号u(n)</span></span><br><span class="line">clc;</span><br><span class="line">clear;</span><br><span class="line">N=<span class="number">50000</span>;</span><br><span class="line">u=<span class="built_in">randn</span>(<span class="number">1</span>,N);</span><br><span class="line"><span class="comment">%产生50000个满足均值为0，方差为1，服从正态分布的白噪声信号u(n)</span></span><br><span class="line">u_mean=<span class="built_in">mean</span>(u)</span><br><span class="line">u_power=var(u)</span><br><span class="line"><span class="comment">%输出其均值和方差</span></span><br><span class="line">set(gcf,<span class="string">'position'</span>,[<span class="number">180</span>,<span class="number">160</span>,<span class="number">800</span>,<span class="number">500</span>]);</span><br><span class="line"><span class="comment">%设置图片显示位置为（180，160）</span></span><br><span class="line"><span class="comment">%设置图片大小为（800，500）</span></span><br><span class="line">subplot(<span class="number">221</span>)</span><br><span class="line"><span class="built_in">plot</span>(u(<span class="number">1</span>:<span class="number">100</span>));</span><br><span class="line"><span class="comment">%选取u(n)序列的前100个数据点</span></span><br><span class="line">grid on;</span><br><span class="line"><span class="comment">%显示网格</span></span><br><span class="line">xlabel(<span class="string">'n'</span>);</span><br><span class="line">ylabel(<span class="string">'u(n)'</span>);</span><br><span class="line">title(<span class="string">'1-100的u(n)数值显示'</span>);</span><br><span class="line"><span class="comment">%坐标轴设置</span></span><br><span class="line">subplot(<span class="number">222</span>);</span><br><span class="line">hist(u,<span class="number">50</span>);grid on;</span><br><span class="line"><span class="comment">%对u2(n)作直方图，检验其分布。50是对u2(n)的取值范围（0-1）所分解的细胞数</span></span><br><span class="line">h=findobj(gca,<span class="string">'Type'</span>,<span class="string">'patch'</span>);</span><br><span class="line">set(h,<span class="string">'facecolor'</span>,<span class="string">'b'</span>);</span><br><span class="line"><span class="comment">%改变柱状图颜色</span></span><br><span class="line"><span class="comment">%显示网格</span></span><br><span class="line">xlabel(<span class="string">'u(n)'</span>);</span><br><span class="line">ylabel(<span class="string">'个数'</span>);</span><br><span class="line">title(<span class="string">'u(n)的直方图,均值为0，方差为1'</span>);</span><br><span class="line"><span class="comment">%坐标轴设置</span></span><br><span class="line">subplot(<span class="number">223</span>)</span><br><span class="line">p_2=<span class="number">0.1</span>;</span><br><span class="line"><span class="comment">%为新需要得到的方差赋值</span></span><br><span class="line">a=<span class="built_in">sqrt</span>(p_2);</span><br><span class="line"><span class="comment">%求取缩放因子a</span></span><br><span class="line">u1=a*u;</span><br><span class="line"><span class="comment">%得到功率(方差)为0.1的序列u1</span></span><br><span class="line">hist(u1,<span class="number">50</span>);grid on;</span><br><span class="line"><span class="comment">%对u1(n)作直方图，检验其分布。50是对u1(n)的取值范围（0-1）所分解的细胞数</span></span><br><span class="line"><span class="comment">%显示网格</span></span><br><span class="line">u1_mean=<span class="built_in">mean</span>(u)</span><br><span class="line">u1_power=var(u)</span><br><span class="line"><span class="comment">%输出其均值和方差</span></span><br><span class="line">h=findobj(gca,<span class="string">'Type'</span>,<span class="string">'patch'</span>);</span><br><span class="line">set(h,<span class="string">'facecolor'</span>,<span class="string">'r'</span>);</span><br><span class="line"><span class="comment">%改变柱状图颜色</span></span><br><span class="line">axis([<span class="number">-4</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">4000</span>])</span><br><span class="line"><span class="comment">%设置坐标轴显示范围</span></span><br><span class="line">xlabel(<span class="string">'u1(n)'</span>);</span><br><span class="line">ylabel(<span class="string">'个数'</span>);</span><br><span class="line">title(<span class="string">'u1(n)的直方图,均值为0，方差为0.1'</span>);</span><br><span class="line"><span class="comment">%坐标轴设置</span></span><br><span class="line">subplot(<span class="number">224</span>)</span><br><span class="line">u2=<span class="number">3</span>+u;</span><br><span class="line"><span class="comment">%设置均值为3</span></span><br><span class="line">hist(u2,<span class="number">50</span>);grid on;</span><br><span class="line"><span class="comment">%对u2(n)作直方图，检验其分布。50是对u2(n)的取值范围（0-1）所分解的细胞数</span></span><br><span class="line"><span class="comment">%显示网格</span></span><br><span class="line">u2_mean=<span class="built_in">mean</span>(u)</span><br><span class="line">u2_power=var(u)</span><br><span class="line"><span class="comment">%输出其均值和方差</span></span><br><span class="line">h=findobj(gca,<span class="string">'Type'</span>,<span class="string">'patch'</span>);</span><br><span class="line">set(h,<span class="string">'facecolor'</span>,<span class="string">'r'</span>);</span><br><span class="line"><span class="comment">%改变柱状图颜色</span></span><br><span class="line">axis([<span class="number">-4</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">4000</span>])</span><br><span class="line"><span class="comment">%设置坐标轴显示范围</span></span><br><span class="line">xlabel(<span class="string">'u2(n)'</span>);</span><br><span class="line">ylabel(<span class="string">'个数'</span>);</span><br><span class="line">title(<span class="string">'u2(n)的直方图,均值为3，方差为1'</span>);</span><br><span class="line"><span class="comment">%坐标轴设置</span></span><br></pre></td></tr></table></figure>
<p>在我们执行完以上程序后，我们则将会得到以下图示：<br><img src="https://img-blog.csdnimg.cn/201910051734000.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>另外在执行结束之后，我们也可以在输出行看到我们的各个数据的值</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">u_mean =</span><br><span class="line"></span><br><span class="line">   <span class="number">-0.0010</span></span><br><span class="line"></span><br><span class="line">u_power =</span><br><span class="line"></span><br><span class="line">    <span class="number">1.0034</span></span><br><span class="line"></span><br><span class="line">u1_mean =</span><br><span class="line"></span><br><span class="line">  <span class="number">-3.2553e-04</span></span><br><span class="line"></span><br><span class="line">u1_power =</span><br><span class="line"></span><br><span class="line">    <span class="number">0.1003</span></span><br><span class="line"></span><br><span class="line">u2_mean =</span><br><span class="line"></span><br><span class="line">    <span class="number">2.9990</span></span><br><span class="line"></span><br><span class="line">u2_power =</span><br><span class="line"></span><br><span class="line">    <span class="number">1.0034</span></span><br></pre></td></tr></table></figure>
<p>我们也可以看到，以上各个数值均是我们所需求的那样。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kingback2019.github.io/2019/11/19/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86matlab%E8%AE%AD%E7%BB%83%E7%AC%AC%E3%80%902%E3%80%91%E5%BC%B9--%E7%A6%BB%E6%95%A3%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E7%9A%84%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2%EF%BC%88DTFT%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王延凯的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/19/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86matlab%E8%AE%AD%E7%BB%83%E7%AC%AC%E3%80%902%E3%80%91%E5%BC%B9--%E7%A6%BB%E6%95%A3%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E7%9A%84%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2%EF%BC%88DTFT%EF%BC%89/" itemprop="url">数字信号处理matlab训练第【2】弹--离散时间序列的傅里叶变换（DTFT）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-19T09:04:05+08:00">
                2019-11-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>@<a href="数字信号处理matlab练习【2】">TOC</a></p>
<h1 id="1-实验要求"><a href="#1-实验要求" class="headerlink" title="1.实验要求"></a>1.实验要求</h1><p>已知函数$x(t)=sinc(t)，-2\pi \leq t \leq2\pi$,求其时域抽样函数$x(n)$,并且画出$x(n)$的离散时间序列的傅里叶变换(DTFT)下的幅频响应和相频响应。最后根据所画图形，得出结论。</p>
<h1 id="2-实现原理"><a href="#2-实现原理" class="headerlink" title="2.实现原理"></a>2.实现原理</h1><p>根据离散序列的傅里叶变换公式：<br>$$<br>X(e^{j\omega})=\sum_{n=-\infty}^{\infty}x(n)e^{-j\omega n}<br>$$<br>其中$\omega \in[-2\pi,2\pi]$,并以$\pi/100$作为取样间隔。</p>
<h1 id="3-matlab实现"><a href="#3-matlab实现" class="headerlink" title="3.matlab实现"></a>3.matlab实现</h1><p>我们依据对上边的式子的理解，使用matlab来编写，首先我们先画出该函数的原始图像，第二个图显示的是其抽样图像，第三个第四个分别为其DTFT变换后的幅频特性图和相频特性图。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%%开始实现离散时间序列DTFT，以sinc函数为例。</span></span><br><span class="line">clc;</span><br><span class="line">clear;</span><br><span class="line"><span class="comment">%清除指令和变量</span></span><br><span class="line">set(gcf,<span class="string">'position'</span>,[<span class="number">180</span>,<span class="number">160</span>,<span class="number">900</span>,<span class="number">550</span>]);</span><br><span class="line"><span class="comment">%设置图片显示位置为（180，160）</span></span><br><span class="line"><span class="comment">%设置图片大小为（900，550）</span></span><br><span class="line">subplot(<span class="number">221</span>)</span><br><span class="line">N1=<span class="number">200</span>;</span><br><span class="line">step=<span class="number">4</span>*<span class="built_in">pi</span>/N1;</span><br><span class="line">t=<span class="number">-2</span>*<span class="built_in">pi</span>:step:<span class="number">2</span>*<span class="built_in">pi</span>;</span><br><span class="line"><span class="comment">%对t在-2pi到2pi之间平分为100份</span></span><br><span class="line">y=sinc(t);</span><br><span class="line"><span class="built_in">plot</span>(t,y)</span><br><span class="line"><span class="comment">%定义函数并且画出sinc函数</span></span><br><span class="line">grid on;</span><br><span class="line"><span class="comment">%显示表格</span></span><br><span class="line">title(<span class="string">'sinc(t)在-2\pi到2\pi之间的图像'</span>);</span><br><span class="line">xlabel(<span class="string">'t'</span>);</span><br><span class="line">ylabel(<span class="string">'y(t)'</span>);</span><br><span class="line">axis([<span class="number">-7</span> <span class="number">7</span> <span class="number">-0.3</span> <span class="number">1.2</span>])</span><br><span class="line"><span class="comment">%设置横纵坐标轴</span></span><br><span class="line"></span><br><span class="line">subplot(<span class="number">222</span>)</span><br><span class="line">ts=<span class="number">0.1</span>;<span class="comment">%取样时间</span></span><br><span class="line">fs=<span class="number">1</span>/ts;<span class="comment">%周期</span></span><br><span class="line">N2=<span class="number">31</span>;<span class="comment">%取样总数</span></span><br><span class="line">n=<span class="number">-15</span>:<span class="number">15</span>;</span><br><span class="line">xn=sinc(<span class="number">4</span>*<span class="built_in">pi</span>*n/N2);<span class="comment">%取离散信号数据</span></span><br><span class="line">stem(n,xn,<span class="string">'filled'</span>,<span class="string">'r'</span>);<span class="comment">%绘制时域取样图</span></span><br><span class="line">grid on;</span><br><span class="line"><span class="comment">%显示方格</span></span><br><span class="line">title(<span class="string">'sinc(t)在-2\pi到2\pi之间的抽样'</span>);</span><br><span class="line">xlabel(<span class="string">'n'</span>);</span><br><span class="line">ylabel(<span class="string">'sinc(n)'</span>);</span><br><span class="line">axis([<span class="number">-16</span> <span class="number">16</span> <span class="number">-0.4</span> <span class="number">1.5</span>])</span><br><span class="line"><span class="comment">%设置横纵坐标轴</span></span><br><span class="line"></span><br><span class="line">subplot(<span class="number">223</span>)</span><br><span class="line">k=<span class="number">-200</span>:<span class="number">200</span>;</span><br><span class="line">w=(<span class="built_in">pi</span>/<span class="number">100</span>)*k;<span class="comment">%其原始式子为w=(4*pi)*k/400</span></span><br><span class="line"><span class="comment">%将w针对不同的k的取值，区间变为[-2*pi,2*pi]</span></span><br><span class="line">wn=<span class="built_in">exp</span>(-<span class="built_in">j</span>*<span class="built_in">pi</span>/<span class="number">100</span>);</span><br><span class="line"><span class="comment">%得到公式中的 e的-j*omiga, 该量是个常数</span></span><br><span class="line">nk=n'*k;</span><br><span class="line"><span class="comment">%n的转置与k相乘</span></span><br><span class="line"><span class="comment">%nk为取样矩阵，相当于先是循环n次再是循环k次得到</span></span><br><span class="line">xk=wn.^nk;</span><br><span class="line"><span class="comment">%得到公式中的复变量e的-j*omiga*n</span></span><br><span class="line">X=xn*xk;</span><br><span class="line"><span class="comment">%得到离散序列的傅里叶变换</span></span><br><span class="line">magX=<span class="built_in">abs</span>(X);</span><br><span class="line"><span class="comment">%求取该DTFT的模，其作用相当于|X|</span></span><br><span class="line"><span class="built_in">plot</span>(w,magX,<span class="string">'g'</span>)</span><br><span class="line"><span class="comment">%在频率[-2pi,2pi]范围内画出幅频响应</span></span><br><span class="line">axis([<span class="number">-2</span>*<span class="built_in">pi</span> <span class="number">2</span>*<span class="built_in">pi</span> <span class="number">0</span> <span class="number">3</span>])</span><br><span class="line">title(<span class="string">'幅频特性'</span>);</span><br><span class="line">xlabel(<span class="string">'w/圆周频率'</span>);</span><br><span class="line">ylabel(<span class="string">'|X|'</span>);</span><br><span class="line"><span class="comment">%设置横纵坐标轴</span></span><br><span class="line"></span><br><span class="line">subplot(<span class="number">224</span>)</span><br><span class="line">angX=<span class="built_in">angle</span>(X);</span><br><span class="line"><span class="comment">%求取该DTFT的相位</span></span><br><span class="line"><span class="built_in">plot</span>(w,angX)</span><br><span class="line"><span class="comment">%在频率[-2pi,2pi]范围内画出相频响应</span></span><br><span class="line">title(<span class="string">'相频特性'</span>);</span><br><span class="line">xlabel(<span class="string">'w/圆周频率'</span>);</span><br><span class="line">ylabel(<span class="string">'相位'</span>);</span><br><span class="line">axis([<span class="number">-2</span>*<span class="built_in">pi</span> <span class="number">2</span>*<span class="built_in">pi</span> <span class="number">-4</span> <span class="number">4</span>])</span><br><span class="line"><span class="comment">%设置横纵坐标轴</span></span><br></pre></td></tr></table></figure>
<h1 id="4-结果显示"><a href="#4-结果显示" class="headerlink" title="4.结果显示"></a>4.结果显示</h1><p><img src="https://img-blog.csdnimg.cn/201910061609077.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h1 id="5-小结"><a href="#5-小结" class="headerlink" title="5.小结"></a>5.小结</h1><p>通过上边显示的图片我们可以看到并总结出如下结论。<br><strong>1.$X(e^{j\omega})$不仅是$\omega$的周期函数，而且是共轭对称的，因此对于实值序列，我们只画出其$[0,2\pi]$,画出其傅里叶变换的幅度和相位即可。<br>2.$x(n)$为在时域方面是离散的非周期信号，而通过DTFT变换之后，在频域方面是连续周期的。</strong></p>
<h1 id="6-参考文章"><a href="#6-参考文章" class="headerlink" title="6.参考文章"></a>6.参考文章</h1><blockquote>
<p>傅里叶变换matlab实现： <a href="https://blog.csdn.net/seek97/article/details/82813515" target="_blank" rel="noopener">https://blog.csdn.net/seek97/article/details/82813515</a></p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kingback2019.github.io/2019/11/19/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86matlab%E8%AE%AD%E7%BB%83%E7%AC%AC%E3%80%903%E3%80%91%E5%BC%B9--%E6%B1%82%E5%8F%96%E7%A6%BB%E6%95%A3%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%BE%93%E5%87%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王延凯的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/19/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86matlab%E8%AE%AD%E7%BB%83%E7%AC%AC%E3%80%903%E3%80%91%E5%BC%B9--%E6%B1%82%E5%8F%96%E7%A6%BB%E6%95%A3%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%BE%93%E5%87%BA/" itemprop="url">数字信号处理matlab训练第【3】弹--求取离散系统的输出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-19T09:03:51+08:00">
                2019-11-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>@<a href="数字信号处理matlab训练【3】">TOC</a></p>
<h1 id="1-LSI系统的转移函数"><a href="#1-LSI系统的转移函数" class="headerlink" title="1.LSI系统的转移函数"></a>1.LSI系统的转移函数</h1><p>对于一个线性时不变离散时间系统（如下图所示），我们在之前就已经接触到了4种不同的描述方法。</p>
<p><img src="https://img-blog.csdnimg.cn/20191006213039910.png#pic_center" alt="在这里插入图片描述"></p>
<h2 id="1-1-频率响应"><a href="#1-1-频率响应" class="headerlink" title="1.1 频率响应"></a>1.1 频率响应</h2><p>$$<br>H(e^{j\omega})=\sum_{n=0}^{\infty}h(n)e^{-j\omega n}<br>$$</p>
<h2 id="1-2-转移函数"><a href="#1-2-转移函数" class="headerlink" title="1.2 转移函数"></a>1.2 转移函数</h2><p>$$<br>H(z)=\sum_{n=0}^{\infty}h(n)z^{-n}<br>$$</p>
<h2 id="1-3-差分方程"><a href="#1-3-差分方程" class="headerlink" title="1.3 差分方程"></a>1.3 差分方程</h2><p>$$<br>y(n)=-\sum_{k=1}^Na(k)y(n-k)+\sum_{r=0}^Mb(r)x(n-r)<br>$$</p>
<h2 id="1-4-卷积关系"><a href="#1-4-卷积关系" class="headerlink" title="1.4 卷积关系"></a>1.4 卷积关系</h2><p>$$<br>y(n)=x(n)*h(n)=\sum_{k=-\infty}^\infty x(k)h(n-k)<br>$$<br>上边的4种方法从不同的角度描述了一个LSI系统的物理特性，他们之间有着密切的联系，其联系的纽带就是系统的单位冲激响应$h(n)$</p>
<h2 id="1-5-系统的转移函数-H-Z"><a href="#1-5-系统的转移函数-H-Z" class="headerlink" title="1.5 系统的转移函数$H(Z)$"></a>1.5 系统的转移函数$H(Z)$</h2><p>对上边的第三式两边取Z变换，得<br>$$<br>Y(z)=-Y(z)\sum_{k=1}^Na(k)z^{-k}+X(z)\sum_{r=0}^Mb(r)z^{-r}\ \quad \Y(z)[1+\sum_{k=1}^Na(k)z^{-k}]=X(z)[b(0)+\sum_{r=1}^Mb(r)z^{-r}]<br>$$<br>对上边的式子进行整理可得<br>$$<br>H(z)=\frac{Y(z)}{X(z)}=\frac{\sum_{r=0}^Mb(r)z^{-r}}{1+\sum_{k=1}^Na(k)z^{-k}}<br>$$<br>上式$H(z)$就被称为系统的转移函数。它即可以定义为系统单位抽样响应$h(n)$的z变换，也可以 定义为系统的输出、输入Z变换之比。</p>
<h1 id="2-matlab编程训练，求系统的阶跃响应"><a href="#2-matlab编程训练，求系统的阶跃响应" class="headerlink" title="2.matlab编程训练，求系统的阶跃响应"></a>2.matlab编程训练，求系统的阶跃响应</h1><p>我们之前学过的，如果已经知道系统的$h(n)$,由于$y(n)=x(n)*h(n)$,则我们可以轻松的使用conv函数将其求得，但是如果我们不知道$h(n)$,已知$Y(z)$、$X(z)$,需要求$y(n)$，则我们可以根据公式，<br>$$<br>y(n)=-\sum_{k=1}^Na(k)y(n-k)+\sum_{r=0}^Mb(r)x(n-r)\ \quad<br>\=b(1)x(n)+b(2)x(n-1)+…+b(n_b+1)x(n-n_b)\ \quad \-a(2)y(n-1)-…-a(n_a+1)y(n-n_a)<br>$$<br>求取我们的$y(n)$,使用matlab内的一个函数$y=filter(b,a,x)$其中$x、y、a和b$都是向量。</p>
<h2 id="2-1-编程实训"><a href="#2-1-编程实训" class="headerlink" title="2.1 编程实训"></a>2.1 编程实训</h2><p>已知一个系统的转移函数如下所示：<br>$$<br>H(z)=\frac{0.001836+0.007344z^{-1}+0.011016z^{-2}+0.007374z^{-3}+0.001836z^{-4}}{1-3.0544z^{-1}+3.8291z^{-2}-2.2925z^{-3}+0.55075z^{-4}}<br>$$<br>求该系统的阶跃响应。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">%%转移函数</span><br><span class="line">clc;</span><br><span class="line"><span class="built_in">clear</span>;</span><br><span class="line">x=ones(<span class="number">100</span>,<span class="number">1</span>);</span><br><span class="line">%定义阶跃输入</span><br><span class="line">t=<span class="number">1</span>:<span class="number">100</span>;</span><br><span class="line">b=[<span class="number">0.001836</span>,<span class="number">0.007344</span>,<span class="number">0.011016</span>,<span class="number">0.007374</span>,<span class="number">0.001836</span>];</span><br><span class="line">%定义向量b</span><br><span class="line">a=[<span class="number">1</span>,<span class="number">-3.0544</span>,<span class="number">3.8291</span>,<span class="number">-2.2925</span>,<span class="number">0.55075</span>];</span><br><span class="line">%定义向量a</span><br><span class="line">y=filter(b,a,x);</span><br><span class="line">%得到y(n)</span><br><span class="line">hold on</span><br><span class="line">h1=plot(t,x,<span class="string">'b'</span>);</span><br><span class="line">h2=plot(t,y,<span class="string">'r'</span>);</span><br><span class="line">hold off</span><br><span class="line">%画图结束</span><br><span class="line">legend([h1,h2],'阶跃输入','阶跃响应');</span><br><span class="line">%添加标注</span><br></pre></td></tr></table></figure>
<p>其运行结果为：<br><img src="https://img-blog.csdnimg.cn/2019100621033464.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="2-2-求取系统的单位抽样响应h-n"><a href="#2-2-求取系统的单位抽样响应h-n" class="headerlink" title="2.2 求取系统的单位抽样响应h(n)"></a>2.2 求取系统的单位抽样响应h(n)</h2><p>在我们得到上边的情况下，如果我们想要得到该系统的单位抽样响应，编辑mtalab代码如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[h,t]=impz(b,a,<span class="number">40</span>);</span><br><span class="line">%令h(n)的长度为N=<span class="number">40</span></span><br><span class="line">stem(t,h,<span class="string">'.'</span>);</span><br><span class="line">%绘制离散的h(n)</span><br><span class="line">grid on;</span><br></pre></td></tr></table></figure>
<p>其显示结果如下所示：<br><img src="https://img-blog.csdnimg.cn/20191006211418743.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="2-3-求上述系统的频率响应"><a href="#2-3-求上述系统的频率响应" class="headerlink" title="2.3 求上述系统的频率响应"></a>2.3 求上述系统的频率响应</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">%%得到系统的频率响应</span><br><span class="line">[H,w]=freqz(b,a,256,'whole',1);</span><br><span class="line">%whole 指定计算的频率范围是<span class="number">0</span>-Fs,此处我们设置Fs=<span class="number">1</span></span><br><span class="line">Hr=<span class="built_in">abs</span>(H);</span><br><span class="line">%得到绝对值，也就是幅度值</span><br><span class="line">plot(w,Hr,'r','linewidth',2);</span><br><span class="line">%绘制图形，并且设置颜色和线宽</span><br><span class="line">grid on;</span><br><span class="line">%显示方格</span><br><span class="line">xlabel('\omega /2\pi');</span><br><span class="line">ylabel('|H(e^&#123;j\omega&#125;)|');</span><br><span class="line">title('幅频响应')</span><br><span class="line">%坐标轴设置</span><br></pre></td></tr></table></figure>
<p>输出图像如下所示：<br><img src="https://img-blog.csdnimg.cn/20191006212615264.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h1 id="3-参考文章"><a href="#3-参考文章" class="headerlink" title="3.参考文章"></a>3.参考文章</h1><blockquote>
<p>数字信号处理理论、算法与实现（第三版）</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kingback2019.github.io/2019/11/19/%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E8%B4%A6%E6%88%B7%E5%AF%86%E7%A0%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王延凯的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/19/%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E8%B4%A6%E6%88%B7%E5%AF%86%E7%A0%81/" itemprop="url">如何查看账户密码</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-19T09:03:11+08:00">
                2019-11-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>@<a href="如何优雅的查看电脑账户免密码">TOC</a></p>
<h1 id="1-情况描述：比如以下这种情况，我们想要得到看到登陆密码。"><a href="#1-情况描述：比如以下这种情况，我们想要得到看到登陆密码。" class="headerlink" title="1.情况描述：比如以下这种情况，我们想要得到看到登陆密码。"></a>1.情况描述：比如以下这种情况，我们想要得到看到登陆密码。</h1><p><img src="https://img-blog.csdnimg.cn/20191018200914209.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h1 id="2-解决方案"><a href="#2-解决方案" class="headerlink" title="2.解决方案"></a>2.解决方案</h1><p>当然这可以使用浏览器的密码管理功能可以看到，但是今天我将会提出来一个更加简便的方法。</p>
<blockquote>
<p>1.在浏览器按下F12（这是chrome浏览器），进入开发者模式<br>2.按下图分别点击步骤1、2<br><img src="https://img-blog.csdnimg.cn/20191018201422182.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>3.找到定位地点，将标识部分的password改为text<br>4.回车即可看到我们需要的密码。</p>
</blockquote>
<table>
<thead>
<tr>
<th><img src="https://img-blog.csdnimg.cn/20191018201538605.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></th>
<th><img src="https://img-blog.csdnimg.cn/20191018201753113.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></th>
</tr>
</thead>
<tbody><tr>
<td>好了，满足要求，大家掌握了吗？</td>
<td></td>
</tr>
</tbody></table>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kingback2019.github.io/2019/11/19/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E5%BF%AB%E9%80%9F%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2FFT/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王延凯的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/19/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E5%BF%AB%E9%80%9F%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2FFT/" itemprop="url">深入理解快速傅里叶变换FFT</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-19T09:02:57+08:00">
                2019-11-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>@<a href="深入理解快速傅里叶变换FFT">TOC</a></p>
<h1 id="1-FFT介绍"><a href="#1-FFT介绍" class="headerlink" title="1.FFT介绍"></a>1.FFT介绍</h1><p>$\qquad$离散傅里叶变换（DFT）和卷积是信号处理中两个最基本也是最常用的运算，对于N点序列$x(n)$,其DFT变换对定义为：</p>
<p>$$<br>\quad\quad\quad \quad X(k)=\sum_{n=0}^{N-1}x(n)W_N^{nk} \quad\quad k=0,1,2,…,N-1,W_N=e^{-j\frac{2\pi}{N}}\ \quad \<br>x(n)=\frac1N\sum_{k=0}^{N-1}X(k)W_N^{-nk} \quad\quad n=0,1,…,N-1<br>$$<br>首先解释一下，这里的$W_N=e^{-j\frac{2\pi}{N}}$是一个复数运算，其取得过程如下所示：<br><img src="https://img-blog.csdnimg.cn/20191012214106777.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>在上图中我们可以知道，这里的$W_N$是经过截短了的。<br>$\qquad$另外在上边的公式中，我们可以看出，由于$W_N$是个复数，又因为k的取值范围在0到N-1，共有N个不同的选择，而对于每一个选定$k$值的式子，其$n$的取值范围又从0到N-1，由此可以算出，这$N$个点$X(k)$需要$N^2$次复数运算和$N(N-1)$次复数加法。再由欧拉公式：<br>$$<br>e^{jw}=cosw+jsinw\ \quad \<br>e^{-jw}=cosw-jsinw<br>$$<br>将欧拉公式带入$W_N$则有：<br>$$W_N=e^{-j\frac{\pi}{2}}=cos(\frac{\pi}{2})-jsin(\frac{\pi}{2})=-j<br>$$<br>由以上公式则也可以分别求得$W_N^{nk}$,当N等于4时，其表格如下所示：<br>$W_N^{nk}$ 取N=4    | Value<br>——– | —–<br>$W_N^0$  | $1$<br>$W_N^1$  | $-j$<br>$W_N^2$ | $-1$<br>$W_N^3$  | $j$<br>$W_N^4$ | $1$<br>$W_N^6$  | $-1$<br>$W_N^9$  | $-j$<br>在上边的运算中我们可以看到，虽然要运行的运算次数有很多，但是结果却是有一定规律的：<br>$$<br>W_N^0=W_N^4=1\ \quad \<br>W_N^1=W_N^9=-j \ \quad \<br>W_N^2=W_N^6=-1\ \quad \<br>W_N^3=j<br>$$<br>$\qquad$到了这里，我们或许就看出来了一些规律，此处我们取的N=4,我们发现其结果也是以4为周期的。那么我们现在给出其一般性规律，也就是我们后边的进行快速FFT的基础。<br>$$<br>W_N^0=1\ \quad \<br>W_N^{N/2}=-1\ \quad \<br>W_N^{N+r}=W_N^r\ \quad \<br>W_N^{(N/2)+r}=-W_N^r<br>$$<br>$\qquad$有了上边的规律，我们接下来就以4点DFT来测试一下，根据$X(k)$的计算公式直接计算的话，我们则需要进行$4^2=16$次的复数运算，所以我们根据以上得到的规律写成以下矩阵形式：<br>$$<br>\left[\begin{matrix} X(0)\ X(1)\X(2)\X(3)\end{matrix}\right]=<br>\left[ \begin{matrix} 1 &amp; 1 &amp; 1 &amp; 1 \ 1 &amp; -j &amp; -1 &amp; j \ 1 &amp; -1&amp; 1 &amp; -1  \ 1 &amp; j &amp; -1 &amp; -j  \end{matrix} \right]<br>\left[\begin{matrix} x(0)\ x(1)\x(2)\x(3)\end{matrix}\right]<br>$$<br>$\qquad$接下来我们就要对上边的矩阵进行一下初等变换，使得其结果仍然等于等式左侧（这里的对右边两个矩阵进行初等变换的目的是为了更加直观的显示出蝶形运算）。<br>为方便表示，我接下来分别将等式右边的矩阵定义为矩阵A和矩阵B,其形式如下：<br>$$<br>A=\left[ \begin{matrix} 1 &amp; 1 &amp; 1 &amp; 1 \ 1 &amp; -j &amp; -1 &amp; j \ 1 &amp; -1&amp; 1 &amp; -1  \ 1 &amp; j &amp; -1 &amp; -j  \end{matrix} \right] \qquad\qquad<br>B=\left[\begin{matrix} x(0)\ x(1)\x(2)\x(3)\end{matrix}\right]<br>$$<br>因为矩阵$AB=AEB$,则上边的$X(k)$的矩阵即可表示成：<br>$$<br>\left[\begin{matrix} X(0)\ X(1)\X(2)\X(3)\end{matrix}\right]=A\left[ \begin{matrix} 1 &amp; 0&amp; 0 &amp; 0 \ 0 &amp; 1 &amp; 0 &amp; 0 \ 0 &amp; 0&amp; 1 &amp; 0  \ 0 &amp; 0 &amp; 0 &amp; 1  \end{matrix} \right]B<br>\ \quad \\quad\quad\quad\quad\quad\quad\quad\quad\quad\quad\quad<br>=A\left[ \begin{matrix} 1 &amp; 0&amp; 0 &amp; 0 \ 0 &amp; 0 &amp; 1 &amp; 0 \ 0 &amp; 1&amp; 0 &amp; 0  \ 0 &amp; 0 &amp; 0 &amp; 1  \end{matrix} \right]\left[ \begin{matrix} 1 &amp; 0&amp; 0 &amp; 0 \ 0 &amp; 0 &amp; 1 &amp; 0 \ 0 &amp; 1&amp; 0 &amp; 0  \ 0 &amp; 0 &amp; 0 &amp; 1  \end{matrix} \right]B<br>\ \quad \\quad\quad\quad\quad\quad\quad\quad\quad<br>=\left[ \begin{matrix} 1 &amp; 1 &amp; 1 &amp; 1 \ 1 &amp; -1 &amp; -j &amp; j \ 1 &amp; 1&amp; -1 &amp; -1  \ 1 &amp; -1 &amp; j &amp; -j  \end{matrix} \right]<br>\left[\begin{matrix} x(0)\ x(2)\x(1)\x(3)\end{matrix}\right]<br>$$<br>$\qquad$在上式中，我们对于矩阵A的第二列和第三列互换，将矩阵B的第二行和第三行互换，其结果不变。根据此结果，我们就可以的得出，如下等式：<br>$$<br>X(0)=[x(0)+x(2)]+[x(1)+x(3)] \ \quad \<br>X(1)=[x(0)-x(2)]-[x(1)-x(3)]j\ \quad \<br>X(2)=[x(0)+x(2)]-[x(1)+x(3)]\ \quad \<br>X(3)=[x(0)-x(2)]+[x(1)-x(3)]j<br>$$<br>$\qquad$这样，四点DFT实际上只需要进行一次复数乘法，也就是只需要进行计算$[x(1)-x(3)]j$即可，其实该问题的关键就是如何巧妙的利用W因子的周期性以及对称性，导出一个高效的快速算法。<br>$\qquad$在上边的推导中，我们也可以看到在应用了快速傅里叶变换算法（FFT）后，使得N点的DFT算法的乘法计算量由$N^2$次运算降为$\frac{N}{2}log_2N$次，大大加快了计算速度。</p>
<h1 id="2-时间抽取（DIT）基2-FFT算法"><a href="#2-时间抽取（DIT）基2-FFT算法" class="headerlink" title="2.时间抽取（DIT）基2  FFT算法"></a>2.时间抽取（DIT）基2  FFT算法</h1><p>在介绍这个之前，我先介绍一下FFT的核心思想：<br><img src="https://img-blog.csdnimg.cn/20191013193006106.png#pic_center" alt="在这里插入图片描述"><br>对于N点的DFT算法，我们习惯上使用$N=2^M$来进行计算，根据DFT正变换的公式:</p>
<p>$$<br>X(k)=\sum_{n=0}^{N-1}x(n)W_N^{nk} \quad\quad k=0,1,2,…,N-1,W_N=e^{-j\frac{2\pi}{N}}<br>$$<br>中我们将$x(n)$分为奇、偶两部分，也就是令$n=2r 、n=2r+1 \qquad r=0.1,…, \frac{N}{2}-1$于是上式也就可以改写为：<br>$$<br>X(k)=\sum_{r=0}^{N/2-1}x(2r)W_N^{2rk}+ \sum_{r=0}^{N/2-1}x(2r+1)W_N^{(2r+1)k}\ \quad \\quad\quad\quad<br>=\sum_{r=0}^{N/2-1}x(2r)W_{N/2}^{2rk}+ \sum_{r=0}^{N/2-1}x(2r+1)W_{N/2}^{(2r+1)k}<br>$$<br>式中$W_{N/2}=e^{-j\frac{2\pi}{N/2}}=e^{-j\pi}$<br>现在令$A(k)、B(k)$：分别代表$X(k)$的偶数项和奇数项：<br>$$<br>A(k)=\sum_{r=0}^{N/2-1}x(2r)W_{N/2}^{2rk} \qquad k=0,1,…,\frac N2-1 \ \quad \\quad\quad\quad<br>B(k)=\sum_{r=0}^{N/2-1}x(2r+1)W_{N/2}^{(2r+1)k}\qquad k=0,1,…,\frac N2-1 \ \quad \<br>$$<br>那么，$X(k)$则可以表示为：<br>$$<br>X(k)=A(k)+W_N^kB(k),\qquad k=0,1,…,\frac N2-1<br>$$<br>$\qquad$但是此时我们仅可以根据该式子，算出来一半的$X(k)$,也就是$X(0)、X(1)$,而其余两项该式是无法求出的。具体的想要求出其余两项则需要公式：<br>$$<br>X(k+\frac N2)=A(k+\frac N2)+W_N^{k+\frac N2}B(k+\frac N2)\ \quad \\quad\quad\quad\quad<br>=A(k+\frac N2)-W_N^{k}B(k+\frac N2)\ \quad \\quad\quad\quad\quad\quad\quad\quad\quad<br>= A(k)-W_N^{k}B(k)\quad  ,k=0,1,…,\frac N2-1<br>$$<br>$\qquad$此处的$A(k+\frac N2)$可以理解为偶数项的下一个周期，所以此处可以直接看为$A(k)$。<br>所以用$A(k)、B(k)$可以完整的表示$X(k)$,当N=4时，$A(k)、B(k)$以及$X(k)$的关系如下所示：<br><img src="https://img-blog.csdnimg.cn/20191013184409530.png#pic_center" alt="在这里插入图片描述"><br>$\qquad$这里我只展示了当N=4的时候，当N=8的时候，则我们需要继续将$A(k)$分为偶数项$C(k)$与奇数项$D(k)$之和，将$B(k)$分为偶数项$E(k)$与奇数项$F(k)$之和,其$k$值取值范围为$k=0,1,…,\frac N4-1$。<br>$\qquad$若N=16，或者更高的幂，可以按照这样的方法继续分下去，直到分到两点的DFT为止。<br>介绍到这里，相信大家都已经很明白了，该算法是将时间$n$按照奇、偶分开，所以被称为<strong>时间抽取算法</strong>。</p>
<h1 id="3-FFT算法的一般规律"><a href="#3-FFT算法的一般规律" class="headerlink" title="3.FFT算法的一般规律"></a>3.FFT算法的一般规律</h1><p>$\qquad$我们知道，对于进行FFT快速傅里叶变换，找到W因子的周期性以及对称性是非常关键的。比如当N=4的时候，$x(0)、x(1)、x(2)、x(3)$的排列顺序为$x(0)、x(2)、x(1)、x(3)$。如果这个顺序让我们自己取记忆的话，如果当N值小的时候或许还可以记住，但是如果当N大的时候，这样单纯记忆就显得不切实际。为此，我们能否找到它的排列规律显得尤为重要，以下我将分别以N=4和N=8来介绍这一方法：<br>当N=4时其表格如下：<br>$n$     | $x(n)$|$X(k)$|$k$<br>——– | —–|——–|——-<br>0| 00|000|0<br>2| 10|001|1<br>1 | 01|010|2<br>3| 11|011|3<br>当N=8时其表格如下：<br>$n$     | $x(n)$|$X(k)$|$k$<br>——– | —–|——–|——-<br>0| 000|000|0<br>4| 100|001|1<br>2 | 010|010|2<br>6| 110|011|3<br>1| 001|100|4<br>5 | 101|101|5<br>3| 011|110|6<br>7| 111|111|7</p>
<p>仔细观看的话，我们或许会<strong>发现$x(n)$的取值顺序也是按照二进制加法，但是这个加法是在左侧加</strong>,而$X(k)$则是在右侧加。也就是说是$X(k)$的对称。有了这个规律，那么不管$N=2^M$的值取多大，我们都可以快速的排列出其顺序，这对于加快运算速度是有很大帮助的。</p>
<p>因为$M=log_2N$所以将N点DFT可以分成M级，当N等于8时，M=3,从左到右可以分为$m=0,m=1,m=2$三级。接下来我将展示8点DFT时间抽取算法的信号流图：<br><img src="https://img-blog.csdnimg.cn/20191015110834328.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>这里我们或许就会看到如下现象：</p>
<blockquote>
<p>在每一个向上连接的线的下边都要乘一个$W^r$因子，<br>每一个向下连接的线的搭档都需要乘-1。</p>
</blockquote>
<p>下面我将会来介绍一下$W^r$因子的分布情况:<br>$m$ 值（第几级）     | 对应的$W^r$因子分布<br>——– | —–<br>$m=0$ 级  | $W_2^r,r=0$<br>$m=1$ 级 | $W_4^r,r=0,1$<br>$m=2$ 级  | $W_8^r,r=0,1,2,3$<br>….  | …<br>$m=M-1$ 级  | $W_N^r,r=0,1,…,\frac N2-1$</p>
<p>如果你仔细看我的流图的话或许会发现，我在m=1的时候，使用了因子$W_8^0，W_8^2$,在这里我使用这个因子只是为了方便和后边的比较，其实这个还是有一个代换公式的：<br>$$<br>W_8^0=W_4^0，W_8^2=W_4^1<br>$$</p>
<h1 id="4-后续"><a href="#4-后续" class="headerlink" title="4.后续"></a>4.后续</h1><p>该部分留作后边对于FFT的更加深入的理解。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kingback2019.github.io/2019/11/19/MFCC%E7%AE%97%E6%B3%95%E8%AE%B2%E8%A7%A3%E5%8F%8A%E5%AE%9E%E7%8E%B0%EF%BC%88matlab%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王延凯的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/19/MFCC%E7%AE%97%E6%B3%95%E8%AE%B2%E8%A7%A3%E5%8F%8A%E5%AE%9E%E7%8E%B0%EF%BC%88matlab%EF%BC%89/" itemprop="url">MFCC算法讲解及实现（matlab）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-19T09:00:57+08:00">
                2019-11-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>@<a href="史上最详细的MFCC算法实现（附测试数据）">TOC</a></p>
<h1 id="1-matlab安装voicebox语音包"><a href="#1-matlab安装voicebox语音包" class="headerlink" title="1.matlab安装voicebox语音包"></a>1.matlab安装voicebox语音包</h1><p>这里该包的安装我直接附上我们师姐写过的一篇文章，里边的介绍很详细：<br><a href="https://blog.csdn.net/qq_39516859/article/details/80264381" target="_blank" rel="noopener">戳这里！！！跳转到文章链接地址</a></p>
<h1 id="2-MFCC原理讲解"><a href="#2-MFCC原理讲解" class="headerlink" title="2.MFCC原理讲解"></a>2.MFCC原理讲解</h1><p>整个MFCC过程大致可以分为以下几步：</p>
<blockquote>
<p>1.音频文件读取（最好是.wav文件）<br>2.预先加重<br>3.分帧<br>4.加窗<br>5.傅里叶变换（当是2的N次方时，可以使用FFT快速傅里叶变换）<br>6.梅尔滤波器组<br>7.离散余弦变换DCT<br><img src="https://img-blog.csdnimg.cn/20191023202550583.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<h1 id="3-MFCC算法设计实现（matlab）"><a href="#3-MFCC算法设计实现（matlab）" class="headerlink" title="3.MFCC算法设计实现（matlab）"></a>3.MFCC算法设计实现（matlab）</h1><h2 id="3-1-wav格式语音文件提取【x-200000-1-】"><a href="#3-1-wav格式语音文件提取【x-200000-1-】" class="headerlink" title="3.1 .wav格式语音文件提取【x(200000*1)】"></a>3.1 .wav格式语音文件提取【x(200000*1)】</h2><p>$\qquad$在matlab中,使用函数audioread函数来读取本地wav文件，这里要注意的是，采样频率一般为8000Hz和16000Hz，采样频率需要大于真实信号最大频率的2倍，才不会导致频谱混叠。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">clc;</span><br><span class="line"><span class="built_in">clear</span>;</span><br><span class="line">[x,fs]=audioread('diguashao.wav');%读取wav文件</span><br></pre></td></tr></table></figure>
<p>这里我们用于测试的数据的采样频率 $f_s$ 44100,这个是由 audioread函数默认决定的。</p>
<h2 id="3-2-预加重【x-200000-1-】"><a href="#3-2-预加重【x-200000-1-】" class="headerlink" title="3.2 预加重【x(200000*1)】"></a>3.2 预加重【x(200000*1)】</h2><p>$\qquad$为了避免在后边的FFT操作中出现数值问题，我们需要加强一下高频信息，因为一般高频能量比低频小。其预加重函数如下所示：<br>$$<br>y(n)=x(n)-\alpha \cdot x(n-1)<br>$$<br>其中$\alpha$一般取值为$0.97、0.95$</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">%预加重y=x(i)<span class="number">-0.97</span>*x(i<span class="number">-1</span>)</span><br><span class="line"><span class="keyword">for</span> i=<span class="number">2</span>:<span class="number">200000</span></span><br><span class="line">    x(i)=x(i)<span class="number">-0.97</span>*x(i<span class="number">-1</span>);</span><br><span class="line"><span class="built_in">end</span></span><br><span class="line">y=y<span class="number">'</span>;%对y取转置</span><br></pre></td></tr></table></figure>
<p>然后我们再来对比一下原始文件和预加重后的数据差异<br><img src="https://img-blog.csdnimg.cn/20191023210005111.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>我们可以看到整个的数据其幅度范围是有所减小的，但是可以看得出来，高频部分的缩小倍数是小于低频部分的缩小倍数的。</p>
<h2 id="3-3-分帧-S-301-1103"><a href="#3-3-分帧-S-301-1103" class="headerlink" title="3.3 分帧{S(301*1103)}"></a>3.3 分帧{S(301*1103)}</h2><p>$\qquad$我们要对语音数据做傅里叶变换，将信息从时域转化为频域。但是如果对整段语音做FFT，就会损失时序信息。因此，我们假设在很短的一段时间t内的频率信息不变，对长度为t的帧做傅里叶变换，就能得到对语音数据的频域和时域信息的适当表达。例如我们这里的采样点数为200000个点，如果真的这样做的话，就很麻烦了，于是我们在语音分析中引入分帧的概念，将原始语音信号分成大小固定的N段语音信号，这里每一段语音信号都被称为一帧。<br>$\qquad$但是，如果我们这样分帧的话，帧与帧之间的连贯性就会变差，于是我们每一帧的前N个采样点数据与前一帧的后N个采样点数据一样。其原理图大致如下所示：<br><img src="https://img-blog.csdnimg.cn/20191023210933359.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>$\qquad$对于整个采样点数据可以分为多少帧以及帧与帧之间交叉的采样点个数N，不是随便分的，一般来说帧长设置为$25ms$,帧移设置为$10ms$,对于我这次的仿真，其帧数和帧长数值如下：<br>$$<br>\quad 帧数=f_s \cdot 0.025=44100 \cdot0.025=1103(帧)\ \quad \ \quad<br>帧移=f_s \cdot 0.001=44100 \cdot 0.001=441(采样点)<br>$$<br>$\qquad$在这里我们要调用matlab的enframe函数来进行分帧操作，要知道这个函数是包含在voicebox工具箱里边，首先确保其已经安装成功。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">S=enframe(x,<span class="number">1103</span>,<span class="number">662</span>);%分帧,对x进行分帧，</span><br><span class="line">%每帧长度为<span class="number">1103</span>个采样点，每帧之间非重叠部分为<span class="number">662</span>个采样点</span><br><span class="line">%<span class="number">1103</span>=<span class="number">44100</span>*<span class="number">0.025</span>,   <span class="number">441</span>=<span class="number">44100</span>*<span class="number">0.01</span>    <span class="number">662</span>=<span class="number">1103</span><span class="number">-441</span></span><br><span class="line">%根据计算，我们可以将<span class="number">108721</span>个数据根据公式<span class="number">662</span>*<span class="number">301</span>+<span class="number">1103</span>=<span class="number">200365</span></span><br><span class="line">%可以将其分为<span class="number">301</span>帧</span><br></pre></td></tr></table></figure>
<h2 id="3-4-加窗-C-301-1103"><a href="#3-4-加窗-C-301-1103" class="headerlink" title="3.4 加窗{C(301*1103)}"></a>3.4 加窗{C(301*1103)}</h2><p>$\qquad$将信号分帧后,我们将每一帧代入窗函数，窗外的值设定为0，其目的是消除各个帧两端可能会造成的信号不连续性（即谱泄露 spectral leakage）。常用的窗函数有方窗、汉明窗和汉宁窗等，根据窗函数的频域特性，常采用汉明窗（hamming window）。接下来我来讲解一下怎么加窗：我们需要做的就是为每一帧数据，也就是301帧数据都加入大小为1103的汉明窗。其汉明窗的表达公式如下所示：<br>$$<br>W(n)=(1-a)-a \cdot cos(2\cdot \pi \cdot n/N) \qquad 1 \leq n \leq N<br>$$<br>对于a的取值不同，将会产生不同的汉明窗，一般情况下，$a=0.46$</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">%尝试一下汉明窗a=<span class="number">0.46</span>,得到汉明窗W=(<span class="number">1</span>-a)-a*<span class="built_in">cos</span>(<span class="number">2</span>*pi*n/N)</span><br><span class="line">n=<span class="number">1</span>:<span class="number">1103</span>;</span><br><span class="line">W=<span class="number">0.54</span><span class="number">-0.46</span>*<span class="built_in">cos</span>((<span class="number">2</span>*pi.*n)/<span class="number">1103</span>)</span><br><span class="line">plot(W);title('汉明窗');grid on;</span><br><span class="line">xlabel('取样点');ylabel('幅值')</span><br><span class="line">%创建汉明窗矩阵C</span><br><span class="line">C=zeros(<span class="number">301</span>,<span class="number">1103</span>);</span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>:<span class="number">301</span></span><br><span class="line">    C(i,:)=W;</span><br><span class="line"><span class="built_in">end</span></span><br></pre></td></tr></table></figure>
<p>$\qquad$由上边的公式我们可以得到汉明窗矩阵C,其大小为{301*<em>1103}，由于汉明窗矩阵和分帧后的矩阵S具有相同大小，所以在matlab中使这两个矩阵的对应位置相乘，即可得到加窗后的矩阵SC，其大小为{301</em>1103}。接下来我将随便选取一帧数据来展示一下汉明窗、原始数据、加窗后的数据。其matlab代码如下所示：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SC=S.*C;</span><br><span class="line">subplot(<span class="number">3</span>,<span class="number">1</span>,<span class="number">1</span>);plot(C(<span class="number">7</span>,:),<span class="string">'r'</span>);</span><br><span class="line">title('汉明窗图像');grid on;%画出第7帧的汉明窗图像</span><br><span class="line">subplot(<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>);plot(S(<span class="number">7</span>,:),<span class="string">'g'</span>);</span><br><span class="line">title('原始信号图像');grid on;%画出第7帧的原始信号图像</span><br><span class="line">subplot(<span class="number">3</span>,<span class="number">1</span>,<span class="number">3</span>);plot(SC(<span class="number">7</span>,:),<span class="string">'m'</span>);</span><br><span class="line">title('加了汉明窗的信号图像');grid on;%画出第7帧加了汉明窗的信号图像</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20191023215739555.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>$\qquad$在上边的图示中我们就可以看到，在每一帧的低频部分和高频部分都被汉明窗相乘后起了较大抑制作用，使其结果接近于0。</p>
<h2 id="3-5-傅里叶变换"><a href="#3-5-傅里叶变换" class="headerlink" title="3.5 傅里叶变换"></a>3.5 傅里叶变换</h2><p>$\qquad$对于加窗后的矩阵SC,它是一个301<em>1103的矩阵，也就是说，它有301帧数据，且每一帧数据都有1103个采样点，那么我们接下来就要对这301帧的每一帧都要进行N=4096的FFT快速傅里叶变换,得到一个大小为301*</em>4096大小的矩阵D,其帧数还是301帧，对每一帧的4096个数据点分别取模再取平方，然后除以4096；便得到能量谱密度E,其大小为301x4096,然后再对每一帧得到的能量进行相加，即得到一个301x1的矩阵F,其中的每个元素代表每一帧能量的总和。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">%对SC的每一帧都进行N=<span class="number">4096</span>的快速傅里叶变换,得到一个<span class="number">301</span>*<span class="number">4096</span>的矩阵</span><br><span class="line">F=<span class="number">0</span>;N=<span class="number">4096</span>;</span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>:<span class="number">301</span></span><br><span class="line">    %对SC作N=<span class="number">4096</span>的FFT变换</span><br><span class="line">    D(i,:)=fft(SC(i,:),N);</span><br><span class="line">    %以下循环实现求取能量谱密度E</span><br><span class="line">    <span class="keyword">for</span> j=<span class="number">1</span>:N</span><br><span class="line">        t=<span class="built_in">abs</span>(D(i,j));</span><br><span class="line">        E(i,j)=(t^<span class="number">2</span>)/N;</span><br><span class="line">    <span class="built_in">end</span></span><br><span class="line">    %获取每一帧的能量总和F(i)</span><br><span class="line">    F(i)=sum(D(i,:));</span><br><span class="line"><span class="built_in">end</span></span><br></pre></td></tr></table></figure>
<h2 id="3-6-梅尔滤波器"><a href="#3-6-梅尔滤波器" class="headerlink" title="3.6 梅尔滤波器"></a>3.6 梅尔滤波器</h2><p>$\qquad$首先我要讲一下什么是梅尔值，这是一个新的量度，相比于正常的频率机制，梅尔值更加接近于人耳的听觉机制，其在低频范围内增长速度很快，但在高频范围内，梅尔值的增长速度很慢。每一个频率值都对应着一个梅尔值，其对应关系如下<br>$$<br>m=2595 \cdot log_{10}(1+\frac{f}{700})<br>$$<br>在matlab上画出其对应图像如下所示：<br><img src="https://img-blog.csdnimg.cn/2019102323241024.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>对于该函数图像的显示的matlab代码如下所示:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">%梅尔频率转化函数图像</span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>:<span class="number">200000</span></span><br><span class="line">    mel(i)=<span class="number">2595</span>*<span class="built_in">log10</span>(<span class="number">1</span>+i/<span class="number">700</span>);</span><br><span class="line"><span class="built_in">end</span></span><br><span class="line">set(gcf,'position',[180,160,960,550]);%设置画图的大小</span><br><span class="line">plot(mel,'linewidth',1.5);grid on;</span><br><span class="line">title('梅尔频率转换');xlabel('频率');ylabel('梅尔频率');</span><br></pre></td></tr></table></figure>
<p>但是如果我们要将梅尔频率m转换为频率f呢，我们对上式整理即可得到：<br>$$<br>f=700 \cdot (10^{m/2595}-1)<br>$$<br>$\qquad$好了介绍到这里，对于如何得到梅尔滤波器组我们还是无从下手，于是，我在这里描述了一下获得梅尔滤波器的几个简单步骤。然后接下来的操作我们也就将会按照这个步骤来实现。</p>
<p><img src="https://img-blog.csdnimg.cn/20191024013055206.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>其中过程1、2、3、4的实现代码如下所示：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fl=<span class="number">0</span>;fh=fs/<span class="number">2</span>;%定义频率范围，低频和高频</span><br><span class="line">bl=<span class="number">2595</span>*<span class="built_in">log10</span>(<span class="number">1</span>+fl/<span class="number">700</span>);%得到梅尔刻度的最小值</span><br><span class="line">bh=<span class="number">2595</span>*<span class="built_in">log10</span>(<span class="number">1</span>+fh/<span class="number">700</span>);%得到梅尔刻度的最大值</span><br><span class="line">%梅尔坐标范围</span><br><span class="line">p=<span class="number">26</span>;%滤波器个数</span><br><span class="line">B=bh-bl;%梅尔刻度长度</span><br><span class="line">mm=linspace(<span class="number">0</span>,B,p+<span class="number">2</span>);%规划<span class="number">28</span>个不同的梅尔刻度</span><br><span class="line">fm=<span class="number">700</span>*(<span class="number">10.</span>^(mm/<span class="number">2595</span>)<span class="number">-1</span>);%将Mel频率转换为频率</span><br></pre></td></tr></table></figure>
<p>上边几步都比较好理解，但是对于接下来谱线索引号k的定义，或许就需要一些理解了，其定义公式如下所示：<br>$$<br>k=\frac{(1+N)\cdot f_m}{f_s}<br>$$<br>$\qquad$其中$N$为FFT点数，$f_s$为抽样频率，$f_m$为之前那28个梅尔刻度转化为频率后的值，最后我们得到的$k$值为一个1*28的矩阵。且k值范围为$0-N/2$。这个式子是把频率对应到频谱中2048个频率分量的某个。<br>以下则是k值得求解过程：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">k=((N+<span class="number">1</span>)*fm)/fs%计算<span class="number">28</span>个不同的k值</span><br><span class="line">hm=zeros(<span class="number">26</span>,N);%创建hm矩阵</span><br><span class="line">df=fs/N;</span><br><span class="line">freq=(<span class="number">0</span>:N<span class="number">-1</span>)*df;%采样频率值</span><br></pre></td></tr></table></figure>
<p>好了，现在我们只剩下最后一步了，创建Hm矩阵，这个矩阵得定义如下所示：<br>$$<br>H_m(k)=\begin{cases}<br>0&amp; \text{k}&lt;f(m-1)\<br>\frac{2(k-f(m-1))}{(f(m+1)-f(m-1))(f(m)-f(m-1))}&amp; f(m-1)\le k \le f(m)\<br>\frac{2(f(m+1)-k)}{(f(m+1)-f(m-1))(f(m)-f(m-1))}&amp; f(m)\le k \le f(m+1)\<br>0&amp; k\ge f(m+1)<br>\end{cases}<br>$$<br>$\qquad$上式中的m代表第几个滤波器，k为横坐标0-2048。26个滤波器就是算2049个频率分量分别属于26个频率带的概率.根据上式计算26个滤波器的二维数组，也就是26*4096二维数组Hm.<br>以下贴出步骤6  Hm矩阵的求解</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i=<span class="number">2</span>:<span class="number">27</span></span><br><span class="line">    %取整，这里取得是<span class="number">28</span>个k中的第<span class="number">2</span><span class="number">-27</span>个，舍弃<span class="number">0</span>和<span class="number">28</span></span><br><span class="line">    n0=<span class="built_in">floor</span>(k(i<span class="number">-1</span>));</span><br><span class="line">    n1=<span class="built_in">floor</span>(k(i));</span><br><span class="line">    n2=<span class="built_in">floor</span>(k(i+<span class="number">1</span>));</span><br><span class="line">    %要知道k(i)分别代表的是每个梅尔值在新的范围内的映射，其取值范围为：<span class="number">0</span>-N/<span class="number">2</span></span><br><span class="line">    %以下实现公式--，求取三角滤波器的频率响应。</span><br><span class="line">   <span class="keyword">for</span> j=<span class="number">1</span>:N</span><br><span class="line">       <span class="keyword">if</span> n0&lt;=j &amp; j&lt;=n1</span><br><span class="line">           hm(i<span class="number">-1</span>,j)=<span class="number">2</span>*(j-n0)/((n2-n0)*(n1-n0));</span><br><span class="line">       elseif n1&lt;=j &amp; j&lt;=n2</span><br><span class="line">           hm(i<span class="number">-1</span>,j)=<span class="number">2</span>*(n2-j)/((n2-n0)*(n1-n0));</span><br><span class="line">       <span class="built_in">end</span></span><br><span class="line">   <span class="built_in">end</span></span><br><span class="line">   %此处求取H1(k)结束。</span><br><span class="line"><span class="built_in">end</span></span><br></pre></td></tr></table></figure>
<p>接下来将要进行最后一步，输出Hm矩阵，并且将梅尔滤波器组画出来。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">%绘图,且每条颜色显示不一样</span><br><span class="line">c=colormap(lines(<span class="number">26</span>));%定义<span class="number">26</span>条不同颜色的线条</span><br><span class="line">set(gcf,'position',[180,160,1020,550]);%设置画图的大小</span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>:<span class="number">26</span></span><br><span class="line">    plot(freq,hm(i,:),'--','color',c(i,:),'linewidth',2.5);%开始循环绘制每个梅尔滤波器</span><br><span class="line">    hold on</span><br><span class="line"><span class="built_in">end</span></span><br><span class="line"> grid on;%显示方格</span><br><span class="line"> axis([<span class="number">0</span> <span class="number">1500</span> <span class="number">0</span> <span class="number">0.2</span>]);%设置显示范围</span><br></pre></td></tr></table></figure>
<p>$\qquad$画出来之后，我们就会发现该梅尔滤波器，在频率很小的时候，滤波器宽度很窄，随着其频率的增大，滤波器的宽度也会逐渐增大，但其幅值也会逐渐减小。<br><img src="https://img-blog.csdnimg.cn/20191023222025495.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="3-7-离散余弦变换"><a href="#3-7-离散余弦变换" class="headerlink" title="3.7 离散余弦变换"></a>3.7 离散余弦变换</h2><p>$\qquad$在进行离散余弦变换之前，我们还需要做的就是把第3.5节得到的二维矩阵能量谱E(301<em>4096)，乘以第3.6节得到的二维数组梅尔滤波器Hm(26</em>4096)的转置，矩阵的转置可得到301*26的矩阵，然后满足矩阵乘法定律，得到参数H,其定义如下：<br>$$<br>H=E \cdot H_m^T<br>$$<br>此处的H其实是301x26的二维矩阵。<br>$\qquad$由于滤波器组得到的系数是相关性很高的，因此我们用离散余弦变换（Discrete Cosine Transform）来去相关并且降维。一般来说，在自动语音识别（Automatic Speech Recognition）领域，因为大部分信号数据一般集中在变换后的低频区，所以对每一帧只取前13个数据就好了。<br>好了接下来我们就要进行离散余弦变换了，但是在开始之前我感觉还是先讲解一下其具体的步骤流程吧。<br><img src="https://img-blog.csdnimg.cn/20191024111800887.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>根据mfcc的定义，我们需要对能量的对数作离散余弦变换，即可得到MFCC参数：<br>$$<br>mfcc(i,n)=\sum_{m=1}^{M}log[H(i,m)] \cdot cos[\frac{\pi \cdot n \cdot(2m-1)}{2M}]<br>$$<br>$\qquad$其中H为我们上边得到的矩阵H,M代表梅尔滤波器个数，i代表第几帧数据（取值为1-301），n代表第i帧的第n列(n取值范围为1-26)。那么根据上述公式我们可以写出求取mfcc的代码如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">%对H作自然对数运算</span><br><span class="line"> %因为人耳听到的声音与信号本身的大小是幂次方关系，所以要求个对数</span><br><span class="line"> <span class="keyword">for</span> i=<span class="number">1</span>:<span class="number">301</span></span><br><span class="line">     <span class="keyword">for</span> j=<span class="number">1</span>:<span class="number">26</span></span><br><span class="line">         H(i,j)=<span class="built_in">log</span>(H(i,j));%取对数运算</span><br><span class="line">     <span class="built_in">end</span></span><br><span class="line"> <span class="built_in">end</span></span><br><span class="line"> %作离散余弦变换   </span><br><span class="line"> <span class="keyword">for</span> i=<span class="number">1</span>:<span class="number">301</span></span><br><span class="line">     <span class="keyword">for</span> j=<span class="number">1</span>:<span class="number">26</span></span><br><span class="line">         %先求取每一帧的能量总和</span><br><span class="line">         sum=<span class="number">0</span>;</span><br><span class="line">         %作离散余弦变换</span><br><span class="line">         <span class="keyword">for</span> p=<span class="number">1</span>:<span class="number">26</span></span><br><span class="line">             sum=sum+H(i,p)*<span class="built_in">cos</span>((pi*j)*(<span class="number">2</span>*p<span class="number">-1</span>)/(<span class="number">2</span>*<span class="number">26</span>));</span><br><span class="line">         <span class="built_in">end</span></span><br><span class="line">         mfcc(i,j)=((<span class="number">2</span>/<span class="number">26</span>)^<span class="number">0.5</span>)*sum;  </span><br><span class="line">         %完成离散余弦变换</span><br><span class="line">     <span class="built_in">end</span>    </span><br><span class="line"> <span class="built_in">end</span></span><br></pre></td></tr></table></figure>
<p>$\qquad$接下来我们就要根据公式进行升倒谱的计算了，前边我们已经讲到了，因为大部分的信号数据一般集中在变换后的低频区，所以对每一帧只取前13个数据就好了。其公式表达如下：<br>$$<br>K(i)=1+(\frac{L}{2})\cdot sin(\frac{\pi \cdot i}{L}) \qquad i=1,2,3…,13<br>$$<br>$\qquad$其中L为升倒谱系数，一般取值为22，我们将其带入即可求得矩阵K,这是一个1x13大小的矩阵，这一部分的升倒谱的其实现代码如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">J=mfcc(:,(<span class="number">1</span>:<span class="number">13</span>));</span><br><span class="line">%默认升到普系数为<span class="number">22</span></span><br><span class="line"> <span class="keyword">for</span> i=<span class="number">1</span>:<span class="number">13</span></span><br><span class="line">     K(i)=<span class="number">1</span>+(<span class="number">22</span>/<span class="number">2</span>)*<span class="built_in">sin</span>(pi*i/<span class="number">22</span>);</span><br><span class="line"> <span class="built_in">end</span></span><br></pre></td></tr></table></figure>
<p>接下来我们就要求取MFCC的三个参数了，首先我们先获取mfcc的第一组数据，根据公式：<br>$$<br>feat(i,j)=J(i,j) \cdot K(j)\ \quad \ \quad i=1,2,3,…,301; \quad j=1,2,…,13<br>$$<br>根据公式我们可以实现如下代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">%得到二维数组feat,这是mfcc的第一组数据，默认为三组</span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>:<span class="number">301</span></span><br><span class="line">    <span class="keyword">for</span> j=<span class="number">1</span>:<span class="number">13</span></span><br><span class="line">        L(i,j)=J(i,j)*K(j);</span><br><span class="line">    <span class="built_in">end</span></span><br><span class="line"><span class="built_in">end</span></span><br><span class="line">feat=L;%将其值赋值到feat矩阵</span><br></pre></td></tr></table></figure>
<p>$\qquad$接下来就是求取MFCC的第二组，第三组参数了。第二组参数其实就是在已有的基础参数下作一阶微分操作，第三组参数在第二组参数下作一阶微分操作。那么表达公式事什么样的呢，别急，等我慢慢道来：<br>$$<br>dtfeat[i][j]=feat[i+1][j]-feat[i-1][j]+2\cdot feat[i+2][j]-2 \cdot feat[i-2][j] \ \quad \<br>i=1，2，3，…,301 \quad; \quad j=1,2,3…,13<br>$$<br>按照上边的公式，我们可以使用代码实现一阶求导和二阶求导的计算</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">%接下来求取第二组（一阶差分系数）<span class="number">301</span>x13 ，这也是mfcc参数的第二组参数</span><br><span class="line"> dtfeat=<span class="number">0</span>;</span><br><span class="line"> dtfeat=zeros(<span class="built_in">size</span>(L));%默认初始化</span><br><span class="line"> <span class="keyword">for</span> i=<span class="number">3</span>:<span class="number">299</span></span><br><span class="line">     dtfeat(i,:)=<span class="number">-2</span>*feat(i<span class="number">-2</span>,:)-feat(i<span class="number">-1</span>,:)+feat(i+<span class="number">1</span>,:)+<span class="number">2</span>*feat(i+<span class="number">2</span>,:); </span><br><span class="line"> <span class="built_in">end</span></span><br><span class="line"> dtfeat=dtfeat/<span class="number">10</span>;</span><br><span class="line">%求取二阶差分系数,mfcc参数的第三组参数</span><br><span class="line">%二阶差分系数就是对前面产生的一阶差分系数dtfeat再次进行操作。</span><br><span class="line"> dttfeat=<span class="number">0</span>;</span><br><span class="line"> dttfeat=zeros(<span class="built_in">size</span>(dtfeat));%默认初始化</span><br><span class="line"> <span class="keyword">for</span> i=<span class="number">3</span>:<span class="number">299</span></span><br><span class="line">     dttfeat(i,:)=<span class="number">-2</span>*dtfeat(i<span class="number">-2</span>,:)-dtfeat(i<span class="number">-1</span>,:)+dtfeat(i+<span class="number">1</span>,:)+<span class="number">2</span>*dtfeat(i+<span class="number">2</span>,:); </span><br><span class="line"> <span class="built_in">end</span></span><br><span class="line"> dttfeat=dttfeat/<span class="number">10</span>;</span><br><span class="line"> %这里的<span class="number">10</span>是根据数据确定的</span><br></pre></td></tr></table></figure>
<p>$\qquad$好了到这里我们就完成了，MFCC三组参数的求解，我们现在就只需要将这三组数据拼接到一起形成一个301x39的矩阵即可。其实现代码如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">%将得到的mfcc的三个参数feat、dtfeat、dttfeat拼接到一起</span><br><span class="line"> %得到最后的mfcc系数<span class="number">301</span>x39</span><br><span class="line"> mfcc_final=<span class="number">0</span>;</span><br><span class="line"> mfcc_final=[feat,dtfeat,dttfeat];%拼接完成</span><br></pre></td></tr></table></figure>
<p>$\qquad$前面导图中，我们也有讲到过，由于一阶求导和二阶求导的前两帧和后两帧数据都为0，于是我们就要对在mfcc_final中去除这四帧数据。而后我们再选取每一帧的mfcc系数的第一个数得到$MFCC_0$,这是一个297x1的数据，对$MFCC_0$来进行绘图，并与原始信号进行比对。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mfcc24=mfcc_final((<span class="number">3</span>:<span class="number">299</span>),:);</span><br><span class="line"> %以下画图对比一下原始信号和提取出来的mfcc0</span><br><span class="line"> set(gcf,'position',[180,160,960,550]);%设置画图的大小</span><br><span class="line"> subplot(<span class="number">211</span>)</span><br><span class="line"> plot(x,<span class="string">'m'</span>);grid on;</span><br><span class="line"> title('原始信号');</span><br><span class="line"> axis([<span class="number">0</span> <span class="number">200000</span> <span class="number">-1</span> <span class="number">1</span>]);%对数据，进行绘图</span><br><span class="line"> mfcc0=mfcc24(:,<span class="number">1</span>)%选取mfcc系数的第一个数，组成新的特征参数mfcc0</span><br><span class="line"> subplot(<span class="number">212</span>)</span><br><span class="line"> mfcc00=(mfcc0<span class="number">-80</span>)/<span class="number">2</span></span><br><span class="line"> plot(mfcc00,'r','linewidth',2);</span><br><span class="line"> title('MFCC_0');</span><br><span class="line"> axis([<span class="number">0</span> <span class="number">300</span> <span class="number">-30</span> <span class="number">5</span>]);grid  on</span><br></pre></td></tr></table></figure>
<p>比对结果如下所示：<br><img src="https://img-blog.csdnimg.cn/20191024122025344.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>$\qquad$好了，到了这里我们就可以看到了，原始信号之前是20000个采样点的数据，而现在的$MFCC_0$参数图形大致与原始信号一致，并且其点数只有297个点，这也就说明通过此方法$MFCC_0$，我们可以提取出语音信号的特点以及走向趋势，也就是说在某个程度上我们可以用这297个点来代替$2 \cdot 10^5$点的数据。</p>
<h1 id="4-总结"><a href="#4-总结" class="headerlink" title="4.总结"></a>4.总结</h1><p>本次训练是在参考了很多资料的前提下完成的，为了防止自己忘记，所以特此写了本篇文章。</p>
<h1 id="5-参考文献-资料"><a href="#5-参考文献-资料" class="headerlink" title="5.参考文献,资料"></a>5.参考文献,资料</h1><blockquote>
<p>1.<a href="http://d.old.wanfangdata.com.cn/Periodical/bjyddx201902014" target="_blank" rel="noopener">基于谱熵梅尔积的语音端点检测方法</a><br>2.<a href="https://blog.csdn.net/manmanxiaowugun/article/details/84780706" target="_blank" rel="noopener">语音识别MFCC</a><br>3.<a href="https://blog.csdn.net/jojozhangju/article/details/18678861" target="_blank" rel="noopener">语音特征参数MFCC提取过程详解</a><br>4.<a href="https://blog.csdn.net/qq_39516859/article/details/80815369" target="_blank" rel="noopener">Mel滤波器组的设计与实现（基于MATLAB和Python）</a></p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kingback2019.github.io/2019/11/18/%E6%91%86%E8%84%B1%E9%99%90%E5%88%B6%E5%9B%9B%E6%AD%A5%E8%B5%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王延凯的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/18/%E6%91%86%E8%84%B1%E9%99%90%E5%88%B6%E5%9B%9B%E6%AD%A5%E8%B5%B0/" itemprop="url">摆脱限制四步走</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-18T21:16:52+08:00">
                2019-11-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>@<a href="解除限制">TOC</a></p>
<h1 id="1-摆脱某雷，从此工作人员站起来了"><a href="#1-摆脱某雷，从此工作人员站起来了" class="headerlink" title="1.摆脱某雷，从此工作人员站起来了"></a>1.摆脱某雷，从此工作人员站起来了</h1><p>使用chrome插件IDM <a href="http://www.internetdownloadmanager.com/download.html" target="_blank" rel="noopener">点击此处进入下载</a>，然后再点击下载即可。<br><img src="https://img-blog.csdnimg.cn/20191007212030413.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>下载之后，直接点击安装即可，这个软件最好还是直接按照它的提示安装到C盘,否则则会在运行的时候报错。<br>之后关闭浏览器，再次打开浏览器即可添加成功。之后在每打开一个视频的时候，都会自动出现这个下载图标。如下所示：<img src="https://img-blog.csdnimg.cn/20191007214414368.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>点击图标，就会出现让你选择要下载的视频分辨率：<br><img src="https://img-blog.csdnimg.cn/20191007214618724.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>可以看到速度还是很快的：<br><img src="https://img-blog.csdnimg.cn/20191007221515885.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h1 id="2-摆脱某盘，从此开发人员富起来了"><a href="#2-摆脱某盘，从此开发人员富起来了" class="headerlink" title="2.摆脱某盘，从此开发人员富起来了"></a>2.摆脱某盘，从此开发人员富起来了</h1><p>接下来要介绍的一个就是大名鼎鼎的<strong>pandownload</strong>了，<a href="http://pandownload.com/" target="_blank" rel="noopener">其下载链接</a>，这个版本已经包括了手机、电脑各个版本，已经非常顺手了。<br>该软件实现了多账号登陆以及无限速，甚至内部还集成了16路的内部加速器。总之体验感超棒。<br>接下来就要介绍一下其使用流程了：在使用过程中如果下载的文件为现在以登录账号的，则就需要注意：<br><strong>先把文件分享出来，再使用分享链接下载即可</strong>，<br><strong>先把文件分享出来，再使用分享链接下载即可</strong>，<br><strong>先把文件分享出来，再使用分享链接下载即可</strong>。<br>重要的事情说三遍。<br>然后你就可以尽情享受了。<br><img src="https://img-blog.csdnimg.cn/20191007215625509.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>以下附上演示：<br><img src="https://img-blog.csdnimg.cn/20191007215901630.gif#pic_center" alt="在这里插入图片描述"></p>
<h1 id="3-从此开发人员strong起来了"><a href="#3-从此开发人员strong起来了" class="headerlink" title="3.从此开发人员strong起来了"></a>3.从此开发人员strong起来了</h1><p>些许内容不便透露，有需要的可以私信我。看到必回。(希望理解)。</p>
<h1 id="4-云盘精灵（网盘文件搜索）–飞起来了"><a href="#4-云盘精灵（网盘文件搜索）–飞起来了" class="headerlink" title="4.云盘精灵（网盘文件搜索）–飞起来了"></a>4.云盘精灵（网盘文件搜索）–飞起来了</h1><p>其官方网址：<a href="https://www.yunpanjingling.com/" target="_blank" rel="noopener">点击链入</a><br>操作很简单，注册个账号，然后在里边输入需要的文件即可。<br><img src="https://img-blog.csdnimg.cn/20191007220705173.gif#pic_center" alt="在这里插入图片描述"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">&lt;i class=&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%20%7C%7C%20archive">
              
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder"></span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
