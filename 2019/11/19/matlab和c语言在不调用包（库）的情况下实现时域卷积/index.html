<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>matlab和c语言在不调用包（库）的情况下实现时域卷积 | 王延凯的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="@TOC 1.实验要求，matlab实现卷积运算（不调用函数和方法）1.1 卷积原理讲解$$y[n]=\sum_{k=-\infty}^{\infty}{x[k]h[n-k]}=x[n]h[n]\s(t)=f_1(t)f_2(t)=\int_{-\infty}^tf_1(\tau)f_1(t-\tau)d\tau$$$\qquad$上述两式分别为离散卷积运算和连续卷积运算。实际上我们的电脑要进行卷">
<meta property="og:type" content="article">
<meta property="og:title" content="matlab和c语言在不调用包（库）的情况下实现时域卷积">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;2019&#x2F;11&#x2F;19&#x2F;matlab%E5%92%8Cc%E8%AF%AD%E8%A8%80%E5%9C%A8%E4%B8%8D%E8%B0%83%E7%94%A8%E5%8C%85%EF%BC%88%E5%BA%93%EF%BC%89%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E5%AE%9E%E7%8E%B0%E6%97%B6%E5%9F%9F%E5%8D%B7%E7%A7%AF&#x2F;index.html">
<meta property="og:site_name" content="王延凯的博客">
<meta property="og:description" content="@TOC 1.实验要求，matlab实现卷积运算（不调用函数和方法）1.1 卷积原理讲解$$y[n]=\sum_{k=-\infty}^{\infty}{x[k]h[n-k]}=x[n]h[n]\s(t)=f_1(t)f_2(t)=\int_{-\infty}^tf_1(\tau)f_1(t-\tau)d\tau$$$\qquad$上述两式分别为离散卷积运算和连续卷积运算。实际上我们的电脑要进行卷">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190928213950692.jpg?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190928233201406.jpg?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190929011035913.gif#pic_center">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;2019092901182480.gif#pic_center">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190929162713558.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190929200938158.gif#pic_center">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190929201444175.gif#pic_center">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;2019092920172674.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_50#pic_center">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190929202045488.jpg?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_50#pic_center">
<meta property="og:updated_time" content="2019-11-19T01:04:34.847Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190928213950692.jpg?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center">
  
    <link rel="alternate" href="/atom.xml" title="王延凯的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">王延凯的博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-matlab和c语言在不调用包（库）的情况下实现时域卷积" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/11/19/matlab%E5%92%8Cc%E8%AF%AD%E8%A8%80%E5%9C%A8%E4%B8%8D%E8%B0%83%E7%94%A8%E5%8C%85%EF%BC%88%E5%BA%93%EF%BC%89%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E5%AE%9E%E7%8E%B0%E6%97%B6%E5%9F%9F%E5%8D%B7%E7%A7%AF/" class="article-date">
  <time datetime="2019-11-19T01:04:27.463Z" itemprop="datePublished">2019-11-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      matlab和c语言在不调用包（库）的情况下实现时域卷积
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>@<a href="matlab不调用conv函数实现卷积运算并用C语言进行卷积计算">TOC</a></p>
<h1 id="1-实验要求，matlab实现卷积运算（不调用函数和方法）"><a href="#1-实验要求，matlab实现卷积运算（不调用函数和方法）" class="headerlink" title="1.实验要求，matlab实现卷积运算（不调用函数和方法）"></a>1.实验要求，matlab实现卷积运算（不调用函数和方法）</h1><h2 id="1-1-卷积原理讲解"><a href="#1-1-卷积原理讲解" class="headerlink" title="1.1 卷积原理讲解"></a>1.1 卷积原理讲解</h2><p>$$<br>y[n]=\sum_{k=-\infty}^{\infty}{x[k]h[n-k]}=x[n]<em>h[n]\s(t)=f_1(t)</em>f_2(t)=\int_{-\infty}^tf_1(\tau)f_1(t-\tau)d\tau<br>$$<br>$\qquad$上述两式分别为离散卷积运算和连续卷积运算。实际上我们的电脑要进行卷积运算就是将连续的函数离散化，再来进行离散的卷积计算。</p>
<h2 id="1-2-卷积计算步骤（图解法）"><a href="#1-2-卷积计算步骤（图解法）" class="headerlink" title="1.2 卷积计算步骤（图解法）"></a>1.2 卷积计算步骤（图解法）</h2><blockquote>
<p><strong>1.翻折</strong>  先在坐标轴上画出$x(m)$和$h(m)$,将$h(m)$以纵坐标为坐标轴折叠成$h(-m)$。<br><strong>2.移位</strong> 将$h(-m)$移位$n$,得到$h(n-m)$[或将$f_1(-\tau)$移位$t$,得到$f_1(t-\tau)$],当n或t为正数时右移n或t,当n或t为负数时左移n或t。<br><strong>3.相乘</strong> 将$h(n-m)$[或$f_1(t-\tau)$]与$x(m)$[或$f_1(\tau)$]的对应序列值[(数值)]对应相乘<br><strong>4.相加</strong> 将所有的乘机累加[(积分)]起来，就得到了$y(n)$[或$s(t)$]</p>
</blockquote>
<h2 id="1-3-matlab画出两个窗函数"><a href="#1-3-matlab画出两个窗函数" class="headerlink" title="1.3 matlab画出两个窗函数"></a>1.3 matlab画出两个窗函数</h2><p>$\qquad$以下列出的是产生两个门函数的matlab代码，式中主要运用了matlab的<strong>f=@(x)</strong> 函数句柄 ，它主要是包含了函数的路径、函数名、类型以及可能存在的重载方法。函数句柄必须通过专门的定义创建的,而一般的图像的句柄是自动建立的。使用该形式的函数的方法相比于.m函数文件的优点就是，因为在计算机开始执行运算的时候是需要在整个的matlab代码中去寻找是否存在该.m文件，我们也知道，matlab整个的文件数量是非常多的，所以直接调用.m文件是会耗费一些时间的，而如果我们直接采用 <strong>@</strong> 的方式则会节省一部分时间。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">clc</span><br><span class="line"><span class="built_in">clear</span></span><br><span class="line">%定义函数，该函数主要实现任意形式的门函数</span><br><span class="line">high_1=<span class="number">1</span>;</span><br><span class="line">left_1=<span class="number">0</span>;</span><br><span class="line">right_1=<span class="number">1</span>;</span><br><span class="line">%定义要产生的窗函数的左右区间范围以及高度</span><br><span class="line">f_1=@(x) (high_1)*(x&gt;=left_1 &amp; x&lt;right_1);%<span class="number">0</span><span class="number">-1</span>的阶跃 高<span class="number">1</span></span><br><span class="line">f_2=@(x) (high_1+<span class="number">0.5</span>)*(x&gt;=left_1+<span class="number">2</span> &amp; x&lt;right_1+<span class="number">2</span>);%<span class="number">0</span><span class="number">-1</span>的阶跃 高<span class="number">1.5</span></span><br><span class="line">x=<span class="number">-4</span>:<span class="number">0.0006</span>:<span class="number">4</span>;</span><br><span class="line">y_1=f_1(x);%得到对应的窗函数的y轴数据</span><br><span class="line">y_2=f_2(x);</span><br><span class="line">%开始画第一个图</span><br><span class="line">figure(<span class="number">1</span>)</span><br><span class="line">hold on</span><br><span class="line">plot(x,y_1,'b','LineWidth',2.5);</span><br><span class="line">%加载x(t)图像</span><br><span class="line">grid on;</span><br><span class="line">axis([<span class="number">-1</span> <span class="number">5</span> <span class="number">0</span> <span class="number">2</span>])%确定画图范围</span><br><span class="line">plot(x,y_2,'r','linewidth',2.5);</span><br><span class="line">%加载y(t)图像</span><br><span class="line">%以下是坐标轴设置</span><br><span class="line">xlabel('s/t')</span><br><span class="line">ylabel('f(x)')</span><br><span class="line">title('需要卷积的两个窗函数的时域图像')</span><br><span class="line">legend('x(t)','h(t)');</span><br><span class="line">hold off;</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20190928213950692.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="1-4-对h-t-进行翻折得到"><a href="#1-4-对h-t-进行翻折得到" class="headerlink" title="1.4 对h(t)进行翻折得到"></a>1.4 对h(t)进行翻折得到</h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line">grid on;</span><br><span class="line">axis([<span class="number">-6</span> <span class="number">0</span> <span class="number">0</span> <span class="number">2</span>])<span class="comment">%确定画图范围</span></span><br><span class="line"><span class="built_in">plot</span>(-x,y_2,<span class="string">'r'</span>,<span class="string">'linewidth'</span>,<span class="number">2.5</span>);</span><br><span class="line"><span class="comment">%加载y(t)图像</span></span><br><span class="line"><span class="comment">%以下是坐标轴设置</span></span><br><span class="line">xlabel(<span class="string">'\tau'</span>)</span><br><span class="line">ylabel(<span class="string">'h(-\tau)'</span>)</span><br><span class="line">title(<span class="string">'对函数h(\tau)翻折'</span>)</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">'h(-\tau)'</span>);</span><br><span class="line"><span class="built_in">hold</span> off;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190928233201406.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="1-5-对-h-tau-进行移位"><a href="#1-5-对-h-tau-进行移位" class="headerlink" title="1.5 对$h(-\tau)$进行移位"></a>1.5 对$h(-\tau)$进行移位</h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot</span>(x,y_1,<span class="string">'b'</span>,<span class="string">'LineWidth'</span>,<span class="number">2.5</span>);</span><br><span class="line"><span class="comment">%画出x(t)函数</span></span><br><span class="line">grid on;</span><br><span class="line">title(<span class="string">'h(-\tau)移位演示'</span>)</span><br><span class="line">xlabel(<span class="string">'\tau'</span>)</span><br><span class="line">ylabel(<span class="string">'h(-\tau)'</span>)</span><br><span class="line"><span class="comment">%完成坐标轴设置</span></span><br><span class="line"><span class="keyword">for</span> n=<span class="number">-1</span>:<span class="number">0.08</span>:<span class="number">5</span></span><br><span class="line">    <span class="comment">%开始画卷积conv(t)=x(t)*h(t)</span></span><br><span class="line">    <span class="comment">%step1 得到h(-x)</span></span><br><span class="line">    <span class="keyword">if</span> n~=<span class="number">-1</span></span><br><span class="line">        pause(<span class="number">0.0003</span>);<span class="comment">%暂停</span></span><br><span class="line">        delete(text1);       </span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    h=f_2(n-x);</span><br><span class="line">    plot_n=<span class="built_in">plot</span>(x,h,<span class="string">'--r'</span>,<span class="string">'linewidth'</span>,<span class="number">2.5</span>);</span><br><span class="line">    axis([<span class="number">-4</span> <span class="number">5</span> <span class="number">0</span> <span class="number">2</span>]);</span><br><span class="line">    <span class="comment">%设置坐标轴范围</span></span><br><span class="line">    grid on;</span><br><span class="line">    pause(<span class="number">0.001</span>);<span class="comment">%暂停</span></span><br><span class="line">    delete(plot_n);<span class="comment">%删除原曲线</span></span><br><span class="line">    text(<span class="number">0.5</span>,<span class="number">1.8</span>,<span class="string">'当前的n数值为：'</span>);</span><br><span class="line">    text1=text(<span class="number">3.5</span>,<span class="number">1.8</span>,num2str(n*<span class="number">1.0</span>),<span class="string">'color'</span>,<span class="string">'r'</span>); </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">hold</span> off</span><br><span class="line"><span class="comment">%停止接收数据</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190929011035913.gif#pic_center" alt="在这里插入图片描述"></p>
<h2 id="1-6-对两个函数进行累乘加，并绘制卷积图像"><a href="#1-6-对两个函数进行累乘加，并绘制卷积图像" class="headerlink" title="1.6 对两个函数进行累乘加，并绘制卷积图像"></a>1.6 对两个函数进行累乘加，并绘制卷积图像</h2><p>在这一部分，我将附上整个卷积运算的全部代码和其运行结果演示。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">clc</span><br><span class="line">clear</span><br><span class="line"><span class="comment">%定义函数，该函数主要实现任意形式的门函数</span></span><br><span class="line">high_1=<span class="number">1</span>;</span><br><span class="line">left_1=<span class="number">0</span>;</span><br><span class="line">right_1=<span class="number">1</span>;</span><br><span class="line"><span class="comment">%定义要产生的窗函数的左右区间范围以及高度</span></span><br><span class="line">f_1=@(x) (high_1)*(x&gt;=left_1 &amp; x&lt;right_1);<span class="comment">%0-1的阶跃 高1</span></span><br><span class="line">f_2=@(x) (high_1+<span class="number">0.5</span>)*(x&gt;=left_1+<span class="number">2</span> &amp; x&lt;right_1+<span class="number">2</span>);<span class="comment">%0-1的阶跃 高1.5</span></span><br><span class="line">x=<span class="number">-4</span>:<span class="number">0.0006</span>:<span class="number">4</span>;</span><br><span class="line">y_1=f_1(x);<span class="comment">%得到对应的窗函数的y轴数据</span></span><br><span class="line">y_2=f_2(x);</span><br><span class="line"><span class="comment">%开始画第一个图</span></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot</span>(x,y_1,<span class="string">'b'</span>,<span class="string">'LineWidth'</span>,<span class="number">2.5</span>);</span><br><span class="line"><span class="comment">%加载x(t)图像</span></span><br><span class="line">grid on;</span><br><span class="line">axis([<span class="number">-1</span> <span class="number">5</span> <span class="number">0</span> <span class="number">2</span>])<span class="comment">%确定画图范围</span></span><br><span class="line"><span class="built_in">plot</span>(x,y_2,<span class="string">'r'</span>,<span class="string">'linewidth'</span>,<span class="number">2.5</span>);</span><br><span class="line"><span class="comment">%加载y(t)图像</span></span><br><span class="line"><span class="comment">%以下是坐标轴设置</span></span><br><span class="line">xlabel(<span class="string">'s/t'</span>)</span><br><span class="line">ylabel(<span class="string">'f(x)'</span>)</span><br><span class="line">title(<span class="string">'需要卷积的两个窗函数的时域图像'</span>)</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">'x(t)'</span>,<span class="string">'h(t)'</span>);</span><br><span class="line"><span class="built_in">hold</span> off;</span><br><span class="line"><span class="comment">%画出第二个演示图像</span></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot</span>(x,y_1,<span class="string">'b'</span>,<span class="string">'LineWidth'</span>,<span class="number">2.5</span>);</span><br><span class="line"><span class="comment">%画出x(t)函数</span></span><br><span class="line">grid on;</span><br><span class="line">title(<span class="string">'卷积演示'</span>)</span><br><span class="line">xlabel(<span class="string">'时间\tau'</span>)</span><br><span class="line">ylabel(<span class="string">'s(\tau)'</span>)</span><br><span class="line"><span class="comment">%完成坐标轴设置</span></span><br><span class="line"><span class="keyword">for</span> n=<span class="number">-1</span>:<span class="number">0.04</span>:<span class="number">5</span></span><br><span class="line">    <span class="comment">%开始画卷积conv(t)=x(t)*h(t)</span></span><br><span class="line">    <span class="comment">%step1 得到h(-x)</span></span><br><span class="line">    h=f_2(n-x);</span><br><span class="line">    plot_n=<span class="built_in">plot</span>(x,h,<span class="string">'--r'</span>,<span class="string">'linewidth'</span>,<span class="number">2.5</span>);</span><br><span class="line">    axis([<span class="number">-4</span> <span class="number">5</span> <span class="number">0</span> <span class="number">2</span>]);</span><br><span class="line">    <span class="comment">%设置坐标轴范围</span></span><br><span class="line">    grid on;</span><br><span class="line">    pause(<span class="number">0.001</span>);<span class="comment">%暂停</span></span><br><span class="line">    delete(plot_n);<span class="comment">%删除原曲线</span></span><br><span class="line">    <span class="comment">%开始计算卷积</span></span><br><span class="line">    sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> tao=<span class="number">-2</span>:<span class="number">0.01</span>:<span class="number">5</span></span><br><span class="line">        sum=sum+<span class="number">0.01</span>*f_1(tao)*f_2(n-tao);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">%此处完成加和操作。</span></span><br><span class="line">    <span class="built_in">disp</span>(sum);</span><br><span class="line">    <span class="built_in">plot</span>(n,sum,<span class="string">'.k'</span>)</span><br><span class="line">    <span class="comment">%此次执行结束相当于完成了n=-1时的图像的卷积</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">hold</span> off</span><br><span class="line"><span class="comment">%停止接收数据</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/2019092901182480.gif#pic_center" alt="在这里插入图片描述"></p>
<h1 id="2-实验要求，使用c语言画出该图像"><a href="#2-实验要求，使用c语言画出该图像" class="headerlink" title="2. 实验要求，使用c语言画出该图像"></a>2. 实验要求，使用c语言画出该图像</h1><p>$\qquad$首先讲解一下使用c语言产生该函数的数据，然后使用gnuplot画图工具调用这些数据并重绘数据图形。以下我将 分别列出产生这两个窗函数的c程序。</p>
<h2 id="2-1-产生在0-1区间上的窗函数数据"><a href="#2-1-产生在0-1区间上的窗函数数据" class="headerlink" title="2.1 产生在0-1区间上的窗函数数据"></a>2.1 产生在0-1区间上的窗函数数据</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">windows.c</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">change</span><span class="params">(<span class="keyword">double</span> x)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> y=<span class="number">0</span>;</span><br><span class="line">	y=(<span class="keyword">int</span>)((x)&gt;<span class="number">0</span> &amp;&amp; (x)&lt;=<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> x;</span><br><span class="line">	<span class="comment">//产生第一个窗函数的负半轴部分数据</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">4000</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">		<span class="comment">//此for循环产生</span></span><br><span class="line">        x=-i/<span class="number">1000.0</span>;</span><br><span class="line">        <span class="keyword">int</span> y=<span class="number">8</span>;</span><br><span class="line">		<span class="keyword">float</span> result=<span class="number">0</span>;</span><br><span class="line">		y=change(x);</span><br><span class="line">		<span class="comment">//调用函数实现窗函数数字转换</span></span><br><span class="line">		result=(<span class="keyword">float</span>)y*<span class="number">1.5</span>;</span><br><span class="line">		<span class="comment">//设置窗函数的高度</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%.3f\t%.2f\n"</span>,x,result);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//产生第一个窗函数的正半轴部分</span></span><br><span class="line">	 <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">4000</span>;i++)&#123;</span><br><span class="line">		<span class="comment">//此for循环产生</span></span><br><span class="line">        x=i/<span class="number">1000.0</span>;</span><br><span class="line">        <span class="keyword">int</span> y=<span class="number">8</span>;</span><br><span class="line">		<span class="keyword">float</span> result=<span class="number">0</span>;</span><br><span class="line">		y=change(x);</span><br><span class="line">		<span class="comment">//调用函数实现窗函数数字转换</span></span><br><span class="line">		result=(<span class="keyword">float</span>)y*<span class="number">1.0</span>;</span><br><span class="line">		<span class="comment">//设置窗函数的高度</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%.3f\t%.2f\n"</span>,x,result);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>$\quad$在编辑完该程序之后，我们再采用gcc编译器对其编译，并将其输出结果存入到res.dat文件中。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">E:\研一c语言工程训练\gnuplot&gt;gcc windows.c -o windows</span><br><span class="line">E:\研一c语言工程训练\gnuplot&gt;windows.exe &gt; res.dat</span><br></pre></td></tr></table></figure>
<h2 id="2-2产生2-3区间上的窗函数"><a href="#2-2产生2-3区间上的窗函数" class="headerlink" title="2.2产生2-3区间上的窗函数"></a>2.2产生2-3区间上的窗函数</h2><p>此窗函数其非零部分高度设置一样设置为1.5，和matlab里边的设置保持一致。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">window2.c</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">change</span><span class="params">(<span class="keyword">double</span> x)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> y=<span class="number">0</span>;</span><br><span class="line">	y=(<span class="keyword">int</span>)((x)&gt;<span class="number">2</span> &amp;&amp; (x)&lt;=<span class="number">3</span>);</span><br><span class="line">	<span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> x;</span><br><span class="line">	<span class="comment">//产生第一个窗函数的负半轴部分数据</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">4000</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">		<span class="comment">//此for循环产生</span></span><br><span class="line">        x=-i/<span class="number">1000.0</span>;</span><br><span class="line">        <span class="keyword">int</span> y=<span class="number">8</span>;</span><br><span class="line">		<span class="keyword">float</span> result=<span class="number">0</span>;</span><br><span class="line">		y=change(x);</span><br><span class="line">		<span class="comment">//调用函数实现窗函数数字转换</span></span><br><span class="line">		result=(<span class="keyword">float</span>)y*<span class="number">1.5</span>;</span><br><span class="line">		<span class="comment">//设置窗函数的高度</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%.3f\t%.2f\n"</span>,x,result);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//产生第一个窗函数的正半轴部分</span></span><br><span class="line">	 <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">4000</span>;i++)&#123;</span><br><span class="line">		<span class="comment">//此for循环产生</span></span><br><span class="line">        x=i/<span class="number">1000.0</span>;</span><br><span class="line">        <span class="keyword">int</span> y=<span class="number">8</span>;</span><br><span class="line">		<span class="keyword">float</span> result=<span class="number">0</span>;</span><br><span class="line">		y=change(x);</span><br><span class="line">		<span class="comment">//调用函数实现窗函数数字转换</span></span><br><span class="line">		result=(<span class="keyword">float</span>)y*<span class="number">1.5</span>;</span><br><span class="line">		<span class="comment">//设置窗函数的高度</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%.3f\t%.2f\n"</span>,x,result);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>$\qquad$同样，在编辑完该程序之后，我们再采用gcc编译器对其编译，并将其输出结果存入到res2.dat文件中。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">E:\研一c语言工程训练\gnuplot&gt;gcc window2.c -o window2</span><br><span class="line">E:\研一c语言工程训练\gnuplot&gt;window2.exe &gt; res2.dat</span><br></pre></td></tr></table></figure>
<h2 id="2-3-使用gnuplot重绘两个窗函数"><a href="#2-3-使用gnuplot重绘两个窗函数" class="headerlink" title="2.3 使用gnuplot重绘两个窗函数"></a>2.3 使用gnuplot重绘两个窗函数</h2><p>在命令行输入如下命令，对图像进行一些基础设置和绘图。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; set title('pictures of different windows function')</span><br><span class="line">gnuplot&gt; set xlabel 'time/s'</span><br><span class="line">gnuplot&gt; set ylabel 'f(t)'</span><br><span class="line">gnuplot&gt; plot [<span class="number">-4</span>:<span class="number">4</span>] [<span class="number">0</span>:<span class="number">2</span>] <span class="string">"res.dat"</span> u <span class="number">1</span>:<span class="number">2</span> w l lt <span class="number">6</span> lw <span class="number">2</span>,<span class="string">"res2.dat"</span> w l lt <span class="number">7</span> lw <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>执行完之后则会产生如下图。</p>
<p><img src="https://img-blog.csdnimg.cn/20190929162713558.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>可以看到c语言产生的绘制图片与matlab绘画出来的并没有什么差别。</p>
<h2 id="2-4-c语言实现时域卷积"><a href="#2-4-c语言实现时域卷积" class="headerlink" title="2.4 c语言实现时域卷积"></a>2.4 c语言实现时域卷积</h2><p>$\qquad$对于c语言实现卷积，此处我对于上边的代码又进行了修改以及综合，在该文件内，我分别将自变量t的取值范围、窗函数1的取值、窗函数2的取值以及两个窗函数的卷积存储在对应的数组内。然后再对这几个数组统一访问，输出到本地文件。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">change</span><span class="params">(<span class="keyword">double</span> x)</span></span>&#123;</span><br><span class="line">	<span class="comment">//定义函数1，该函数主要实现对窗函数1数值的转换，使得只在0-1范围内有取值且为1</span></span><br><span class="line">	<span class="keyword">double</span> y=<span class="number">0</span>;</span><br><span class="line">	y=(<span class="keyword">double</span>)((x)&gt;<span class="number">0</span> &amp;&amp; (x)&lt;=<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">change2</span><span class="params">(<span class="keyword">double</span> x)</span></span>&#123;</span><br><span class="line">	<span class="comment">//定义函数2，该函数主要实现对窗函数2数值的转换，使得只在2-3范围内有取值且为1</span></span><br><span class="line">	<span class="keyword">double</span> y=<span class="number">0</span>;</span><br><span class="line">	y=(<span class="keyword">double</span>)((x)&gt;<span class="number">2</span> &amp;&amp; (x)&lt;=<span class="number">3</span>);</span><br><span class="line">	<span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> x;</span><br><span class="line">	<span class="keyword">double</span> x_nums[<span class="number">8001</span>] = &#123;<span class="number">0.0</span>&#125;;</span><br><span class="line">	<span class="keyword">double</span> y_1[<span class="number">8001</span>]=&#123;<span class="number">0.0</span>&#125;;</span><br><span class="line">	<span class="keyword">double</span> y_2[<span class="number">8001</span>]=&#123;<span class="number">0.0</span>&#125;;</span><br><span class="line">	<span class="keyword">double</span> y_y[<span class="number">8001</span>]=&#123;<span class="number">0.0</span>&#125;;</span><br><span class="line">	<span class="comment">//其中x_nums中存储的是-4:0.001:4</span></span><br><span class="line">	<span class="comment">//y_1中存储的是在-4:0.001:4条件下窗函数1的取值</span></span><br><span class="line">	<span class="comment">//y_2中存储的是-4:0.001:4条件下窗函数2的取值</span></span><br><span class="line">	<span class="comment">//y_y中存储的是-4:0.001:4条件下窗函数1和窗函数卷积的取值</span></span><br><span class="line">	<span class="keyword">int</span> j=<span class="number">0</span>;</span><br><span class="line">	<span class="comment">//产生第一个窗函数的负半轴部分数据</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">4000</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">		<span class="comment">//此for循环产生</span></span><br><span class="line">        x=-(i/<span class="number">1000.0</span>);</span><br><span class="line">		j=<span class="number">4000</span>-i;</span><br><span class="line">        <span class="keyword">double</span> y,y2;</span><br><span class="line">		<span class="keyword">float</span> result,result2;</span><br><span class="line">		y=change(x);</span><br><span class="line">		y2=change2(x);</span><br><span class="line">		<span class="comment">//调用函数实现窗函数数字转换</span></span><br><span class="line">		result=y;</span><br><span class="line">		result2=y2;</span><br><span class="line">		x_nums[j]=x;</span><br><span class="line">		y_1[j]=result;</span><br><span class="line">		y_2[j]=result2*<span class="number">1.5</span>;</span><br><span class="line">		<span class="comment">//设置窗函数的高度</span></span><br><span class="line">		<span class="comment">//printf("%.3f\t%.2f\n",x,result);</span></span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//产生第一个窗函数的正半轴部分</span></span><br><span class="line">	 <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">4000</span>;i++)&#123;</span><br><span class="line">		<span class="comment">//此for循环产生</span></span><br><span class="line">        x=i/<span class="number">1000.0</span>;</span><br><span class="line">		j=i+<span class="number">4000</span>;</span><br><span class="line">        <span class="keyword">double</span> y,y2;</span><br><span class="line">		<span class="keyword">double</span> result,result2;</span><br><span class="line">		y=change(x);</span><br><span class="line">		y2=change2(x);</span><br><span class="line">		<span class="comment">//调用函数实现窗函数数字转换</span></span><br><span class="line">		result=y;</span><br><span class="line">		result2=y2;</span><br><span class="line">		<span class="comment">//设置窗函数的高度</span></span><br><span class="line">		<span class="comment">//printf("%.3f\t%.2f\n",x,result);</span></span><br><span class="line">		x_nums[j]=x;</span><br><span class="line">		y_1[j]=result;</span><br><span class="line">		y_2[j]=result2*<span class="number">1.5</span>;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//开始计算卷积</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">//step 1.计算负半轴部分卷积</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">4000</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">		x=-(i/<span class="number">1000.0</span>);</span><br><span class="line">		j=<span class="number">4000</span>-i;</span><br><span class="line">		<span class="comment">//计算tao为负的情况</span></span><br><span class="line">		<span class="keyword">double</span> sum;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">200</span>;t&gt;=<span class="number">0</span>;t--)&#123;</span><br><span class="line">			<span class="keyword">double</span> tao=-(t/<span class="number">100.0</span>);</span><br><span class="line">			sum=sum+<span class="number">0.01</span>*change(tao)*change2(x-tao)*<span class="number">1.5</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//计算tao为正的情况</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">1</span>;t&lt;=<span class="number">500</span>;t++)&#123;</span><br><span class="line">			<span class="keyword">double</span> tao=(t/<span class="number">100.0</span>);</span><br><span class="line">			sum=sum+<span class="number">0.01</span>*change(tao)*change2(x-tao)*<span class="number">1.5</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		y_y[j]=sum;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//step 2.计算正半轴部分卷积</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">4000</span>;i++)&#123;</span><br><span class="line">		x=(i/<span class="number">1000.0</span>);</span><br><span class="line">		j=<span class="number">4000</span>+i;</span><br><span class="line">		<span class="comment">//计算tao为负的情况</span></span><br><span class="line">		<span class="keyword">double</span> sum=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">200</span>;t&gt;=<span class="number">0</span>;t--)&#123;</span><br><span class="line">			<span class="keyword">double</span> tao=-(t/<span class="number">100.0</span>);</span><br><span class="line">			sum=sum+<span class="number">0.01</span>*change(tao)*change2(x-tao)*<span class="number">1.5</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//计算tao为正的情况</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">1</span>;t&lt;=<span class="number">500</span>;t++)&#123;</span><br><span class="line">			<span class="keyword">double</span> tao=(t/<span class="number">100.0</span>);</span><br><span class="line">			sum=sum+<span class="number">0.01</span>*change(tao)*change2(x-tao)*<span class="number">1.5</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		y_y[j]=sum;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//for循环输出画图需要的数据</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">8000</span>;i++) &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%.3f\t%.2f\t%.2f\t%.2f\n"</span>,x_nums[i],y_1[i],y_2[i],y_y[i]);</span><br><span class="line">		<span class="comment">//其中x_nums中存储的是-4:0.001:4</span></span><br><span class="line">		<span class="comment">//y_1中存储的是在-4:0.001:4条件下窗函数1的取值</span></span><br><span class="line">		<span class="comment">//y_2中存储的是-4:0.001:4条件下窗函数2的取值</span></span><br><span class="line">		<span class="comment">//y_y中存储的是-4:0.001:4条件下窗函数1和窗函数卷积的取值</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其具体的操作流程如下所示:<br><img src="https://img-blog.csdnimg.cn/20190929200938158.gif#pic_center" alt="在这里插入图片描述"><br>$\qquad$在上一步的操作中，我们已经实现了将我们绘图需要的数据存到了本地，接下来我们就要使用gnuplot来对这些数据绘制。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plot [<span class="number">-3</span>:<span class="number">5</span>] [<span class="number">0</span>:<span class="number">2</span>] <span class="string">"convolution.dat"</span> u <span class="number">1</span>:<span class="number">2</span> w l lt <span class="number">6</span> lw <span class="number">2.5</span>,<span class="string">"convolution.dat"</span> u <span class="number">1</span>:<span class="number">3</span> w l lt <span class="number">7</span> lw <span class="number">2.5</span>,<span class="string">"convolution.dat"</span> u <span class="number">1</span>:<span class="number">4</span> w p pt <span class="number">1</span> ps <span class="number">0.1</span></span><br></pre></td></tr></table></figure>
<p>具体的操作如下所示:<br><img src="https://img-blog.csdnimg.cn/20190929201444175.gif#pic_center" alt="在这里插入图片描述"></p>
<h1 id="3-c语言图像与matlab图像的比对"><a href="#3-c语言图像与matlab图像的比对" class="headerlink" title="3. c语言图像与matlab图像的比对"></a>3. c语言图像与matlab图像的比对</h1><p>$\qquad$另外，此时我们还需要将C语言画出来的卷积图像和matlab绘制出来的图像进行比对。下图中图1为c语言绘制的，图2为matlab绘制的。<br><img src="https://img-blog.csdnimg.cn/2019092920172674.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_50#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20190929202045488.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_50#pic_center" alt="在这里插入图片描述"></p>
<h2 id="3-1-总结-amp-体会"><a href="#3-1-总结-amp-体会" class="headerlink" title="3.1 总结 &amp; 体会"></a>3.1 总结 &amp; 体会</h2><p>$\qquad$本次实践分别使用matlab和c语言，在不调用其它函数包的情况下，自主绘画了两个窗函数并且实现了两个函数的时域卷积练习。通过本次实践，更加深刻的理解了卷积的概念，对于信号与系统以及数字语音处理的学习提供了帮助。另外希望此次博客可以为自己以后的练习提供帮助吧。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/11/19/matlab%E5%92%8Cc%E8%AF%AD%E8%A8%80%E5%9C%A8%E4%B8%8D%E8%B0%83%E7%94%A8%E5%8C%85%EF%BC%88%E5%BA%93%EF%BC%89%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E5%AE%9E%E7%8E%B0%E6%97%B6%E5%9F%9F%E5%8D%B7%E7%A7%AF/" data-id="ck355v6vz000060o684j62dy9" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/11/19/%E8%B6%85%E8%AF%A6%E7%BB%86%E7%9A%84gnuplot%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%E3%80%902%E3%80%91/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          超详细的gnuplot使用教程【2】
        
      </div>
    </a>
  
  
    <a href="/2019/11/19/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86matlab%E8%AE%AD%E7%BB%83%E7%AC%AC%E3%80%901%E3%80%91%E5%BC%B9/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">数字信号处理matlab训练第【1】弹</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/11/19/window%E4%B8%8Agnuplot%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8%E3%80%901%E3%80%91/">window上gnuplot的安装和使用【1】</a>
          </li>
        
          <li>
            <a href="/2019/11/19/%E8%B6%85%E8%AF%A6%E7%BB%86%E7%9A%84gnuplot%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%E3%80%902%E3%80%91/">超详细的gnuplot使用教程【2】</a>
          </li>
        
          <li>
            <a href="/2019/11/19/matlab%E5%92%8Cc%E8%AF%AD%E8%A8%80%E5%9C%A8%E4%B8%8D%E8%B0%83%E7%94%A8%E5%8C%85%EF%BC%88%E5%BA%93%EF%BC%89%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E5%AE%9E%E7%8E%B0%E6%97%B6%E5%9F%9F%E5%8D%B7%E7%A7%AF/">matlab和c语言在不调用包（库）的情况下实现时域卷积</a>
          </li>
        
          <li>
            <a href="/2019/11/19/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86matlab%E8%AE%AD%E7%BB%83%E7%AC%AC%E3%80%901%E3%80%91%E5%BC%B9/">数字信号处理matlab训练第【1】弹</a>
          </li>
        
          <li>
            <a href="/2019/11/19/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86matlab%E8%AE%AD%E7%BB%83%E7%AC%AC%E3%80%902%E3%80%91%E5%BC%B9--%E7%A6%BB%E6%95%A3%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E7%9A%84%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2%EF%BC%88DTFT%EF%BC%89/">数字信号处理matlab训练第【2】弹--离散时间序列的傅里叶变换（DTFT）</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 王延凯的博客<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>