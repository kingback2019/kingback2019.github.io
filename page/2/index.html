<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="昆明理工大学无线通信团队成员">
<meta property="og:type" content="website">
<meta property="og:title" content="王延凯的博客">
<meta property="og:url" content="https:&#x2F;&#x2F;kingback2019.github.io&#x2F;page&#x2F;2&#x2F;index.html">
<meta property="og:site_name" content="王延凯的博客">
<meta property="og:description" content="昆明理工大学无线通信团队成员">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://kingback2019.github.io/page/2/"/>





  <title>王延凯的博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">王延凯的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Categories
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" target="_blank" rel="noopener" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kingback2019.github.io/2019/11/25/Selenium+Webdriver%E7%88%AC%E5%8F%96Google%E7%A1%AC%E5%B8%81%E5%9B%BE%E7%89%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kingback">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/isme.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王延凯的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/25/Selenium+Webdriver%E7%88%AC%E5%8F%96Google%E7%A1%AC%E5%B8%81%E5%9B%BE%E7%89%87/" itemprop="url">Selenium+Webdriver爬取Google硬币图片</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-25T16:52:57+08:00">
                2019-11-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-需求目的"><a href="#1-需求目的" class="headerlink" title="1.需求目的"></a>1.需求目的</h1><p>$\qquad$在做本科毕业设计的时候，女朋友选的课题时对于不同国家硬币的识别，这无疑将会用到深度学习以及机器学习的理论和方法来进行识别。但是前提是必须先拿一些样本数据在神经网络中进行训练，而每个币种也都需要三四百左右有效图片（就是那种含有用用信息的图片），这可当时愁坏了女朋友，我不忍心看她发愁，于是就揽下了图片资料的搜集这一部分的任务。</p>
<h1 id="2-爬取原理"><a href="#2-爬取原理" class="headerlink" title="2.爬取原理"></a>2.爬取原理</h1><p>$\qquad$由于此次我们的爬取对象为Google浏览器，所以我就默认大家已经可以成功翻墙。如果大家还是翻不了，可以私聊找我，免费分享资料。<br>$\qquad$接下来我来介绍一下Selenium，Selenium它是一个用于Web应用程序自动化测试工具。它可以直接运行在浏览器中，就像真正的用户在操作一样。可以在受程序控制的窗口，让程序来模拟人的点击、下拉、输入、选择等操作，从而得到我们想要的数据。<br>$\qquad$selenium支持的浏览器包括IE（7, 8, 9, 10, 11），Mozilla Firefox，Safari，Google Chrome，Opera等。此次实验我使用的浏览器为Chrome浏览器。<br>$\qquad$Webdriver在我理解看来，它是一个可以产生一个受程序控制的浏览器模拟器，如果我们使用selenium+webdriver组合来爬取信息的话，那么我们所有的活动都是发生在这个模拟器之中的。<br>在此处我就先不展示微Webdriver的安装教程，如果后边有时间，我会尽力量将这个教程补全。</p>
<h1 id="3-代码介绍"><a href="#3-代码介绍" class="headerlink" title="3.代码介绍"></a>3.代码介绍</h1><p>$\qquad$在程序中，我是定义了几个函数来分别实现获取图片的下载地址get_str()、重命名图片的名称rename()、以及图片的下载download()函数<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"># @Time : 2019/5/5 0:22 </span><br><span class="line"># @Author : kingback</span><br><span class="line"># @File : pics_USA.py </span><br><span class="line"># @Software: PyCharm</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"><span class="keyword">import</span> traceback</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">##################################################################</span><br><span class="line">##    以下开始定义函数</span><br><span class="line">##    首先一点需要明确，如果函数只是定义了，</span><br><span class="line">##    而没有被调用，它是不会执行的</span><br><span class="line">##################################################################</span><br><span class="line"></span><br><span class="line">##该函数主要实现抓取网页内容的解析工作</span><br><span class="line">##获取当前页面硬币图片的下载地址</span><br><span class="line">def  get_str(driver):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            driver.find_element_by_id(<span class="string">"irc-rac"</span>).click()</span><br><span class="line">            ##模拟用户点击网页右边的下一个</span><br><span class="line">        except:</span><br><span class="line">            driver.find_element_by_xpath(<span class="string">"//*[@id='irc-rac']/a"</span>).click()</span><br><span class="line">    except:</span><br><span class="line">        driver.find_element_by_class_name(<span class="string">"Q8Bv4e"</span>).click()</span><br><span class="line">        driver.find_element_by_css_selector(<span class="string">"div#irc-lac &gt; a"</span>).click()</span><br><span class="line"></span><br><span class="line">    ##上边的try except都是模拟点击下一个的，因为有时候单纯的使用id来寻找那个下一个控件的时候网页有时候会搜索不到</span><br><span class="line">    ## 当id搜索不到的时候，就会采用xpath来定位这个空间</span><br><span class="line">    ##如果还是不行，那就再通过class_name来定位，如果还是不行那就通过css选择器来定位</span><br><span class="line">    ##一般来说通过id来定位就直接可以</span><br><span class="line"></span><br><span class="line">    # 使用xpath解析网页中硬币图片的下载地址，可以看出这只是摘取网页该路径下的内容，也就是网页下包含硬币图片的img字段</span><br><span class="line">    img = driver.find_element_by_xpath(<span class="string">"//*[@id='irc_cc']/div[2]/div[1]/div[2]/div[1]/a/img"</span>)</span><br><span class="line">    # 因为字段中含有很多属性，经过chrome（）的开发者模式发现该图片的下载地址存储在src属性里边</span><br><span class="line">    img_url = img.get_attribute(<span class="string">"src"</span>)</span><br><span class="line">    ##提取src属性数据</span><br><span class="line">    <span class="keyword">return</span> img_url</span><br><span class="line">    ##返回网页解析出来的图片下载地址</span><br><span class="line"></span><br><span class="line">##该函数主要实现</span><br><span class="line">##传入的两个参数一个为file，是当前爬取图片的种类，比如‘一欧元’</span><br><span class="line">##img_url 为图片的下载地址</span><br><span class="line">##返回初步处理的文件名 例如‘一欧元/0322.jpg.jpg’或‘一欧元/0566.jpg’或‘一欧元/58777.jpg.wddcvcrrcc.jpg’</span><br><span class="line">##总之返回数据多样,我们将会在rename函数中规范处理文件名称</span><br><span class="line">def get_fileneme(file,img_url):</span><br><span class="line"></span><br><span class="line">    lists = re.split(r<span class="string">'/'</span>, img_url)</span><br><span class="line">    #将img_url 字符串按照‘/’拆分为数组lists</span><br><span class="line">    ## lists数组的倒数第一个（在数组中表现形式为-1）数据即为我们需要的文件名称，但是此处得到的图片命名格式不规范</span><br><span class="line">    filename=os.path.join(file,lists[<span class="number">-1</span>])</span><br><span class="line">    #考虑到有些图片的网页下载地址最后几位不是‘.jpg’结尾，于是我们在其文件名称上都手动加上‘.jpg’</span><br><span class="line">    filename = filename + <span class="string">".jpg"</span></span><br><span class="line">    ## 返回初步处理得到的文件名称</span><br><span class="line">    <span class="keyword">return</span> filename</span><br><span class="line"></span><br><span class="line">##再次处理已经拆分出来的图片名字，将一些命名不规范的图片统一规范</span><br><span class="line">def rename(filename):</span><br><span class="line">    ## 由于我们通过函数get_filename()得到的文件名称不规范</span><br><span class="line">    lists = re.split(r<span class="string">'.jpg'</span>, filename)</span><br><span class="line">    ##使用re库对传入的filename按照‘.jpg’拆分</span><br><span class="line">    ##比如‘一欧元/0322.jpg.jpg’ 拆分完后lists[0]内就是我们需要的规范文件名，为‘一欧元/0322’</span><br><span class="line">    filename_reshape = lists[<span class="number">0</span>] + <span class="string">".jpg"</span></span><br><span class="line">    ##再对已经处理好的文件名进行字符串拼接，此时的文件名为 ‘一欧元/0322.jpg’</span><br><span class="line">    <span class="keyword">return</span> filename_reshape</span><br><span class="line">    ##返回规范的图片保存名字</span><br><span class="line"></span><br><span class="line">##创建文件夹操作，fileame为要创建的文件夹的名字</span><br><span class="line">def mkdir(filename):</span><br><span class="line">    #判断该文件夹是否存在</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(filename) is False:</span><br><span class="line">        ##如果不存在那就创建该文件夹</span><br><span class="line">        os.makedirs(filename)</span><br><span class="line"></span><br><span class="line">##该函数主要实现图片地址的下载，需要传入两个参数</span><br><span class="line">##url为要下载图片的网络连接地址，filename为图片要保存为的名字（规范版）</span><br><span class="line">##该程序执行会返回两个结果，如果要下载的文件已经存在，那么直接返回‘file exites!’</span><br><span class="line">##如果图片下载成功，直接返回图片的名字</span><br><span class="line">def download(url, filename):</span><br><span class="line"></span><br><span class="line">    #首先要对需要下载的图片进行查询</span><br><span class="line">    #如果文件已经存在，直接返回result,不再继续往下执行</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(filename):</span><br><span class="line">        result=<span class="string">"file exists!"</span></span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    ##以下执行部分执行，则说明该文件不存在</span><br><span class="line">    #以下大可不必管，就是一个图片保存操作</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        r = requests.get(url, stream=True, timeout=<span class="number">15</span>)</span><br><span class="line">        r.raise_for_status()</span><br><span class="line">        <span class="keyword">with</span> open(filename, <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="keyword">for</span> chunk <span class="keyword">in</span> r.iter_content(chunk_size=<span class="number">1024</span>):</span><br><span class="line">                if chunk:  # filter out keep-alive new chunks</span><br><span class="line">                    f.write(chunk)</span><br><span class="line">                    f.flush()</span><br><span class="line">        <span class="keyword">return</span> filename</span><br><span class="line">    except KeyboardInterrupt:</span><br><span class="line">            <span class="keyword">if</span> os.path.exists(filename):</span><br><span class="line">                os.remove(filename)</span><br><span class="line">            raise KeyboardInterrupt</span><br><span class="line">    except Exception:</span><br><span class="line">            <span class="keyword">if</span> os.path.exists(filename):</span><br><span class="line">                os.remove(filename)</span><br></pre></td></tr></table></figure><br>$\qquad$以上的代码部分都是一些为实现整体的爬取过程而定义的几个小函数，接下来引出今天的大Boss,那就是我们的main函数：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">##该函数为程序执行的主体部分，通过调用不同的函数来实现我们的数据爬取</span><br><span class="line">def main():</span><br><span class="line">    #开始驱动浏览器打开页面</span><br><span class="line">    # 程序开始</span><br><span class="line">    #使用webdriver创建一个Chrome浏览器，受程序控制</span><br><span class="line">    driver = webdriver.Chrome()</span><br><span class="line">    driver.maximize_window()</span><br><span class="line">    ##设置浏览器界面最大化</span><br><span class="line"></span><br><span class="line">    ##定义要爬取的网页地址</span><br><span class="line">    start_urls=[<span class="string">'https://www.google.com.hk/search?q=One+cent+picture&amp;tbm=isch&amp;source=hp&amp;sa=X&amp;ved=2ahUKEwiToZvMooLiAhXmslQKHUqjDJwQsAR6BAgJEAE&amp;biw=1536&amp;bih=498&amp;dpr=1.25#imgrc=n64_jLKJUBJDuM:'</span>,</span><br><span class="line">                <span class="string">'https://www.google.com.hk/search?q=5+cent+picture&amp;tbm=isch&amp;source=univ&amp;sa=X&amp;ved=2ahUKEwiUqdP_sILiAhUVpJ4KHc4WBo0QsAR6BAgHEAE&amp;biw=1536&amp;bih=498#imgrc=4nPkDSV6jzmtPM:'</span>,</span><br><span class="line">                <span class="string">'https://www.google.com.hk/search?q=10+cent+picture&amp;tbm=isch&amp;source=univ&amp;sa=X&amp;ved=2ahUKEwid7MzHrYLiAhUPsZ4KHV_pB-wQsAR6BAgJEAE&amp;biw=1536&amp;bih=498#imgrc=tSuhZO5ob26USM:'</span>,</span><br><span class="line">                <span class="string">'https://www.google.com.hk/search?biw=1536&amp;bih=498&amp;tbm=isch&amp;sa=1&amp;ei=rcvNXLOiLJf7-gT325fADA&amp;q=25+cent+picture&amp;oq=25+cent+picture#imgrc=SPdU2SyxQ6tyNM:'</span>,</span><br><span class="line">                <span class="string">'https://www.google.com/search?biw=1536&amp;bih=498&amp;tbm=isch&amp;sa=1&amp;ei=27rPXISNAc-U-gSw8bKIBw&amp;q=1+dollar+coin&amp;oq=1+dollar+coin&amp;gs_l=img.3..0j0i67j0l8.1880.3046..4526...0.0..0.1243.3240.2-1j2j7-2......0....1..gws-wiz-img.HZop3grZwiA#imgrc=sQ7fSoquvqlbQM:'</span>,</span><br><span class="line">                <span class="string">'https://www.google.com/search?q=1+pound+coin&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;ved=0ahUKEwjopoOy3oXiAhUMup4KHd4zAoQQ_AUIDigB&amp;biw=1366&amp;bih=656#imgrc=Cmk0QjVR04jZ8M:'</span>,</span><br><span class="line">                <span class="string">'https://www.google.com/search?q=1+euro+coins+pictures&amp;tbm=isch&amp;tbs=rimg:CUjCBQXqwMc1IjjLWV147TNxfsot4jFYTW-D-ZdMNwIH9RAPN4NbTVGbT2WIEN4N0zHChVTYC_1PLBmu4i8IjJ-HTzyoSCctZXXjtM3F-EdESbyfDkBffKhIJyi3iMVhNb4MRsM09YsukhJUqEgn5l0w3Agf1EBFIOTsFSko0GioSCQ83g1tNUZtPEQTD6K2VqDMHKhIJZYgQ3g3TMcIRBMPorZWoMwcqEgmFVNgL88sGaxFFsZNELmkR8SoSCbiLwiMn4dPPEXrc3fEvwxkL&amp;tbo=u&amp;sa=X&amp;ved=2ahUKEwisss7e4YXiAhVPvZ4KHcg0DRgQ9C96BAgBEBg&amp;biw=1366&amp;bih=656&amp;dpr=1#imgrc=SMIFBerAxzVhMM:'</span>]</span><br><span class="line">    ##每个地址所对应的硬币种类</span><br><span class="line">    files=[<span class="string">'一美分'</span>,<span class="string">'五美分'</span>,<span class="string">'十美分'</span>,<span class="string">'二十五美分'</span>,<span class="string">'一美元'</span>,<span class="string">'一英镑'</span>,<span class="string">'一欧元'</span>]</span><br><span class="line">    #每个种类的硬币要爬取的数量</span><br><span class="line">    nums=[<span class="number">1000</span>,<span class="number">1000</span>,<span class="number">1000</span>,<span class="number">1000</span>,<span class="number">1000</span>,<span class="number">1000</span>,<span class="number">200</span>]</span><br><span class="line">    #开始对这些网页一个一个的爬取,for循环次数为start_urls内网页的个数</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(start_urls)):</span><br><span class="line">        driver.get(start_urls[i])</span><br><span class="line">        ##模拟浏览器开始自动访问第一个网址</span><br><span class="line">        sleep(<span class="number">6</span>)</span><br><span class="line">        ##设置时间等待，以确保页面加载完毕</span><br><span class="line">        print(<span class="string">"********************       当前爬取:"</span>, files[i], <span class="string">"     *******************************\n\n"</span>)</span><br><span class="line">        number=<span class="number">1</span></span><br><span class="line">        #定义一个number变量来计数已经成功爬取的图片个数</span><br><span class="line">        #在当前路径下创建文件夹，比如创建‘一美分’</span><br><span class="line">        mkdir(files[i])</span><br><span class="line">        #当已经爬取的图片个数大于要爬取的图片个数的时候，停止执行该步骤</span><br><span class="line">        <span class="keyword">while</span> (number&lt;nums[i]):</span><br><span class="line">            #调用get_str函数获取硬币图片的下载地址</span><br><span class="line">            img_url=get_str(driver)</span><br><span class="line">            print(<span class="string">"img_url"</span>,img_url)</span><br><span class="line">            ##如果没有得到地址，输出网络不好</span><br><span class="line">            <span class="keyword">if</span>(img_url==None):</span><br><span class="line">                print(<span class="string">"当前网络状况不好！！！"</span>)</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            # 定义图片名称</span><br><span class="line">            filename=get_fileneme(files[i],img_url)         #未规范版</span><br><span class="line">            filename = rename(filename)                     #规范版</span><br><span class="line">            # 保存图片</span><br><span class="line">            aaa=download(img_url, filename)</span><br><span class="line">            ##定义一个变量aaa来接收download的返回结果，如果返回为file exits则说明文件已存在，此时number不加1</span><br><span class="line">            ##如果返回结果为filename,则说明成功保存图片，此时number+1</span><br><span class="line">            <span class="keyword">if</span> (aaa == <span class="string">"file exists!"</span>):</span><br><span class="line">                print(<span class="string">"file exists!"</span>)</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            elif(aaa==filename):</span><br><span class="line">                print(<span class="string">"图片存储路径： "</span>, aaa)</span><br><span class="line">                # sleep(0.5)</span><br><span class="line">                number+=<span class="number">1</span></span><br><span class="line">        ##以下都是一些输出格式</span><br><span class="line">        print(<span class="string">"***********************    爬取"</span>, files[i], <span class="string">"完毕!!!     *****************************"</span>)</span><br><span class="line">        <span class="keyword">if</span>(i&lt;=len(nums)):</span><br><span class="line">            print(<span class="string">"*****                      下一步爬取:"</span>,files[i+<span class="number">1</span>],<span class="string">"                             *****"</span>)</span><br><span class="line">            print(<span class="string">"***********************     当前爬取进度"</span>,<span class="string">'%d / %d'</span> % (i+<span class="number">1</span>, len(nums)),<span class="string">"      *****************************\n\n"</span>)</span><br><span class="line">        sleep(<span class="number">3</span>)</span><br><span class="line">    print(<span class="string">"\n\n**********************     全部数据爬取完毕！！！      ****************************"</span>)</span><br><span class="line"></span><br><span class="line">    driver.quit()  # 关闭浏览器</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##############################################################</span><br><span class="line">####            自定义函数结束，以上函数如果不被调用</span><br><span class="line">####            其本身是不会执行的。</span><br><span class="line">##############################################################</span><br></pre></td></tr></table></figure><br>$\qquad$其实当我们执行完之后，发现程序并没有真正的开始，那是因为，我们虽然定义了一个名叫main的函数，但是计算机不知道这个函数就是整个程序的入口，所以我们要想激活这个main函数，还需对其进行声明一下;<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##真正的开始执行</span><br><span class="line">##在前边定义的函数中选择 def main()这个函数</span><br><span class="line">##并且执行该函数内的操作</span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><br>$\qquad$当这些我们都准备好了之后，我们就可以运行该程序了，运行之后，接下来就是静待图片慢慢爬取完毕了。<br>虽然到这里程序已经可以完整的跑起来了，但是有个地方我还是忍不住，想要说几句;<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">##每个地址所对应的硬币种类</span><br><span class="line">   files=[<span class="string">'一美分'</span>,<span class="string">'五美分'</span>,<span class="string">'十美分'</span>,<span class="string">'二十五美分'</span>,<span class="string">'一美元'</span>,<span class="string">'一英镑'</span>,<span class="string">'一欧元'</span>]</span><br><span class="line">   #每个种类的硬币要爬取的数量</span><br><span class="line">   nums=[<span class="number">1000</span>,<span class="number">1000</span>,<span class="number">1000</span>,<span class="number">1000</span>,<span class="number">1000</span>,<span class="number">1000</span>,<span class="number">200</span>]</span><br><span class="line">   #开始对这些网页一个一个的爬取,for循环次数为start_urls内网页的个数</span><br></pre></td></tr></table></figure><br>$\qquad$那就是这里，可以看的出来我们这次需要爬取的硬币的种类，对于第二个数组nums，我是用来定义每种硬币所要爬取的图片个数，例如这里的一欧元图片我们就只需要200张，而其它的则需要1000张。</p>
<h1 id="4-运行结果"><a href="#4-运行结果" class="headerlink" title="4.运行结果"></a>4.运行结果</h1><p><img src="https://img-blog.csdnimg.cn/20190830210336520.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20190830210407798.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>$\qquad$其它国家硬币的截图我就不再一一展示，如果有需要的可以私聊我，我看到后定会回复。</p>

          
        
      
    </div>
	<div>
		
	</div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kingback2019.github.io/2019/11/25/scrapy%E7%88%AC%E5%8F%96%E6%98%86%E5%B7%A5%E4%BF%A1%E8%87%AA%E9%99%A2%E5%AF%BC%E5%B8%88%E4%BF%A1%E6%81%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kingback">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/isme.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王延凯的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/25/scrapy%E7%88%AC%E5%8F%96%E6%98%86%E5%B7%A5%E4%BF%A1%E8%87%AA%E9%99%A2%E5%AF%BC%E5%B8%88%E4%BF%A1%E6%81%AF/" itemprop="url">scrapy爬取昆工信自院导师信息</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-25T16:52:42+08:00">
                2019-11-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-爬取目的"><a href="#1-爬取目的" class="headerlink" title="1.爬取目的"></a>1.爬取目的</h1><p>$\qquad$关于昆明理工大学研究生导师信息的收集是因为昆工学校的官网经常不定时关闭，导致一些学生想要查看一些老师的信息，结果却查看不到。正好我的一位同学也刚好想要搜集老师的相关信息。这些信息都在这个学院的官网上放着，<a href="http://xzy.kmust.edu.cn/MHWZ/MHWQTGL/jslist.do?ywlbdm=001&amp;lmlxdm=02&amp;lmlbdm=0205&amp;zc=05" target="_blank" rel="noopener">http://xzy.kmust.edu.cn/MHWZ/MHWQTGL/jslist.do?ywlbdm=001&amp;lmlxdm=02&amp;lmlbdm=0205&amp;zc=05</a>但是当他看到有一百多位老师的时候，想必谁都会犯怵吧<br>于是，就想着能不能写一个程序将这些信息全部收集起来呢。</p>
<h1 id="2-技术可行性"><a href="#2-技术可行性" class="headerlink" title="2.技术可行性"></a>2.技术可行性</h1><p>$\qquad$现如今随着网络技术的发展，以及数据量的急剧增大，就萌生了一种新的技术，称之为爬虫。我所了解到的很多从事大数据行业的以及做数据分析的从业者，都有需要进行爬虫的需求。这也就使得这项爬虫技术很快的发展，正好在此处也为我们的此次“偷懒”提供了可能。</p>
<h1 id="3-scrapy爬虫"><a href="#3-scrapy爬虫" class="headerlink" title="3.scrapy爬虫"></a>3.scrapy爬虫</h1><p>$\qquad$多番调研之后我们采用了很多人都会使用的scrapy爬虫框架，接下来我来简单介绍一下该框架的运行机制：<br>Scrapy 使用了 Twisted异步网络库来处理网络通讯。整体架构大致如下：<br><img src="https://img-blog.csdnimg.cn/20190830153947646.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>$\qquad$从上边的示意图中我们也可以看出，scrapy是由这几个不同的功能模块相互协作，一起完成爬取动作的，接下来我来简单介绍一下其各个功能模块的作用：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>功能模块</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>引擎(Scrapy)</td>
<td>处理整个系统的数据流、触发事务（框架核心）</td>
</tr>
<tr>
<td>调度器(Scheduer)</td>
<td>接收引擎发过来的请求，压入队列，在引擎再次请求的时候返回。（其中这个队列指的是要抓取网页的Url地址，可以去除重复网址。）</td>
</tr>
<tr>
<td>下载器(Downloader)</td>
<td>用于下载页面内容，并将页面内容返回给spiders</td>
</tr>
<tr>
<td>爬虫(Spiders)</td>
<td>在这一部分完成爬取工作的大部分，即在网页中提取出用户需要的数据，并将其赋值给Item实体。也可以在这里进行翻页操作。</td>
</tr>
<tr>
<td>项目管道(Pipeline)</td>
<td>处理刚才传递的Item实体，验证实体有效性。</td>
</tr>
<tr>
<td>下载器中间件(Downloader Middlewares)</td>
<td>处理Scrapy引擎与下载器(Downloader)之间的请求及响应</td>
</tr>
<tr>
<td>爬虫中间件(Spider Middlewares)</td>
<td>处理蜘蛛的响应输入和请求输出。</td>
</tr>
<tr>
<td>调度中间件(Scheduer Middlewares)</td>
<td>从Scrapy引擎发送到调度的请求和响应。</td>
</tr>
</tbody>
</table>
</div>
<p>从上边的表格中我们也可以明白整个scrapy框架的工作流程可以简单表述成：</p>
<ol>
<li>引擎在调度器中抽取一个网址（URL）用于下一步的抓取</li>
<li>引擎把网址（URL）封装成一个Request请求传给下载器</li>
<li>下载器把资源下载下来，并且封装成Response应答包</li>
<li>Spiders爬虫解析应答包Response</li>
<li>解析出Item实体后，将Item实体交给实体管道进行进一步的处理</li>
<li>如果解析出的是链接，则把新的URL压入调度器中，等待抓取。</li>
</ol>
<h1 id="4-爬取过程及结果"><a href="#4-爬取过程及结果" class="headerlink" title="4.爬取过程及结果"></a>4.爬取过程及结果</h1><p>$\qquad$此次爬取，暂且略去scrapy整个爬虫框架环境的搭建，如果以后有机会的话，我会再为大家写一个详细教程的。此次博客仅以这个小抓取实验展开。</p>
<h2 id="4-1-根据要抓取的信息首先创建一个Item实体"><a href="#4-1-根据要抓取的信息首先创建一个Item实体" class="headerlink" title="4.1 根据要抓取的信息首先创建一个Item实体"></a>4.1 根据要抓取的信息首先创建一个Item实体</h2><p>$\qquad$首先我们先参照一下需要存取的信息，包括：教师姓名，性别，职称……个人简介等等。<br><img src="https://img-blog.csdnimg.cn/20190830162002100.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center =540x440" alt="在这里插入图片描述"><br>按照上边的需求我们在items.py内定义一下实体：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line"># Define here the models for your scraped items</span><br><span class="line">#</span><br><span class="line"># See documentation in:</span><br><span class="line"># https://doc.scrapy.org/en/latest/topics/items.html</span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line">class CoinPicsItem(scrapy.Item):</span><br><span class="line">    # define the fields for your item here like:</span><br><span class="line">    url=scrapy.Field()#老师独立介绍界面</span><br><span class="line">    name=scrapy.Field()#姓名</span><br><span class="line">    gender=scrapy.Field()#性别</span><br><span class="line">    position=scrapy.Field()#职称</span><br><span class="line">    type=scrapy.Field()#</span><br><span class="line">    email=scrapy.Field()#电子邮件</span><br><span class="line">    phone=scrapy.Field()#电话</span><br><span class="line">    office_address=scrapy.Field()#办公地址</span><br><span class="line">    eduction_background=scrapy.Field()#教育背景</span><br><span class="line">    search_derection=scrapy.Field()#研究方向</span><br><span class="line">    description=scrapy.Field()#老师描述</span><br><span class="line">    img_url=scrapy.Field()#老师照片存储地址</span><br></pre></td></tr></table></figure></p>
<h2 id="4-2-解析出Item-并将Item交给Pipeline管道"><a href="#4-2-解析出Item-并将Item交给Pipeline管道" class="headerlink" title="4.2 解析出Item,并将Item交给Pipeline管道"></a>4.2 解析出Item,并将Item交给Pipeline管道</h2><p>这里才是对于数据进行处理的重头戏，以下为其代码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> coin_pics.items <span class="keyword">import</span> CoinPicsItem</span><br><span class="line"><span class="keyword">from</span> scrapy.http <span class="keyword">import</span> Request</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.remote.webelement <span class="keyword">import</span> WebElement</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> selenium.common.exceptions <span class="keyword">import</span> TimeoutException</span><br><span class="line"></span><br><span class="line">class CoinPicSpider(scrapy.Spider):</span><br><span class="line">    name = <span class="string">'coin_pic'</span></span><br><span class="line">    allowed_domains = [<span class="string">'xzy.kmust.edu.cn'</span>]</span><br><span class="line">    start_urls = [<span class="string">'http://xzy.kmust.edu.cn/MHWZ/MHWQTGL/jslist.do?ywlbdm=001&amp;lmlxdm=02&amp;lmlbdm=0205&amp;zc=05'</span>,</span><br><span class="line">                  ]</span><br><span class="line">    #起始抓取网页地址，也就是我们所说的URL队列</span><br><span class="line">    def parse(self, response):</span><br><span class="line">        # print(response)</span><br><span class="line">        items = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">136</span>):</span><br><span class="line">            item = CoinPicsItem()</span><br><span class="line">            url=response.xpath(<span class="string">'//*[@id="jslist"]/tr/td/a/@href'</span>).extract()[i]</span><br><span class="line">            item[<span class="string">'url'</span>] = <span class="string">'http://xzy.kmust.edu.cn'</span> + url</span><br><span class="line">            <span class="keyword">yield</span> scrapy.http.Request(item[<span class="string">'url'</span>], meta=&#123;<span class="string">'item'</span>: item&#125;, callback=self.parse1)</span><br><span class="line"></span><br><span class="line">    def parse1(self,response):</span><br><span class="line">        item = response.meta[<span class="string">'item'</span>]</span><br><span class="line">        #开始接收返回的数据</span><br><span class="line">        #获取老师姓名</span><br><span class="line">        ccc = response.xpath(<span class="string">'//*[@id="jsxxread"]/tr[1]/td[2]/text()'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        item[<span class="string">'name'</span>]=self.get_need_name(ccc)</span><br><span class="line">        #获取老师性别</span><br><span class="line">        ccc = response.xpath(<span class="string">'//*[@id="jsxxread"]/tr[1]/td[4]/text()'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        item[<span class="string">'gender'</span>]=self.get_need_name(ccc)</span><br><span class="line">        #获取老师职称</span><br><span class="line">        ccc = response.xpath(<span class="string">'//*[@id="jsxxread"]/tr[2]/td[2]/text()'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        item[<span class="string">'position'</span>] = self.get_need_name(ccc)</span><br><span class="line">        #获取老师所属教研室</span><br><span class="line">        ccc = response.xpath(<span class="string">'//*[@id="jsxxread"]/tr[2]/td[4]/text()'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        item[<span class="string">'type'</span>] = self.get_need_name(ccc)</span><br><span class="line">        #获取老师电子邮箱</span><br><span class="line">        ccc = response.xpath(<span class="string">'//*[@id="jsxxread"]/tr[3]/td[2]/text()'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        item[<span class="string">'email'</span>] = self.get_need_name(ccc)</span><br><span class="line">        #获取老师电话</span><br><span class="line">        ccc = response.xpath(<span class="string">'//*[@id="jsxxread"]/tr[3]/td[4]/text()'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        item[<span class="string">'phone'</span>] = self.get_need_name(ccc)</span><br><span class="line">        #获取老师办公地址</span><br><span class="line">        ccc = response.xpath(<span class="string">'//*[@id="jsxxread"]/tr[4]/td[2]/text()'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        item[<span class="string">'office_address'</span>] = self.get_need_name(ccc)</span><br><span class="line">        #获取老师教育背景</span><br><span class="line">        ccc=response.xpath(<span class="string">'//*[@id="jsxxread"]/tr[5]/td[2]/p/text()'</span>).extract()</span><br><span class="line">        item[<span class="string">'eduction_background'</span>]=<span class="string">'暂无描述'</span></span><br><span class="line">        <span class="keyword">if</span>(len(ccc)!=<span class="number">0</span>):</span><br><span class="line">            item[<span class="string">'eduction_background'</span>] = response.xpath(<span class="string">'//*[@id="jsxxread"]/tr[5]/td[2]/p/text()'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        #获取老师研究方向</span><br><span class="line">        ccc = response.xpath(<span class="string">'//*[@id="jsxxread"]/tr[6]/td[2]/text()'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        item[<span class="string">'search_derection'</span>] = self.get_need_name(ccc)</span><br><span class="line">        #获取老师描述</span><br><span class="line">        bbb=response.xpath(<span class="string">'//*[@id="jsxxread"]/tr[8]/td/div/div/span/text()'</span>).extract()</span><br><span class="line">        description=<span class="string">''</span></span><br><span class="line">        <span class="keyword">for</span> b <span class="keyword">in</span> bbb:</span><br><span class="line">            description=description+b</span><br><span class="line">        item[<span class="string">'description'</span>]=description</span><br><span class="line">        #获取老师图片连接地址</span><br><span class="line">        aaa=response.xpath(<span class="string">'//*[@id="div1"]//@src'</span>).extract()</span><br><span class="line">        item[<span class="string">'img_url'</span>]=<span class="string">'暂无图片'</span></span><br><span class="line">        <span class="keyword">if</span>(len(aaa)!=<span class="number">0</span>):</span><br><span class="line">            img_url= response.xpath(<span class="string">'//*[@id="div1"]//@src'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">            lists=re.split(r<span class="string">'../'</span>,img_url)</span><br><span class="line">            item[<span class="string">'img_url'</span>] = <span class="string">'http://xzy.kmust.edu.cn/'</span> + lists[<span class="number">2</span>] + <span class="string">'os/'</span> + lists[<span class="number">3</span>]</span><br><span class="line">        <span class="keyword">yield</span> item</span><br><span class="line">        #http://xzy.kmust.edu.cn/Servletphoto?path=teacherphotos/cwg001.jpg</span><br><span class="line">        #../../Servletphoto?path=teacherphotos/cwg001.jpg</span><br><span class="line">    def get_need_name(self,str):</span><br><span class="line">        lists = re.split(r<span class="string">'\r\n'</span>, str)</span><br><span class="line">        list=re.split(r<span class="string">' '</span>,lists[<span class="number">1</span>])</span><br><span class="line">        result = list[<span class="number">-1</span>]</span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><br>$\qquad$当然如果你只做到这里我们知识完成了对于Item实体的赋值，其实如果你没有声明一下的话，下一步Pipeline管道是永远不会得到要进一步处理的实体Item的。因此这就需要我们在setting.py文件里边加入如下声明，我要将Item传入哪个管道进行处理。（此处我们的项目因为比较小，所以只开设了一个管道，但如果项目管道多的时候，计算机就不知道我们要将Item实体传入到哪个管道了，所以此处非常重要！！）<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Configure item pipelines</span><br><span class="line"># See https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span><br><span class="line">ITEM_PIPELINES = &#123;</span><br><span class="line">   <span class="string">'coin_pics.pipelines.CoinPicsPipeline'</span>: <span class="number">300</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>代码中的管道数值，可以随意设置，一般设置为1~1000皆可。主要用于区分不同的管道（至少我是这么理解的）。</p>
<h2 id="4-3-在Pipeline实现对于爬取信息的保存"><a href="#4-3-在Pipeline实现对于爬取信息的保存" class="headerlink" title="4.3 在Pipeline实现对于爬取信息的保存"></a>4.3 在Pipeline实现对于爬取信息的保存</h2><p>$\qquad$在管道内得到Item实体传过来的信息以后，我们需要在对应的pipelines进行数据的进一步处理（比如保存，存入数据库等等），但如果是网页地址的话，可以按照需求选择是否传回之前的等待爬取的URL网址队列。<br>$\qquad$此处我们就直接将导师的图片直接下载到本地。pipelines.py代码如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line"># Define your item pipelines here</span><br><span class="line">#</span><br><span class="line"># Don't forget to add your pipeline to the ITEM_PIPELINES setting</span><br><span class="line"># See: https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span><br><span class="line"><span class="keyword">import</span> openpyxl</span><br><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> Workbook</span><br><span class="line"><span class="keyword">from</span> openpyxl.drawing <span class="keyword">import</span> image</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line">#存储到本地数据</span><br><span class="line">class CoinPicsPipeline(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        #创建excel,填写表头</span><br><span class="line">        self.wb = Workbook()</span><br><span class="line">        self.ws = self.wb.active</span><br><span class="line">        self.ws.append(['姓名', '性别', '职位', '所在院系','电子邮件','电话','办公地址','教育背景','研究方向','描述','图片'])  # 设置表头</span><br><span class="line">    def process_item(self, item, spider):</span><br><span class="line">        line = [item[<span class="string">'name'</span>], item[<span class="string">'gender'</span>], item[<span class="string">'position'</span>], item[<span class="string">'type'</span>],item[<span class="string">'email'</span>],item[<span class="string">'phone'</span>],item[<span class="string">'office_address'</span>],</span><br><span class="line">                item['eduction_background'],item['search_derection'],item['description'],item['img_url']]  # 把数据中每一项整理出来</span><br><span class="line">        self.ws.append(line)  # 将数据以行的形式添加到xlsx中</span><br><span class="line">        self.wb.save('kmust_teachers2.xlsx')  # 保存xlsx文件</span><br><span class="line"></span><br><span class="line">        #以下将图片爬取下来存储到本地</span><br><span class="line">        <span class="keyword">if</span>(item[<span class="string">'img_url'</span>]!=<span class="string">'暂无图片'</span>):</span><br><span class="line">            imgres = requests.get(item[<span class="string">'img_url'</span>])</span><br><span class="line">            <span class="keyword">with</span> open(r<span class="string">'K:/数据存档/scrapy项目/coin_pics/coin_pics/teachers/'</span>+str(item[<span class="string">'name'</span>])+<span class="string">'.jpg'</span>, <span class="string">"wb"</span>) <span class="keyword">as</span> f:</span><br><span class="line">                f.write(imgres.content)</span><br><span class="line">        <span class="keyword">return</span> item</span><br></pre></td></tr></table></figure><br>$\qquad$例如在这个管道中，我就讲导师的全部信息先存到一个excel表格中，并且又单独对各个导师的图片进行了下载。</p>
<h2 id="4-4-关于程序的执行"><a href="#4-4-关于程序的执行" class="headerlink" title="4.4 关于程序的执行"></a>4.4 关于程序的执行</h2><p>$\qquad$由于scrapy框架的特殊，我们在启动该爬虫时，还需要在同级目录下自己创建一个python文件来启动该爬虫模块。例如我自己创建了一个run.py文件，其内容如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># @Time : 2019/5/4 11:17 </span><br><span class="line"># @Author : kingback</span><br><span class="line"># @File : run.py </span><br><span class="line"># @Software: PyCharm</span><br><span class="line"><span class="keyword">from</span> scrapy <span class="keyword">import</span> cmdline</span><br><span class="line">cmdline.execute(<span class="string">"scrapy crawl coin_pic"</span>.split())</span><br></pre></td></tr></table></figure><br>$\qquad$我们需要调用cmd命令窗口来执行名字为“coin_pic”的爬虫。这个名字是在我们一开始要创建爬虫时必须为起的一个名字，就像是一个小孩的出生，你得给他起个名字一样。这样该命令一执行，就会启动我们的爬虫。</p>
<h1 id="5-程序运行截图"><a href="#5-程序运行截图" class="headerlink" title="5.程序运行截图"></a>5.程序运行截图</h1><p><img src="https://img-blog.csdnimg.cn/2019083017015758.gif" alt="在这里插入图片描述"></p>
<h1 id="6-最后如果有人想要此次爬取的资料（照片-excel），可以私聊我，看到后肯定会回复的。"><a href="#6-最后如果有人想要此次爬取的资料（照片-excel），可以私聊我，看到后肯定会回复的。" class="headerlink" title="6.最后如果有人想要此次爬取的资料（照片+excel），可以私聊我，看到后肯定会回复的。"></a>6.最后如果有人想要此次爬取的资料（照片+excel），可以私聊我，看到后肯定会回复的。</h1>
          
        
      
    </div>
	<div>
		
	</div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kingback2019.github.io/2019/11/25/MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%93%8D%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kingback">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/isme.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王延凯的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/25/MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%93%8D%E4%BD%9C/" itemprop="url">mysql数据库操作</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-25T16:52:21+08:00">
                2019-11-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C/" itemprop="url" rel="index">
                    <span itemprop="name">数据库操作</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-检查数据库版本"><a href="#1-检查数据库版本" class="headerlink" title="1. 检查数据库版本"></a>1. 检查数据库版本</h1><p>打开电脑cmd窗口，在其中输入mysql -uroot -p，如下所示：<br><img src="https://img-blog.csdnimg.cn/20190829215635637.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>$\qquad$ 如果你的电脑出现如图所示，说明你的电脑mysql已经配置成功了。如果没有成功，你可以去检查一下mysql是否已经安装成功，如果已经安装了，但是还是没有出现我的类似界面，检查一下是否将mysql安装路径配置到环境变量。</p>
<h1 id="2-查看已有数据库"><a href="#2-查看已有数据库" class="headerlink" title="2. 查看已有数据库"></a>2. 查看已有数据库</h1><p>$\qquad$ 使用命令show databases;将会得到目前已经创建的数据库目录。<br><img src="https://img-blog.csdnimg.cn/2019082922054779.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>在列表中就是显示出我的mysql中已经创建的数据库。</p>
<h1 id="3-创建数据库"><a href="#3-创建数据库" class="headerlink" title="3.创建数据库"></a>3.创建数据库</h1><p>$\qquad$ 使用命令create database test；来创建一个名叫test的数据库，并且使用show databases;查看是否创建成功。<br><img src="https://img-blog.csdnimg.cn/20190829221118386.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>可以看到新创建的test数据库已经建立。</p>
<h2 id="3-1-数据库的使用"><a href="#3-1-数据库的使用" class="headerlink" title="3.1 数据库的使用"></a>3.1 数据库的使用</h2><p>使用ues test；命令来操作刚刚创建的test数据库，并且使用命show tables；查看数据库中存在的表格。<br><img src="https://img-blog.csdnimg.cn/20190829221353796.png#pic_center" alt="在这里插入图片描述"></p>
<h3 id="3-1-1-创建表格"><a href="#3-1-1-创建表格" class="headerlink" title="3.1.1 创建表格"></a>3.1.1 创建表格</h3><p>如果我们想要创建一个表格的话，可以参照以下格式：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table tablename(</span><br><span class="line">			name varchar(<span class="number">20</span>),</span><br><span class="line">			age smallint,</span><br><span class="line">			gender varchar(<span class="number">1</span>),</span><br><span class="line">			<span class="class"><span class="keyword">class</span> <span class="title">varchar</span>(20),</span></span><br><span class="line"><span class="class">			<span class="title">id</span> <span class="title">smallint</span> <span class="title">unsigned</span> <span class="title">auto_increment</span> <span class="title">primary</span> <span class="title">key</span></span></span><br><span class="line"><span class="class">			)</span>;</span><br></pre></td></tr></table></figure><br> $\qquad$ 需要注意的是，在每个表格中都需要有一个主键，标拾命令为private key，并且我们在此表中还将id列设置为int类型的自增类型。这样就不必每次都插入id列了，而是由计算机直接生成。<br>执行之后则可以看到如下所示界面：<br><img src="https://img-blog.csdnimg.cn/20190829221526674.png#pic_center" alt="在这里插入图片描述"></p>
<h3 id="3-1-2-显示表格"><a href="#3-1-2-显示表格" class="headerlink" title="3.1.2 显示表格"></a>3.1.2 显示表格</h3><p>$\qquad$ 并且使用show columns from qust;命令查看该表包含的列。<br><img src="https://img-blog.csdnimg.cn/20190829222123275.png#pic_center" alt="在这里插入图片描述"><br>上图展示的就是我们刚刚建立的表的结构。</p>
<h2 id="3-2-数据表格的操作（增删查改）"><a href="#3-2-数据表格的操作（增删查改）" class="headerlink" title="3.2 数据表格的操作（增删查改）"></a>3.2 数据表格的操作（增删查改）</h2><p>$\qquad$ 其实在我看来，对于数据库简单的操作，一般都是对于数据库内容的增删查改使用的多，因此，此处我也就仅仅拿这几个方向来分别做一下实验。</p>
<h3 id="3-2-1-向表中插入数据"><a href="#3-2-1-向表中插入数据" class="headerlink" title="3.2.1 向表中插入数据"></a>3.2.1 向表中插入数据</h3><p>当我们想要向表格中插入几条数据的时候，其语法如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO table_name ( field1, field2,...fieldN ) VALUES ( value1, value2,...valueN );</span><br></pre></td></tr></table></figure><br>下图所示为我在数据库中插入数据信息：<br><img src="https://img-blog.csdnimg.cn/20190829223516603.png#pic_center" alt="在这里插入图片描述"></p>
<h3 id="3-2-2-查询表中数据"><a href="#3-2-2-查询表中数据" class="headerlink" title="3.2.2 查询表中数据"></a>3.2.2 查询表中数据</h3><p>查询数据表格中的数据，其语法如下所示：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT column_name,column_name FROM table_name [WHERE Clause] [LIMIT N][ OFFSET M]</span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190829223725712.png#pic_center" alt="在这里插入图片描述"></p>
<h3 id="3-2-3-更改表中某条数据"><a href="#3-2-3-更改表中某条数据" class="headerlink" title="3.2.3 更改表中某条数据"></a>3.2.3 更改表中某条数据</h3><p>更改数据库中某条件下的数据，其使用规范为：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE table_name SET field1=<span class="keyword">new</span>-value1, field2=<span class="keyword">new</span>-value2 [WHERE Clause]</span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190829223801220.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h3 id="3-2-4-删除表中某条数据"><a href="#3-2-4-删除表中某条数据" class="headerlink" title="3.2.4 删除表中某条数据"></a>3.2.4 删除表中某条数据</h3><p>在删除之前我先插入了一些数据如下所示：<br><img src="https://img-blog.csdnimg.cn/20190829224519951.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>执行删除操作，使用delete from qust where id=2;删除表中的刘淑贵<br>其使用规范为：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM table_name [WHERE Clause]</span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190829224537303.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="3-3-最大、最小、平均值查询"><a href="#3-3-最大、最小、平均值查询" class="headerlink" title="3.3 最大、最小、平均值查询"></a>3.3 最大、最小、平均值查询</h2><h3 id="3-3-1-查询表中工资最高值"><a href="#3-3-1-查询表中工资最高值" class="headerlink" title="3.3.1 查询表中工资最高值"></a>3.3.1 查询表中工资最高值</h3><p>查询表中数据最高值的使用规范：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select max(field1) <span class="keyword">as</span> maxvalue <span class="keyword">from</span> table1</span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190829225008900.png#pic_center" alt="在这里插入图片描述"></p>
<h3 id="3-3-2-查询表中工资最低值"><a href="#3-3-2-查询表中工资最低值" class="headerlink" title="3.3.2 查询表中工资最低值"></a>3.3.2 查询表中工资最低值</h3><p>查询最低工资，使用规范：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select min(field1) <span class="keyword">as</span> minvalue <span class="keyword">from</span> table1</span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190829224950651.png#pic_center" alt="在这里插入图片描述"></p>
<h3 id="3-3-3-查询表中工资平均值"><a href="#3-3-3-查询表中工资平均值" class="headerlink" title="3.3.3 查询表中工资平均值"></a>3.3.3 查询表中工资平均值</h3><p>查询平均工资：使用规范：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select avg(field1) <span class="keyword">as</span> avgvalue <span class="keyword">from</span> table1</span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190829225026426.png#pic_center" alt="在这里插入图片描述"></p>
<h2 id="3-4-排序"><a href="#3-4-排序" class="headerlink" title="3.4 排序"></a>3.4 排序</h2><p>按照工资高低进行排序，使用规范：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * <span class="keyword">from</span> table1 order by field1,field2 [desc]</span><br></pre></td></tr></table></figure><br>可以看到 添加desc 是对其工资从高到低进行排序，而如果不添加desc 则会对其进行升序排列。<br><img src="https://img-blog.csdnimg.cn/20190829230452213.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>

          
        
      
    </div>
	<div>
		
	</div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kingback2019.github.io/2019/11/25/jsp+servelt+mysql+tomcat%20%E5%9B%9B%E5%85%AD%E7%BA%A7%E5%8D%95%E8%AF%8D%E6%9F%A5%E8%AF%A2%E7%B3%BB%E7%BB%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kingback">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/isme.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王延凯的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/25/jsp+servelt+mysql+tomcat%20%E5%9B%9B%E5%85%AD%E7%BA%A7%E5%8D%95%E8%AF%8D%E6%9F%A5%E8%AF%A2%E7%B3%BB%E7%BB%9F/" itemprop="url">jsp+servelt+mysql+tomcat实现的四六级单词查询系统</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-25T16:48:06+08:00">
                2019-11-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="0-具体要求"><a href="#0-具体要求" class="headerlink" title="0.具体要求"></a>0.具体要求</h1><ol>
<li>要求建立大学四级、 六级词汇表（可从网上找来）放到 MYSQL 数据库中；</li>
<li>完善上周发布的网站，实现一个单词查询的页面，能够根据拼写、词性、难度范围（四级 or 六级）等信息查出所需要单词的释义。网页可参照金山词霸、汉典、有道等的风格；</li>
<li>反查：能依据释义内容，模糊查出对应的单词；</li>
<li>统计：实现对单词表中 a，b，c 到 z 开头单词个数的统计，结果以表格输出到网页上；</li>
<li>学习如何在网页上绘图：建议用 Jscharts 工具（从网上查吧，各位），将单词统计表作图， 成为单词统计曲线图或直方图；</li>
<li>在网页上显示gif动图、视频、音频；</li>
<li>将汉字字频表格查询出后显示在前端页面。</li>
</ol>
<h1 id="1-系统的工作流程以及原理"><a href="#1-系统的工作流程以及原理" class="headerlink" title="1. 系统的工作流程以及原理"></a>1. 系统的工作流程以及原理</h1><h2 id="1-1-Servelt介绍"><a href="#1-1-Servelt介绍" class="headerlink" title="1.1 Servelt介绍"></a>1.1 Servelt介绍</h2><p>首先简单介绍一下Servelt，它是运行在 Web 服务器或应用服务器上的程序，它是作为来自 Web 浏览器或其他 HTTP 客户端的请求和 HTTP 服务器上的数据库或应用程序之间的中间层。这个关系我们可以再下边的图中展示。<br><img src="https://img-blog.csdnimg.cn/20190831172633882.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><strong>再来说一下Servelt的作用以及任务吧</strong></p>
<ol>
<li>读取客户端（浏览器）发送的显式的数据。这包括网页上的 HTML 表单，或者也可以是来自 applet 或自定义的 HTTP 客户端程序的表单。</li>
<li>读取客户端（浏览器）发送的隐式的 HTTP 请求数据。这包括 cookies、媒体类型和浏览器能理解的压缩格式等等。</li>
<li>处理数据并生成结果。这个过程可能需要访问数据库，执行 RMI 或 CORBA 调用，调用 Web 服务，或者直接计算得出对应的响应。</li>
<li>发送显式的数据（即文档）到客户端（浏览器）。该文档的格式可以是多种多样的，包括文本文件（HTML 或 XML）、二进制文件（GIF 图像）、Excel 等。</li>
<li>发送隐式的 HTTP 响应到客户端（浏览器）。这包括告诉浏览器或其他客户端被返回的文档类型（例如 HTML），设置 cookies 和缓存参数，以及其他类似的任务。</li>
</ol>
<p><strong>另外，相比于CGL,servelt还有其以下几点优势：</strong></p>
<ol>
<li>性能明显更好。</li>
<li>Servlet 在 Web 服务器的地址空间内执行。这样它就没有必要再创建一个单独的进程来处理每个客户端请求。</li>
<li>Servlet 是独立于平台的，因为它们是用 Java 编写的。</li>
<li>服务器上的 Java 安全管理器执行了一系列限制，以保护服务器计算机上的资源。因此，Servlet 是可信的。</li>
<li>Java 类库的全部功能对 Servlet 来说都是可用的。它可以通过 sockets 和 RMI 机制与 applets、数据库或其他软件进行交互。<h2 id="1-2-jsp介绍"><a href="#1-2-jsp介绍" class="headerlink" title="1.2 jsp介绍"></a>1.2 jsp介绍</h2></li>
<li>JSP（全称Java Server Pages）是由 Sun Microsystems 公司倡导和许多公司参与共同创建的一种使软件开发者可以响应客户端请求，而动态生成 HTML、XML 或其他格式文档的Web网页的技术标准。</li>
<li>JSP 技术是以 Java 语言作为脚本语言的，JSP 网页为整个服务器端的 Java 库单元提供了一个接口来服务于HTTP的应用程序。JSP文件后缀名为 *.jsp 。</li>
<li>JSP开发的WEB应用可以跨平台使用，既可以运行在 Linux 上也能运行在 Windows 上。</li>
</ol>
<p>正因为Jsp是以java语言作为脚本语言的，所以，在整个系统的前端部分，由jsp页面来担任。</p>
<h2 id="1-3-Tomcat介绍"><a href="#1-3-Tomcat介绍" class="headerlink" title="1.3 Tomcat介绍"></a>1.3 Tomcat介绍</h2><p>$\qquad$开源小型web服务器 ，完全免费，主要用于中小型web项目，<strong>只支持Servlet和JSP 等少量javaee规范（就是JavaWeb编程接口）</strong>。也正因为tomcat对于java和servelt很好的嵌合，所以我们的此次系统选用了Tomcat服务器。</p>
<h1 id="2-功能实现"><a href="#2-功能实现" class="headerlink" title="2.功能实现"></a>2.功能实现</h1><h2 id="2-1-建立四六级单词的MYSQL表格"><a href="#2-1-建立四六级单词的MYSQL表格" class="headerlink" title="2.1 建立四六级单词的MYSQL表格"></a>2.1 建立四六级单词的MYSQL表格</h2><p>写了一个<strong>python</strong>程序，来执行将四级单词的txt表格存入mysql数据库<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"># @Time : 2019/6/21 15:29 </span><br><span class="line"># @Author : kingback</span><br><span class="line"># @File : CET4-MySQL.py </span><br><span class="line"># @Software: PyCharm</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"># 打开数据库连接</span><br><span class="line">db = pymysql.connect(host=<span class="string">"127.0.0.1"</span>,user=<span class="string">"root"</span>,  password=<span class="string">"123456"</span>,db=<span class="string">"words"</span>,charset = <span class="string">'utf8'</span>)</span><br><span class="line"></span><br><span class="line"># 使用 cursor() 方法创建一个游标对象 cursor</span><br><span class="line">cursor = db.cursor()</span><br><span class="line">filename = <span class="string">"C:/Users/kingback/Desktop/四六级但系/四级.txt"</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> open(filename, encoding=<span class="string">"utf-8"</span>):</span><br><span class="line">    hh = re.split(r<span class="string">"\t|\n"</span>, line)</span><br><span class="line">    english = hh[<span class="number">0</span>]</span><br><span class="line">    sent = hh[<span class="number">1</span>]</span><br><span class="line">    chinese = hh[<span class="number">2</span>]</span><br><span class="line">    level=<span class="string">"4"</span></span><br><span class="line">    #2、插入操作</span><br><span class="line">    sql=<span class="string">"insert into cet(english,chinese,sent,level) values('%s', '%s', '%s','%s')"</span></span><br><span class="line">    data=(english,chinese,sent,level)</span><br><span class="line">    cursor.execute(sql%data)   # execute也可以执行创建和修改库与表语句</span><br><span class="line">    print(<span class="string">"当前插入单词： "</span>,english)</span><br><span class="line">    db.commit()</span><br><span class="line"># 关闭数据库连接</span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure><br>为了区别四级单词和六级单词的区别，我又单独写了一个针对存取六级单词的<strong>Python</strong>文件，其内容如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># @Time : 2019/6/21 15:30 </span><br><span class="line"># @Author : kingback</span><br><span class="line"># @File : CET6-MySQL.py </span><br><span class="line"># @Software: PyCharm</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"># 打开数据库连接</span><br><span class="line">db = pymysql.connect(host=<span class="string">"127.0.0.1"</span>,user=<span class="string">"root"</span>,  password=<span class="string">"123456"</span>,db=<span class="string">"words"</span>,charset = <span class="string">'utf8'</span>)</span><br><span class="line"># 使用 cursor() 方法创建一个游标对象 cursor</span><br><span class="line">cursor = db.cursor()</span><br><span class="line">filename = <span class="string">"C:/Users/kingback/Desktop/四六级但系/六级.txt"</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> open(filename, encoding=<span class="string">"utf-8"</span>):</span><br><span class="line">    hh = re.split(r<span class="string">"\t|\n"</span>, line)</span><br><span class="line">    english = hh[<span class="number">0</span>]</span><br><span class="line">    sent = hh[<span class="number">1</span>]</span><br><span class="line">    chinese = hh[<span class="number">2</span>]</span><br><span class="line">    level=<span class="string">"6"</span></span><br><span class="line">    #2、插入操作</span><br><span class="line">    sql=<span class="string">"insert into cet(english,chinese,sent,level) values('%s', '%s', '%s','%s')"</span></span><br><span class="line">    data=(english,chinese,sent,level)</span><br><span class="line">    cursor.execute(sql%data)   # execute也可以执行创建和修改库与表语句</span><br><span class="line">    print(<span class="string">"当前插入单词： "</span>,english)</span><br><span class="line">    # db.commit()</span><br><span class="line"># 关闭数据库连接</span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure><br>接下来我展示一下四级单词存取的运行过程，<br><img src="https://img-blog.csdnimg.cn/20190831171422659.gif" alt="在这里插入图片描述"><br>因为六级的运行和四级的运行相差不多，于是我就仅展示了四级的。</p>
<h2 id="2-2-功能实现"><a href="#2-2-功能实现" class="headerlink" title="2.2  功能实现"></a>2.2  功能实现</h2><h3 id="2-2-1-整个项目组成"><a href="#2-2-1-整个项目组成" class="headerlink" title="2.2.1 整个项目组成"></a>2.2.1 整个项目组成</h3><p>整个项目是由 </p>
<ol>
<li>index.jsp (登陆主界面)、Chinese.jsp 、pic.jsp (使用jscharts画图界面)、data.jsp四个jsp页面</li>
<li>ChangeServelt (实际未使用)、DemoServelt (未用到，测试时使用)、TranslateServelt  (实现主体功能)三个servelt</li>
<li>一个DBoper类(数据库操作类)、Chinese_Frequent类（用来存储词频）以及一个Word类（用来存储单词）</li>
<li>一个Image文件夹(用来存放整个项目中用到的图片)</li>
<li>一个js文件夹（用来存放js文件）</li>
<li>一个video文件夹(用来存放动图、视频、音频)  组成。<br>整个的目录结构如下所示：<br><img src="https://img-blog.csdnimg.cn/20190831185755693.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><h3 id="2-2-2-介绍一下index-jsp文件内容"><a href="#2-2-2-介绍一下index-jsp文件内容" class="headerlink" title="2.2.2 介绍一下index.jsp文件内容"></a>2.2.2 介绍一下index.jsp文件内容</h3>这是程序运行后首先展示的界面，也是我们用户进行操作的主界面。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span> pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%@page <span class="keyword">import</span>=<span class="string">"java.lang.*,java.util.Enumeration"</span>%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.util.*"</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;%@taglib prefix=<span class="string">"c"</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">    &lt;title&gt;kingback首页&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">    &lt;link href="https:/</span><span class="regexp">/shared.ydstatic.com/im</span>ages/favicon.ico<span class="string">" type="</span>image/x-icon<span class="string">" rel="</span>shortcut icon<span class="string">"&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;div style="</span>text-align: center;<span class="string">"&gt;</span></span><br><span class="line"><span class="string">&lt;!-- gif --&gt;</span></span><br><span class="line"><span class="string">&lt;img src="</span>video/pkq.gif<span class="string">" width="</span><span class="number">320</span><span class="string">" height="</span><span class="number">240</span><span class="string">" alt="</span><span class="string">"&gt;</span></span><br><span class="line"><span class="string">&lt;!-- audio --&gt;</span></span><br><span class="line"><span class="string">&lt;audio src="</span>video/xs.mp3<span class="string">" controls="</span>controls<span class="string">"&gt;&lt;/audio&gt;</span></span><br><span class="line"><span class="string">&lt;!-- video --&gt;</span></span><br><span class="line"><span class="string">&lt;video width="</span><span class="number">320</span><span class="string">" height="</span><span class="number">240</span><span class="string">" controls&gt;</span></span><br><span class="line"><span class="string">    &lt;source src="</span>video/tf.mp4<span class="string">" type="</span>video/mp4<span class="string">"&gt;</span></span><br><span class="line"><span class="string">    &lt;source src="</span>video/tf.ogg<span class="string">" type="</span>video/ogg<span class="string">"&gt;</span></span><br><span class="line"><span class="string">    &lt;source src="</span>video/tf.webm<span class="string">" type="</span>video/webm<span class="string">"&gt;</span></span><br><span class="line"><span class="string">    &lt;object data="</span>video/tf.mp4<span class="string">" width="</span><span class="number">320</span><span class="string">" height="</span><span class="number">240</span><span class="string">"&gt;</span></span><br><span class="line"><span class="string">        &lt;embed src="</span>video/tf.swf<span class="string">" width="</span><span class="number">320</span><span class="string">" height="</span><span class="number">240</span><span class="string">"&gt;</span></span><br><span class="line"><span class="string">    &lt;/object&gt;</span></span><br><span class="line"><span class="string">&lt;/video&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;/div&gt;&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;div id="</span>margin1<span class="string">"&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;div id="</span>logo<span class="string">"&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="</span>logo<span class="string">"&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;div id="</span>margin2<span class="string">"&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;form action="</span>search<span class="string">" method="</span>post<span class="string">"&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="</span>border<span class="string">"&gt;</span></span><br><span class="line"><span class="string">        &lt;select name="</span>type<span class="string">" id="</span>selectType<span class="string">"&gt;</span></span><br><span class="line"><span class="string">            &lt;option value="</span>四级<span class="string">"&gt;四级&lt;/option&gt;</span></span><br><span class="line"><span class="string">            &lt;option value="</span>六级<span class="string">" selected id="</span>type<span class="string">"&gt;六级&lt;/option&gt;	//预选设置</span></span><br><span class="line"><span class="string">            &lt;option value="</span>汉译英<span class="string">" &gt;汉译英&lt;/option&gt;</span></span><br><span class="line"><span class="string">            &lt;option value="</span>英译汉<span class="string">" &gt;英译汉&lt;/option&gt;</span></span><br><span class="line"><span class="string">            &lt;option value="</span>统计<span class="string">"&gt;统计&lt;/option&gt;</span></span><br><span class="line"><span class="string">            &lt;option value="</span>字频<span class="string">"&gt;字频&lt;/option&gt;</span></span><br><span class="line"><span class="string">        &lt;/select&gt;</span></span><br><span class="line"><span class="string">        &lt;input type="</span>text<span class="string">" name="</span>inputWord<span class="string">" placeholder="</span>请输入单词<span class="string">" id="</span>translateContent<span class="string">" /&gt;</span></span><br><span class="line"><span class="string">        &lt;span id="</span>hnwBtn<span class="string">" class="</span>hand-write<span class="string">"&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;input type="</span>submit<span class="string">" value="</span>查 询<span class="string">" id="</span>btn<span class="string">"&gt;</span></span><br><span class="line"><span class="string">    &lt;input type="</span>reset<span class="string">" value="</span>重 置<span class="string">" id="</span>btn1<span class="string">"&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>$\qquad$很多人或许会想，前台用户输入的数据，后台是怎么获得的呢，因为jsp很好的嵌合了java以及servelt所以,在刚才的主界面中我们将需要传递给后台的数据放在这个 <strong>form</strong> 内，当用户点击查询按钮的时候，该动作就称之为 <strong>search</strong> ,并且将其中包括的内容传递给后台的 <strong>servelt</strong>。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=&quot;search&quot; method=&quot;post&quot;&gt;</span><br><span class="line">......</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="2-2-4-介绍TranslateServelt-java"><a href="#2-2-4-介绍TranslateServelt-java" class="headerlink" title="2.2.4 介绍TranslateServelt.java"></a>2.2.4 介绍TranslateServelt.java</h3><p>$\qquad$接下来我就来讲一下，前台提交过来的action <strong>search</strong>是怎么和后台配对的。请注意看该java文件的开头的这句话<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@WebServlet(<span class="string">"/search"</span>)</span><br></pre></td></tr></table></figure><br>$\qquad$我们会发现前台提交的<strong>search</strong>动作通过这句话找到了与它配对的servelt,也就是说前台用户输入的数据已经成功传到后台来处理。 然后再在这个java文件中执行查询数据库的操作。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.jws.WebService;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Array;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created with IntelliJ IDEA.</span></span><br><span class="line"><span class="comment"> * User: kingback</span></span><br><span class="line"><span class="comment"> * Author:king@王延凯</span></span><br><span class="line"><span class="comment"> * Date: 2019/6/17</span></span><br><span class="line"><span class="comment"> * Time: 14:14</span></span><br><span class="line"><span class="comment"> * Description: No Description</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">@WebServlet(<span class="string">"/search"</span>)</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">TranslateServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="comment">//idea快速重写父类方法，使用快捷键ctrl+O选择需要重写的方法即可</span></span><br><span class="line">    @Override</span><br><span class="line">    protected <span class="keyword">void</span> doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line"><span class="comment">//        super.doPost(request, response);</span></span><br><span class="line">        <span class="comment">//设置编码格式</span></span><br><span class="line">        request.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset = utf-8"</span>);</span><br><span class="line">        <span class="comment">//获取选择的类别</span></span><br><span class="line">        <span class="built_in">String</span> type=request.getParameter(<span class="string">"type"</span>);</span><br><span class="line">        <span class="comment">//获取用户输入的单词或汉字</span></span><br><span class="line">        <span class="built_in">String</span> inputWord=request.getParameter(<span class="string">"inputWord"</span>);</span><br><span class="line">        <span class="comment">//验证输出</span></span><br><span class="line">        <span class="comment">// System.out.println(inputWord);</span></span><br><span class="line">        <span class="comment">// System.out.println("当前选项为："+type);</span></span><br><span class="line">        <span class="comment">// System.out.println(type.equals("六级"));</span></span><br><span class="line">        <span class="comment">//根据不同的type选择不同的sql语句</span></span><br><span class="line">        <span class="comment">//汉译英,支持模糊搜索</span></span><br><span class="line">        <span class="built_in">String</span> sql=<span class="string">"select * from cet where chinese like "</span>+<span class="string">"'%"</span>+inputWord+<span class="string">"%'"</span>;</span><br><span class="line">        <span class="comment">//英译汉</span></span><br><span class="line">        <span class="built_in">String</span> sql1=<span class="string">"select * from cet where english="</span>+<span class="string">"'"</span>+inputWord+<span class="string">"'"</span>;</span><br><span class="line">        <span class="comment">//四级</span></span><br><span class="line">        <span class="built_in">String</span> CET_4=<span class="string">"select * from cet where level="</span>+<span class="string">"'4'"</span>;</span><br><span class="line">        <span class="comment">//六级</span></span><br><span class="line">        <span class="built_in">String</span> CET_6=<span class="string">"select * from cet where level="</span>+<span class="string">"'6'"</span>;</span><br><span class="line">        <span class="comment">//统计</span></span><br><span class="line">        <span class="built_in">String</span> count=<span class="string">""</span>;</span><br><span class="line">        <span class="comment">//字频</span></span><br><span class="line">        <span class="built_in">String</span> sql_frequent=<span class="string">"select * from chinese_word where pin like "</span>+<span class="string">"'"</span>+inputWord+<span class="string">"%'"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//初始化连接变量,用来存储数据</span></span><br><span class="line">        <span class="built_in">String</span> server=<span class="string">"localhost"</span>;</span><br><span class="line">        <span class="built_in">String</span> dbname=<span class="string">"words"</span>;</span><br><span class="line">        <span class="built_in">String</span> dbuser=<span class="string">"root"</span>;</span><br><span class="line">        <span class="built_in">String</span> dbpwd=<span class="string">"123456"</span>;</span><br><span class="line">        <span class="comment">//创建一个Word链表来承接数据库查询的数据</span></span><br><span class="line">        List&lt;Word&gt; wordList1=<span class="keyword">new</span> ArrayList();</span><br><span class="line">        <span class="comment">//创建一个Chinese_Frequent链表来承接数据查询的数据</span></span><br><span class="line">        List&lt;Chinese_Frequent&gt; wordList2=<span class="keyword">new</span> ArrayList();</span><br><span class="line">        <span class="comment">//实例化一个数据库连接类</span></span><br><span class="line">        DBoper dBoper=<span class="keyword">new</span> DBoper();</span><br><span class="line">        <span class="comment">//链接数据库</span></span><br><span class="line">        dBoper.getConn(server,dbname,dbuser,dbpwd);</span><br><span class="line">        <span class="comment">//初始化数据库结果参数</span></span><br><span class="line">        ResultSet rs = <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//执行sql查询</span></span><br><span class="line">        <span class="keyword">if</span>(type.equals(<span class="string">"四级"</span>))&#123;</span><br><span class="line">            <span class="comment">// System.out.println("当前执行到四级！");</span></span><br><span class="line">            <span class="comment">//执行sql语句</span></span><br><span class="line">            rs=dBoper.executeQuery(CET_4,<span class="literal">null</span>);</span><br><span class="line">            <span class="comment">//调用DataDeal方法，开始对数据进行操作</span></span><br><span class="line">            DataDeal(rs,wordList1,request,response,dBoper);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(type.equals(<span class="string">"六级"</span>))&#123;</span><br><span class="line">            <span class="comment">// System.out.println("当前执行到六级！");</span></span><br><span class="line">            <span class="comment">//执行sql语句</span></span><br><span class="line">            rs=dBoper.executeQuery(CET_6,<span class="literal">null</span>);</span><br><span class="line">            <span class="comment">//开始对数据进行操作</span></span><br><span class="line">            DataDeal(rs,wordList1,request,response,dBoper);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(type.equals(<span class="string">"英译汉"</span>))&#123;</span><br><span class="line">            <span class="comment">//执行sql语句</span></span><br><span class="line">            rs=dBoper.executeQuery(sql1,<span class="literal">null</span>);</span><br><span class="line">            <span class="comment">//开始对数据进行操作</span></span><br><span class="line">            DataDeal(rs,wordList1,request,response,dBoper);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//汉译英处理函数</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(type.equals(<span class="string">"汉译英"</span>)) &#123;</span><br><span class="line">            <span class="comment">//执行sql语句</span></span><br><span class="line">            rs=dBoper.executeQuery(sql,<span class="literal">null</span>);</span><br><span class="line">            <span class="comment">//开始对数据进行操作</span></span><br><span class="line">            DataDeal(rs,wordList1,request,response,dBoper);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//统计处理函数</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(type.equals(<span class="string">"统计"</span>)) &#123;</span><br><span class="line">            <span class="comment">//开始对数据进行操作</span></span><br><span class="line"></span><br><span class="line">            Account(request,response,dBoper);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (type.equals(<span class="string">"字频"</span>))&#123;</span><br><span class="line">            rs=dBoper.executeQuery(sql_frequent,<span class="literal">null</span>);</span><br><span class="line">            System.out.println(sql_frequent);</span><br><span class="line">            Frequent(wordList2,dBoper,request,response,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected <span class="keyword">void</span> doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">        <span class="keyword">super</span>.doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public <span class="keyword">static</span> <span class="keyword">void</span> DataDeal(ResultSet resultSet,List&lt;Word&gt; wordList1,HttpServletRequest request, HttpServletResponse response,DBoper dBoper)&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//将数据存入wordList1里边</span></span><br><span class="line">            <span class="keyword">while</span> (resultSet.next())&#123;</span><br><span class="line">                <span class="comment">//获取数据库中查询到的数据</span></span><br><span class="line">                <span class="built_in">String</span> type2=resultSet.getString(<span class="string">"english"</span>);</span><br><span class="line">                <span class="built_in">String</span> word2=resultSet.getString(<span class="string">"chinese"</span>);</span><br><span class="line">                <span class="built_in">String</span> sent2=resultSet.getString(<span class="string">"sent"</span>);</span><br><span class="line">                <span class="built_in">String</span> level2=resultSet.getString(<span class="string">"level"</span>);</span><br><span class="line">                Word word=<span class="keyword">new</span> Word(type2,word2,sent2,level2);</span><br><span class="line">                <span class="comment">//添加至wordList1列表</span></span><br><span class="line">                wordList1.add(word);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//调用数据库连接类的方法，关闭数据库连接</span></span><br><span class="line">            dBoper.closeAll();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//利用request将WordList传送到前端页面</span></span><br><span class="line">            <span class="keyword">if</span>(wordList1.size()==<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="comment">//如果没有读取到数据，返回报错</span></span><br><span class="line">                response.sendRedirect(<span class="string">"success.jsp?error=yes"</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//使用request封装数据</span></span><br><span class="line">                request.setAttribute(<span class="string">"wordList"</span>, wordList1);</span><br><span class="line">                System.out.println(wordList1);</span><br><span class="line">                <span class="comment">//传送至前台jsp网页</span></span><br><span class="line">                request.getRequestDispatcher(<span class="string">"data.jsp"</span>).forward(request, response);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//异常处理</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ServletException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public <span class="keyword">static</span> <span class="keyword">void</span> Account(HttpServletRequest request, HttpServletResponse response,DBoper dBoper) &#123;</span><br><span class="line">        <span class="comment">//用来存储单词个数</span></span><br><span class="line">        int[] nums=<span class="keyword">new</span> int[<span class="number">26</span>];</span><br><span class="line">        <span class="built_in">String</span> character=<span class="string">"a.b.c.d.e.f.g.h.i.g.k.l.m.n.o.p.q.r.s.t.u.v.w.x.y.z"</span>;</span><br><span class="line">        <span class="comment">//拆分字符串</span></span><br><span class="line">        <span class="built_in">String</span> characters[] = character.split(<span class="string">" |\\."</span>);</span><br><span class="line">        ResultSet rs = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">for</span> (int i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="built_in">String</span> sql=<span class="string">"select * from cet where english like "</span>+<span class="string">"'%"</span>+characters[i]+<span class="string">"%'"</span>;</span><br><span class="line"><span class="comment">//                System.out.println(sql);</span></span><br><span class="line">                rs=dBoper.executeQuery(sql,<span class="literal">null</span>);</span><br><span class="line">                <span class="comment">//将数据存入wordList1里边</span></span><br><span class="line">                <span class="keyword">while</span> (rs.next())&#123;</span><br><span class="line">                    nums[i]++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//调用数据库连接类的方法，关闭数据库连接</span></span><br><span class="line">        dBoper.closeAll();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//已经统计到数据</span></span><br><span class="line">        <span class="keyword">for</span> (int i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++) &#123;</span><br><span class="line">            characters[i]=characters[i]+<span class="string">","</span>+nums[i];</span><br><span class="line"><span class="comment">//            System.out.println(nums[i]);</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//使用request封装数据</span></span><br><span class="line">            request.setAttribute(<span class="string">"nums"</span>, nums);</span><br><span class="line">            request.setAttribute(<span class="string">"characters"</span>, characters);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//System.out.println(nums);</span></span><br><span class="line">            <span class="comment">//传送至前台jsp网页</span></span><br><span class="line">            request.getRequestDispatcher(<span class="string">"pic.jsp"</span>).forward(request, response);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ServletException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public <span class="keyword">static</span> <span class="keyword">void</span> Frequent(List&lt;Chinese_Frequent&gt; wordList2,DBoper dBoper,HttpServletRequest request, HttpServletResponse response,ResultSet rs)&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                <span class="comment">//获取数据库中查询到的数据</span></span><br><span class="line">                <span class="built_in">String</span> chinese = rs.getString(<span class="string">"words"</span>);</span><br><span class="line">                <span class="built_in">String</span> counts = rs.getString(<span class="string">"counts"</span>);</span><br><span class="line">                <span class="built_in">String</span> pin = rs.getString(<span class="string">"pin"</span>);</span><br><span class="line">                Chinese_Frequent CF = <span class="keyword">new</span> Chinese_Frequent(chinese, counts, pin);</span><br><span class="line">                wordList2.add(CF);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//调用数据库连接类的方法，关闭数据库连接</span></span><br><span class="line">            dBoper.closeAll();</span><br><span class="line"></span><br><span class="line">                <span class="comment">//利用request将WordList传送到前端页面</span></span><br><span class="line">            <span class="keyword">if</span>(wordList2.size()==<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="comment">//如果没有读取到数据，返回报错</span></span><br><span class="line">                response.sendRedirect(<span class="string">"success.jsp?error=yes"</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//使用request封装数据</span></span><br><span class="line">                request.setAttribute(<span class="string">"wordList2"</span>, wordList2);</span><br><span class="line">                System.out.println(wordList2);</span><br><span class="line">                <span class="comment">//传送至前台jsp网页</span></span><br><span class="line">                request.getRequestDispatcher(<span class="string">"chinese.jsp"</span>).forward(request, response);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ServletException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="2-2-5-后台数据返回前台"><a href="#2-2-5-后台数据返回前台" class="headerlink" title="2.2.5 后台数据返回前台"></a>2.2.5 后台数据返回前台</h3><p>$\qquad$执行完前边的步骤，我们或许会发现，虽然我们将数据传到了后台，并且进行了查询数据库等一系列操作，但是我们又如何将后台的数据传输到前台呢，这里我们需要注意一点就是，因为在这里可能会查询到很多结果，所以一条一条数据的往前台传显得不是那么显示，例如我们查询单词，每一个单词所涵盖的信息我们可以称之为一个<strong>Word 类</strong>实例化出来的对象，如果我们将这些一个一个的Word对象封装成一个集合<strong>WordList</strong>，传递给前台，那样岂不更容易一些呢。于是我们根据需要就构建了一个Word类，其代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Created with IntelliJ IDEA.</span><br><span class="line"> * User: kingback</span><br><span class="line"> * Author:king@王延凯</span><br><span class="line"> * Date: 2019/6/15</span><br><span class="line"> * Time: 14:14</span><br><span class="line"> * Description: No Description</span><br><span class="line"> */</span><br><span class="line">public class Word &#123;</span><br><span class="line">    public String getEnglish() &#123;</span><br><span class="line">        return english;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setEnglish(String english) &#123;</span><br><span class="line">        this.english = english;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getChinese() &#123;</span><br><span class="line">        return chinese;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setChinese(String chinese) &#123;</span><br><span class="line">        this.chinese = chinese;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getSent() &#123;</span><br><span class="line">        return sent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setSent(String sent) &#123;</span><br><span class="line">        this.sent = sent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getLevel() &#123;</span><br><span class="line">        return level;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setLevel(String level) &#123;</span><br><span class="line">        this.level = level;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //快捷键 Alt+Insert</span><br><span class="line">    //get set方法</span><br><span class="line"></span><br><span class="line">    private String english;</span><br><span class="line">    private String chinese;</span><br><span class="line">    private String sent;</span><br><span class="line">    private String level;</span><br><span class="line"></span><br><span class="line">    public Word(String english,String chinese,String sent,String level)&#123;</span><br><span class="line">    super();</span><br><span class="line">    this.english=english;</span><br><span class="line">    this.sent=sent;</span><br><span class="line">    this.chinese=chinese;</span><br><span class="line">    this.level=level;</span><br><span class="line">    &#125;</span><br><span class="line">    public Word()&#123;</span><br><span class="line">        super();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>$\qquad$接下来我们再来讨论将后台数据反传给前台的方法和策略，前边我们已经说到了封装为WordList，而前台又是怎么得到的呢，我们可以看到在前边讲到的 <strong>TranteServelt</strong> 里边的最后有这么几句代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用request封装数据</span></span><br><span class="line">      request.setAttribute(<span class="string">"wordList2"</span>, wordList2);</span><br><span class="line">      System.out.println(wordList2);</span><br><span class="line">      <span class="comment">//传送至前台jsp网页</span></span><br><span class="line">       request.getRequestDispatcher(<span class="string">"chinese.jsp"</span>).forward(request, response);</span><br></pre></td></tr></table></figure>
<p>$\qquad$到了这里我们似乎一切都明白了，如果当程序执行到这部分代码的时候，他就会将它之前封装好的<strong>wordList</strong>数据传递到<strong>chinese.jsp</strong>页面。</p>
<h3 id="2-2-6-前台接收后台的数据并处理，显示在前端页面。"><a href="#2-2-6-前台接收后台的数据并处理，显示在前端页面。" class="headerlink" title="2.2.6 前台接收后台的数据并处理，显示在前端页面。"></a>2.2.6 前台接收后台的数据并处理，显示在前端页面。</h3><p>$\qquad$在前边我们已经讲到了，传递到前台的<strong>WordLis</strong>t在对应的jsp界面里边是这样被识别并一个个拆解为Word的。下面我们就以<strong>chinese.jsp</strong>为例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: kingback</span><br><span class="line">  Date: 2019/8/4</span><br><span class="line">  Time: 22:20</span><br><span class="line">  To change this template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;%@taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</span><br><span class="line">&lt;%@ taglib prefix=&quot;fn&quot; uri=&quot;http://java.sun.com/jsp/jstl/functions&quot;%&gt;</span><br><span class="line">&lt;%@ page isELIgnored=&quot;false&quot; %&gt;</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;词频查询&lt;/title&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;link href=&quot;https://shared.ydstatic.com/images/favicon.ico&quot; type=&quot;image/x-icon&quot; rel=&quot;shortcut icon&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div id=&quot;margin1&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div id=&quot;logo&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;logo&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div id=&quot;margin2&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;form action=&quot;search&quot; method=&quot;post&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;border&quot;&gt;</span><br><span class="line">        &lt;select name=&quot;type&quot; id=&quot;selectType&quot;&gt;</span><br><span class="line">            &lt;option value=&quot;四级&quot;&gt;四级&lt;/option&gt;</span><br><span class="line">            &lt;option value=&quot;六级&quot; selected id=&quot;type&quot;&gt;六级&lt;/option&gt;	//预选设置</span><br><span class="line">            &lt;option value=&quot;汉译英&quot; &gt;汉译英&lt;/option&gt;</span><br><span class="line">            &lt;option value=&quot;英译汉&quot; &gt;英译汉&lt;/option&gt;</span><br><span class="line">            &lt;option value=&quot;统计&quot; &gt;统计&lt;/option&gt;</span><br><span class="line">            &lt;option value=&quot;字频&quot;&gt;字频&lt;/option&gt;</span><br><span class="line">        &lt;/select&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; name=&quot;inputWord&quot; placeholder=&quot;请输入单词或汉字&quot; id=&quot;translateContent&quot; /&gt;</span><br><span class="line">        &lt;span id=&quot;hnwBtn&quot; class=&quot;hand-write&quot;&gt;&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;input type=&quot;submit&quot; value=&quot;查 询&quot; id=&quot;btn&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;reset&quot; value=&quot;重 置&quot; id=&quot;btn1&quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;table class=&quot;hovertable&quot;&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;th&gt;汉字&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;个数&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;拼音&lt;/th&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;c:forEach items=&quot;$&#123;wordList2&#125;&quot; var=&quot;CH&quot;&gt;</span><br><span class="line">        &lt;form action=&quot;test1&quot; method=&quot;post&quot;&gt;</span><br><span class="line">            &lt;tr onmouseover=&quot;this.style.backgroundColor=&apos;#ffff66&apos;;&quot; onmouseout=&quot;this.style.backgroundColor=&apos;#d4e3e5&apos;;&quot;&gt;</span><br><span class="line">                &lt;td name=&quot;china&quot;&gt;&lt;c:out value=&quot;$&#123;CH.chinese&#125;&quot;/&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;c:out value=&quot;$&#123;CH.counts&#125;&quot;/&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;c:out value=&quot;$&#123;CH.pin&#125;&quot;/&gt;&lt;/td&gt;</span><br><span class="line">                &lt;%--&lt;td&gt;--%&gt;</span><br><span class="line">                    &lt;%--&lt;input type=&quot;submit&quot; value=&quot;修改&quot; id=&quot;btn2&quot; name=&quot;test&quot;&gt;--%&gt;</span><br><span class="line">                &lt;%--&lt;/td&gt;--%&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    &lt;/c:forEach&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><br>$\qquad$如果你观察仔细的话，或许会在以上代码的后半部分发现这句话：<strong><c:forEach items="${wordList2}" var="CH"></strong>，我们很容易就会想到我们是通过这句话来接收后台传过来的数据的，并将Wordlist拆解为一个个Word显示在页面。</p>
<h3 id="2-2-7-其它文件"><a href="#2-2-7-其它文件" class="headerlink" title="2.2.7 其它文件"></a>2.2.7 其它文件</h3><p>$\qquad$到目前为止，主体流程我已经走完了，只是含有几个文件没有展示出来，一个是数据库操作类DBoper(这个类在我之前发布的博客中是有的，都是一样的内容)、一个就是Chinese_Frequent.java ,其实该文件和Word的作用差不多，都是为了承接在数据库中查询到的结果，然后封装成List类型的传递给前台。<br>以下我展示的代码内容为 <strong>Chinese_Frequent.java</strong> 的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Created with IntelliJ IDEA.</span><br><span class="line"> * User: kingback</span><br><span class="line"> * Author:king@王延凯</span><br><span class="line"> * Date: 2019/8/4</span><br><span class="line"> * Time: 22:53</span><br><span class="line"> * Description: No Description</span><br><span class="line"> */</span><br><span class="line">public class Chinese_Frequent &#123;</span><br><span class="line">    public String getChinese() &#123;</span><br><span class="line">        return Chinese;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setChinese(String chinese) &#123;</span><br><span class="line">        Chinese = chinese;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getCounts() &#123;</span><br><span class="line">        return Counts;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setCounts(String counts) &#123;</span><br><span class="line">        Counts = counts;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getPin() &#123;</span><br><span class="line">        return Pin;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setPin(String pin) &#123;</span><br><span class="line">        Pin = pin;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private String Chinese;</span><br><span class="line">    private String Counts;</span><br><span class="line">    private String Pin;</span><br><span class="line"></span><br><span class="line">    public Chinese_Frequent(String Chinese,String Counts,String Pin)&#123;</span><br><span class="line">        super();</span><br><span class="line">        this.Chinese=Chinese;</span><br><span class="line">        this.Counts=Counts;</span><br><span class="line">        this.Pin=Pin;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>$\qquad$至于还有几个jsp页面的代码没有展示出来，我这么告诉你吧，其实这几个jsp页面的代码基本上都是也一样的。但如果你非得要全部的代码的话，可以私聊我，当我看到，我定会免费赠送所有资料。</p>
<h1 id="3-运行结果"><a href="#3-运行结果" class="headerlink" title="3.运行结果"></a>3.运行结果</h1><p><img src="https://img-blog.csdnimg.cn/2019083120444126.gif#pic_center" alt="在这里插入图片描述"></p>

          
        
      
    </div>
	<div>
		
	</div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kingback2019.github.io/2019/11/24/%E6%91%86%E8%84%B1%E9%99%90%E5%88%B6%E4%BA%94%E6%AD%A5%E8%B5%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kingback">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/isme.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王延凯的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/24/%E6%91%86%E8%84%B1%E9%99%90%E5%88%B6%E4%BA%94%E6%AD%A5%E8%B5%B0/" itemprop="url">摆脱限制五步走</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-24T12:20:44+08:00">
                2019-11-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B7%A5%E5%85%B7%E7%B1%BB/" itemprop="url" rel="index">
                    <span itemprop="name">工具类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-摆脱某雷，从此工作人员站起来了"><a href="#1-摆脱某雷，从此工作人员站起来了" class="headerlink" title="1.摆脱某雷，从此工作人员站起来了"></a>1.摆脱某雷，从此工作人员站起来了</h1><p>使用chrome插件IDM <a href="http://www.internetdownloadmanager.com/download.html" target="_blank" rel="noopener">点击此处进入下载</a>，然后再点击下载即可。<br><img src="https://img-blog.csdnimg.cn/20191007212030413.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>下载之后，直接点击安装即可，这个软件最好还是直接按照它的提示安装到C盘,否则则会在运行的时候报错。<br>之后关闭浏览器，再次打开浏览器即可添加成功。之后在每打开一个视频的时候，都会自动出现这个下载图标。如下所示：<img src="https://img-blog.csdnimg.cn/20191007214414368.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>点击图标，就会出现让你选择要下载的视频分辨率：<br><img src="https://img-blog.csdnimg.cn/20191007214618724.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>可以看到速度还是很快的：<br><img src="https://img-blog.csdnimg.cn/20191007221515885.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h1 id="2-摆脱某盘，从此开发人员富起来了"><a href="#2-摆脱某盘，从此开发人员富起来了" class="headerlink" title="2.摆脱某盘，从此开发人员富起来了"></a>2.摆脱某盘，从此开发人员富起来了</h1><p>接下来要介绍的一个就是大名鼎鼎的<strong>pandownload</strong>了，<a href="http://pandownload.com/" target="_blank" rel="noopener">其下载链接</a>，这个版本已经包括了手机、电脑各个版本，已经非常顺手了。<br>该软件实现了多账号登陆以及无限速，甚至内部还集成了16路的内部加速器。总之体验感超棒。<br>接下来就要介绍一下其使用流程了：在使用过程中如果下载的文件为现在以登录账号的，则就需要注意：<br><strong>先把文件分享出来，再使用分享链接下载即可</strong>，<br><strong>先把文件分享出来，再使用分享链接下载即可</strong>，<br><strong>先把文件分享出来，再使用分享链接下载即可</strong>。<br>重要的事情说三遍。<br>然后你就可以尽情享受了。<br><img src="https://img-blog.csdnimg.cn/20191007215625509.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>以下附上演示：<br><img src="https://img-blog.csdnimg.cn/20191007215901630.gif#pic_center" alt="在这里插入图片描述"></p>
<h1 id="3-从此开发人员strong起来了"><a href="#3-从此开发人员strong起来了" class="headerlink" title="3.从此开发人员strong起来了"></a>3.从此开发人员strong起来了</h1><p>些许内容不便透露，有需要的可以私信我。看到必回。(希望理解)。</p>
<h1 id="4-云盘精灵（网盘文件搜索）—飞起来了"><a href="#4-云盘精灵（网盘文件搜索）—飞起来了" class="headerlink" title="4.云盘精灵（网盘文件搜索）—飞起来了"></a>4.云盘精灵（网盘文件搜索）—飞起来了</h1><p>其官方网址：<a href="https://www.yunpanjingling.com/" target="_blank" rel="noopener">点击链入</a><br>操作很简单，注册个账号，然后在里边输入需要的文件即可。<br><img src="https://img-blog.csdnimg.cn/20191007220705173.gif#pic_center" alt="在这里插入图片描述"></p>
<h1 id="5-摆脱百度文库下载限制"><a href="#5-摆脱百度文库下载限制" class="headerlink" title="5.摆脱百度文库下载限制"></a>5.摆脱百度文库下载限制</h1><p>在下载框输入下载网页即可完成下载。其下载器的下载我已保存至网盘，直接使用即可。<br>其连接如下：<br>链接：<a href="https://pan.baidu.com/s/1YpSNfoLDf2RuADl4z4BYyg" target="_blank" rel="noopener">https://pan.baidu.com/s/1YpSNfoLDf2RuADl4z4BYyg</a><br>提取码：qvhy </p>
<p><img src="https://img-blog.csdnimg.cn/20191123172348282.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>

          
        
      
    </div>
	<div>
		
	</div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kingback2019.github.io/2019/11/19/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86matlab%E8%AE%AD%E7%BB%83%E7%AC%AC%E3%80%902%E3%80%91%E5%BC%B9--%E7%A6%BB%E6%95%A3%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E7%9A%84%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2%EF%BC%88DTFT%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kingback">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/isme.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王延凯的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/19/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86matlab%E8%AE%AD%E7%BB%83%E7%AC%AC%E3%80%902%E3%80%91%E5%BC%B9--%E7%A6%BB%E6%95%A3%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E7%9A%84%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2%EF%BC%88DTFT%EF%BC%89/" itemprop="url">数字信号处理matlab训练第【2】弹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-19T11:57:14+08:00">
                2019-11-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86/" itemprop="url" rel="index">
                    <span itemprop="name">数字信号处理</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-实验要求"><a href="#1-实验要求" class="headerlink" title="1.实验要求"></a>1.实验要求</h1><p>已知函数$x(t)=sinc(t)，-2\pi \leq t \leq2\pi$,求其时域抽样函数$x(n)$,并且画出$x(n)$的离散时间序列的傅里叶变换(DTFT)下的幅频响应和相频响应。最后根据所画图形，得出结论。</p>
<h1 id="2-实现原理"><a href="#2-实现原理" class="headerlink" title="2.实现原理"></a>2.实现原理</h1><p>根据离散序列的傅里叶变换公式：</p>
<script type="math/tex; mode=display">
X(e^{j\omega})=\sum_{n=-\infty}^{\infty}x(n)e^{-j\omega n}</script><p>其中$\omega \in[-2\pi,2\pi]$,并以$\pi/100$作为取样间隔。</p>
<h1 id="3-matlab实现"><a href="#3-matlab实现" class="headerlink" title="3.matlab实现"></a>3.matlab实现</h1><p>我们依据对上边的式子的理解，使用matlab来编写，首先我们先画出该函数的原始图像，第二个图显示的是其抽样图像，第三个第四个分别为其DTFT变换后的幅频特性图和相频特性图。<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%%开始实现离散时间序列DTFT，以sinc函数为例。</span></span><br><span class="line">clc;</span><br><span class="line">clear;</span><br><span class="line"><span class="comment">%清除指令和变量</span></span><br><span class="line">set(gcf,<span class="string">'position'</span>,[<span class="number">180</span>,<span class="number">160</span>,<span class="number">900</span>,<span class="number">550</span>]);</span><br><span class="line"><span class="comment">%设置图片显示位置为（180，160）</span></span><br><span class="line"><span class="comment">%设置图片大小为（900，550）</span></span><br><span class="line">subplot(<span class="number">221</span>)</span><br><span class="line">N1=<span class="number">200</span>;</span><br><span class="line">step=<span class="number">4</span>*<span class="built_in">pi</span>/N1;</span><br><span class="line">t=<span class="number">-2</span>*<span class="built_in">pi</span>:step:<span class="number">2</span>*<span class="built_in">pi</span>;</span><br><span class="line"><span class="comment">%对t在-2pi到2pi之间平分为100份</span></span><br><span class="line">y=sinc(t);</span><br><span class="line"><span class="built_in">plot</span>(t,y)</span><br><span class="line"><span class="comment">%定义函数并且画出sinc函数</span></span><br><span class="line">grid on;</span><br><span class="line"><span class="comment">%显示表格</span></span><br><span class="line">title(<span class="string">'sinc(t)在-2\pi到2\pi之间的图像'</span>);</span><br><span class="line">xlabel(<span class="string">'t'</span>);</span><br><span class="line">ylabel(<span class="string">'y(t)'</span>);</span><br><span class="line">axis([<span class="number">-7</span> <span class="number">7</span> <span class="number">-0.3</span> <span class="number">1.2</span>])</span><br><span class="line"><span class="comment">%设置横纵坐标轴</span></span><br><span class="line"></span><br><span class="line">subplot(<span class="number">222</span>)</span><br><span class="line">ts=<span class="number">0.1</span>;<span class="comment">%取样时间</span></span><br><span class="line">fs=<span class="number">1</span>/ts;<span class="comment">%周期</span></span><br><span class="line">N2=<span class="number">31</span>;<span class="comment">%取样总数</span></span><br><span class="line">n=<span class="number">-15</span>:<span class="number">15</span>;</span><br><span class="line">xn=sinc(<span class="number">4</span>*<span class="built_in">pi</span>*n/N2);<span class="comment">%取离散信号数据</span></span><br><span class="line">stem(n,xn,<span class="string">'filled'</span>,<span class="string">'r'</span>);<span class="comment">%绘制时域取样图</span></span><br><span class="line">grid on;</span><br><span class="line"><span class="comment">%显示方格</span></span><br><span class="line">title(<span class="string">'sinc(t)在-2\pi到2\pi之间的抽样'</span>);</span><br><span class="line">xlabel(<span class="string">'n'</span>);</span><br><span class="line">ylabel(<span class="string">'sinc(n)'</span>);</span><br><span class="line">axis([<span class="number">-16</span> <span class="number">16</span> <span class="number">-0.4</span> <span class="number">1.5</span>])</span><br><span class="line"><span class="comment">%设置横纵坐标轴</span></span><br><span class="line"></span><br><span class="line">subplot(<span class="number">223</span>)</span><br><span class="line">k=<span class="number">-200</span>:<span class="number">200</span>;</span><br><span class="line">w=(<span class="built_in">pi</span>/<span class="number">100</span>)*k;<span class="comment">%其原始式子为w=(4*pi)*k/400</span></span><br><span class="line"><span class="comment">%将w针对不同的k的取值，区间变为[-2*pi,2*pi]</span></span><br><span class="line">wn=<span class="built_in">exp</span>(-<span class="built_in">j</span>*<span class="built_in">pi</span>/<span class="number">100</span>);</span><br><span class="line"><span class="comment">%得到公式中的 e的-j*omiga, 该量是个常数</span></span><br><span class="line">nk=n'*k;</span><br><span class="line"><span class="comment">%n的转置与k相乘</span></span><br><span class="line"><span class="comment">%nk为取样矩阵，相当于先是循环n次再是循环k次得到</span></span><br><span class="line">xk=wn.^nk;</span><br><span class="line"><span class="comment">%得到公式中的复变量e的-j*omiga*n</span></span><br><span class="line">X=xn*xk;</span><br><span class="line"><span class="comment">%得到离散序列的傅里叶变换</span></span><br><span class="line">magX=<span class="built_in">abs</span>(X);</span><br><span class="line"><span class="comment">%求取该DTFT的模，其作用相当于|X|</span></span><br><span class="line"><span class="built_in">plot</span>(w,magX,<span class="string">'g'</span>)</span><br><span class="line"><span class="comment">%在频率[-2pi,2pi]范围内画出幅频响应</span></span><br><span class="line">axis([<span class="number">-2</span>*<span class="built_in">pi</span> <span class="number">2</span>*<span class="built_in">pi</span> <span class="number">0</span> <span class="number">3</span>])</span><br><span class="line">title(<span class="string">'幅频特性'</span>);</span><br><span class="line">xlabel(<span class="string">'w/圆周频率'</span>);</span><br><span class="line">ylabel(<span class="string">'|X|'</span>);</span><br><span class="line"><span class="comment">%设置横纵坐标轴</span></span><br><span class="line"></span><br><span class="line">subplot(<span class="number">224</span>)</span><br><span class="line">angX=<span class="built_in">angle</span>(X);</span><br><span class="line"><span class="comment">%求取该DTFT的相位</span></span><br><span class="line"><span class="built_in">plot</span>(w,angX)</span><br><span class="line"><span class="comment">%在频率[-2pi,2pi]范围内画出相频响应</span></span><br><span class="line">title(<span class="string">'相频特性'</span>);</span><br><span class="line">xlabel(<span class="string">'w/圆周频率'</span>);</span><br><span class="line">ylabel(<span class="string">'相位'</span>);</span><br><span class="line">axis([<span class="number">-2</span>*<span class="built_in">pi</span> <span class="number">2</span>*<span class="built_in">pi</span> <span class="number">-4</span> <span class="number">4</span>])</span><br><span class="line"><span class="comment">%设置横纵坐标轴</span></span><br></pre></td></tr></table></figure></p>
<h1 id="4-结果显示"><a href="#4-结果显示" class="headerlink" title="4.结果显示"></a>4.结果显示</h1><p><img src="https://img-blog.csdnimg.cn/201910061609077.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h1 id="5-小结"><a href="#5-小结" class="headerlink" title="5.小结"></a>5.小结</h1><p>通过上边显示的图片我们可以看到并总结出如下结论。<br><strong>1.$X(e^{j\omega})$不仅是$\omega$的周期函数，而且是共轭对称的，因此对于实值序列，我们只画出其$[0,2\pi]$,画出其傅里叶变换的幅度和相位即可。<br>2.$x(n)$为在时域方面是离散的非周期信号，而通过DTFT变换之后，在频域方面是连续周期的。</strong></p>
<h1 id="6-参考文章"><a href="#6-参考文章" class="headerlink" title="6.参考文章"></a>6.参考文章</h1><blockquote>
<p>傅里叶变换matlab实现： <a href="https://blog.csdn.net/seek97/article/details/82813515" target="_blank" rel="noopener">https://blog.csdn.net/seek97/article/details/82813515</a></p>
</blockquote>

          
        
      
    </div>
	<div>
		
	</div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kingback2019.github.io/2019/11/19/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86matlab%E8%AE%AD%E7%BB%83%E7%AC%AC%E3%80%901%E3%80%91%E5%BC%B9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kingback">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/isme.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王延凯的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/19/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86matlab%E8%AE%AD%E7%BB%83%E7%AC%AC%E3%80%901%E3%80%91%E5%BC%B9/" itemprop="url">数字信号处理matlab训练第【1弹】</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-19T11:57:13+08:00">
                2019-11-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86/" itemprop="url" rel="index">
                    <span itemprop="name">数字信号处理</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-产生一个均匀分布的白噪声信号u-n-画出波形，并检验其分布"><a href="#1-产生一个均匀分布的白噪声信号u-n-画出波形，并检验其分布" class="headerlink" title="# 1.产生一个均匀分布的白噪声信号u(n),画出波形，并检验其分布"></a># 1.产生一个均匀分布的白噪声信号u(n),画出波形，并检验其分布</h1><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%使用rand函数产生均值为0.5，幅度在0-1之间的均匀分布的伪随机数</span></span><br><span class="line"><span class="comment">%以下将会调用rand函数产生一个均匀分布的白噪声信号</span></span><br><span class="line">clear;</span><br><span class="line">clc;</span><br><span class="line">N=<span class="number">5000</span>;<span class="comment">%长序列u(n)的长度</span></span><br><span class="line">u=<span class="built_in">rand</span>(<span class="number">1</span>,N);<span class="comment">%产生N个均与分布的伪随机数u(n)</span></span><br><span class="line">u_mean=<span class="built_in">mean</span>(u)<span class="comment">%求取u(n)的均值</span></span><br><span class="line">u_power=var(u)<span class="comment">%求取u(n)的方差</span></span><br><span class="line">subplot(<span class="number">211</span>);<span class="comment">%两行一列第1个图</span></span><br><span class="line"><span class="built_in">plot</span>(u(<span class="number">1</span>:<span class="number">100</span>));<span class="comment">%选取u(n)序列的前100个数据点</span></span><br><span class="line">grid on;<span class="comment">%显示方格</span></span><br><span class="line">ylabel(<span class="string">'u(n)'</span>);</span><br><span class="line">xlabel(<span class="string">'n'</span>)</span><br><span class="line">title(<span class="string">'1-100的u(n)数值显示'</span>)</span><br><span class="line"><span class="comment">%显示标题</span></span><br><span class="line">subplot(<span class="number">212</span>);<span class="comment">%两行一列第2个图</span></span><br><span class="line">hist(u,<span class="number">50</span>);grid on;</span><br><span class="line"><span class="comment">%对u(n)作直方图，检验其分布。50是对u(n)的取值范围（0-1）所分解的细胞数</span></span><br><span class="line">xlabel(<span class="string">'u(n)'</span>);</span><br><span class="line">ylabel(<span class="string">'个数'</span>);</span><br><span class="line">title(<span class="string">'u(n)的直方图'</span>)</span><br><span class="line"><span class="comment">%显示标题</span></span><br></pre></td></tr></table></figure>
<p>在上边的程序中我们可以看出，所求的白噪声$u(n)$的长度特别大(N=5000),在实际中，我们可能不需要这么大，之所以取这么大是希望当u(n)序列足够长时更接近于白噪声接近于均匀分布。我们可以根据自己需要选取自己喜欢的任何一段即可。<br>其结果如下所示：<br><img src="https://img-blog.csdnimg.cn/20191005135804986.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>在上边的运行结果我们也可以得到该随机序列的均值(u_mean)和方差(u_power).<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">u_mean =</span><br><span class="line"></span><br><span class="line">    <span class="number">0.5005</span></span><br><span class="line"></span><br><span class="line">u_power =</span><br><span class="line"></span><br><span class="line">    <span class="number">0.0836</span></span><br></pre></td></tr></table></figure><br>我们可以看到，产生的u(n)的均值为0.5，方差为0.0836（1/12）.</p>
<h1 id="2-产生一均匀分布、均值为0、功率为0-01的白噪声信号"><a href="#2-产生一均匀分布、均值为0、功率为0-01的白噪声信号" class="headerlink" title="2.产生一均匀分布、均值为0、功率为0.01的白噪声信号"></a>2.产生一均匀分布、均值为0、功率为0.01的白噪声信号</h1><p>在上边的例子中我们使用rand函数产生的u(n)为均值为0.5，功率$P_1=\frac{1}{12}$，现在需要将均值变为0、功率变为$P_2=\frac{1}{100}$。实现前者比较容易，只需将u(n)减去均值即可，而实现后者则需要调整u(n)的幅度。根据已知，我们可以得到以下公式：</p>
<script type="math/tex; mode=display">
\frac{P_2}{P_1}=\frac{\frac{1}{100}}{\frac{1}{12}}=\frac{\sum_{i=0}^{N}(a_{2i})^2}{\sum_{i=0}^{N}(a_{1i})^2}=12P_2</script><p>由于我们要实现的就是对于幅度的调整，来实现改变其方差，所以我们令以下等式成立$a_{2i}=a\cdot a_{1i}$ ,其中常数$a$就是我们所要求的一个比例因子。</p>
<script type="math/tex; mode=display">
\frac{\sum_{i=0}^{N}(a_{2i})^2}{\sum_{i=0}^{N}(a_{1i})^2}=\frac{\sum_{i=0}^{N}(a\cdot a_{1i})^2}{\sum_{i=0}^{N}(a_{1i})^2}\\ \quad
\\=\frac{(a\cdot a_{10})^2+(a\cdot a_{11})^2+...+(a\cdot a_{1N})^2}{a_{10}^2+a_{11}^2+...+a_{1N}^2}\\ \quad
\\=\frac{a^2\cdot(a_{10}^2+a_{11}^2+...+a_{1N}^2)}{a_{10}^2+a_{11}^2+...+a_{1N}^2}=\quad a^2\quad=12P_2</script><p>由上式的推导我们可以得出$a=\sqrt{12P_2}$,其中$P_2$的数值我们已知。<br>根据上边的推导，我们在matlab中敲下代码如下：<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%%产生一个均匀分布、均值为0、功率为0.01的白噪声信号u(n)</span></span><br><span class="line">clc;</span><br><span class="line">clear;</span><br><span class="line">N=<span class="number">50000</span>;</span><br><span class="line"><span class="comment">%长序列u(n)的长度</span></span><br><span class="line">p_1=<span class="number">0.083</span>;</span><br><span class="line">p_2=<span class="number">0.01</span>;</span><br><span class="line"><span class="comment">%转换前的功率和所需要的功率</span></span><br><span class="line">u=<span class="built_in">rand</span>(<span class="number">1</span>,N);</span><br><span class="line"><span class="comment">%产生5000个0-1的伪随机数</span></span><br><span class="line">u=u-<span class="built_in">mean</span>(u);</span><br><span class="line"><span class="comment">%此处实现将均值置为0</span></span><br><span class="line">a=<span class="built_in">sqrt</span>(<span class="number">12</span>*p_2)</span><br><span class="line"><span class="comment">%求取常数比例因子</span></span><br><span class="line">u1=u*a;</span><br><span class="line"><span class="comment">%对序列的幅度进行调整</span></span><br><span class="line">u1_power=var(u1)</span><br><span class="line"><span class="comment">%求取该序列的方差</span></span><br><span class="line"><span class="built_in">plot</span>(u1(<span class="number">1</span>:<span class="number">100</span>));</span><br><span class="line"><span class="comment">%选取u(n)序列的前100个数据点</span></span><br><span class="line">grid on;</span><br><span class="line"><span class="comment">%显示网格</span></span><br><span class="line">xlabel(<span class="string">'n'</span>)</span><br><span class="line">ylabel(<span class="string">'u1(n)'</span>)</span><br><span class="line">title(<span class="string">'1-100的u1(n)数值显示'</span>)</span><br><span class="line"><span class="comment">%坐标轴设置</span></span><br></pre></td></tr></table></figure><br>运行之后，我们可以在输出行得到该序列的均值和功率以及需要求取的比例因子a：<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">a =</span><br><span class="line"></span><br><span class="line">    <span class="number">0.3464</span></span><br><span class="line"></span><br><span class="line">u1_power =</span><br><span class="line"></span><br><span class="line">    <span class="number">0.0100</span></span><br><span class="line"></span><br><span class="line">u1_mean =</span><br><span class="line"></span><br><span class="line">  <span class="number">-2.3466e-15</span></span><br></pre></td></tr></table></figure><br>其运行结果如下所示：<br><img src="https://img-blog.csdnimg.cn/20191005162012833.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>通过上边的显示结果，我们可以看出，显然该序列的均值为0，幅度范围在-0.1733-0.1733之间。到此我们已经实现了我们的需求。</p>
<h1 id="3-产生均值为0，方差为1，服从高斯（正态）分布的高斯白噪声-u-n-及其位移和尺度变换"><a href="#3-产生均值为0，方差为1，服从高斯（正态）分布的高斯白噪声-u-n-及其位移和尺度变换" class="headerlink" title="3.产生均值为0，方差为1，服从高斯（正态）分布的高斯白噪声$u(n)$及其位移和尺度变换"></a>3.产生均值为0，方差为1，服从高斯（正态）分布的高斯白噪声$u(n)$及其位移和尺度变换</h1><p>在matlab中我们一般使用randn函数来产生该函数，其调用格式与rand格式相同，改变功率的方法也相同，只不过我们只需要将式子改为$a=\sqrt{1\cdot(P_2)}$即可。<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%%产生均值为0，方差为1，服从高斯分布的白噪声信号u(n)</span></span><br><span class="line">clc;</span><br><span class="line">clear;</span><br><span class="line">N=<span class="number">50000</span>;</span><br><span class="line">u=<span class="built_in">randn</span>(<span class="number">1</span>,N);</span><br><span class="line"><span class="comment">%产生50000个满足均值为0，方差为1，服从正态分布的白噪声信号u(n)</span></span><br><span class="line">u_mean=<span class="built_in">mean</span>(u)</span><br><span class="line">u_power=var(u)</span><br><span class="line"><span class="comment">%输出其均值和方差</span></span><br><span class="line">set(gcf,<span class="string">'position'</span>,[<span class="number">180</span>,<span class="number">160</span>,<span class="number">800</span>,<span class="number">500</span>]);</span><br><span class="line"><span class="comment">%设置图片显示位置为（180，160）</span></span><br><span class="line"><span class="comment">%设置图片大小为（800，500）</span></span><br><span class="line">subplot(<span class="number">221</span>)</span><br><span class="line"><span class="built_in">plot</span>(u(<span class="number">1</span>:<span class="number">100</span>));</span><br><span class="line"><span class="comment">%选取u(n)序列的前100个数据点</span></span><br><span class="line">grid on;</span><br><span class="line"><span class="comment">%显示网格</span></span><br><span class="line">xlabel(<span class="string">'n'</span>);</span><br><span class="line">ylabel(<span class="string">'u(n)'</span>);</span><br><span class="line">title(<span class="string">'1-100的u(n)数值显示'</span>);</span><br><span class="line"><span class="comment">%坐标轴设置</span></span><br><span class="line">subplot(<span class="number">222</span>);</span><br><span class="line">hist(u,<span class="number">50</span>);grid on;</span><br><span class="line"><span class="comment">%对u2(n)作直方图，检验其分布。50是对u2(n)的取值范围（0-1）所分解的细胞数</span></span><br><span class="line">h=findobj(gca,<span class="string">'Type'</span>,<span class="string">'patch'</span>);</span><br><span class="line">set(h,<span class="string">'facecolor'</span>,<span class="string">'b'</span>);</span><br><span class="line"><span class="comment">%改变柱状图颜色</span></span><br><span class="line"><span class="comment">%显示网格</span></span><br><span class="line">xlabel(<span class="string">'u(n)'</span>);</span><br><span class="line">ylabel(<span class="string">'个数'</span>);</span><br><span class="line">title(<span class="string">'u(n)的直方图,均值为0，方差为1'</span>);</span><br><span class="line"><span class="comment">%坐标轴设置</span></span><br><span class="line">subplot(<span class="number">223</span>)</span><br><span class="line">p_2=<span class="number">0.1</span>;</span><br><span class="line"><span class="comment">%为新需要得到的方差赋值</span></span><br><span class="line">a=<span class="built_in">sqrt</span>(p_2);</span><br><span class="line"><span class="comment">%求取缩放因子a</span></span><br><span class="line">u1=a*u;</span><br><span class="line"><span class="comment">%得到功率(方差)为0.1的序列u1</span></span><br><span class="line">hist(u1,<span class="number">50</span>);grid on;</span><br><span class="line"><span class="comment">%对u1(n)作直方图，检验其分布。50是对u1(n)的取值范围（0-1）所分解的细胞数</span></span><br><span class="line"><span class="comment">%显示网格</span></span><br><span class="line">u1_mean=<span class="built_in">mean</span>(u)</span><br><span class="line">u1_power=var(u)</span><br><span class="line"><span class="comment">%输出其均值和方差</span></span><br><span class="line">h=findobj(gca,<span class="string">'Type'</span>,<span class="string">'patch'</span>);</span><br><span class="line">set(h,<span class="string">'facecolor'</span>,<span class="string">'r'</span>);</span><br><span class="line"><span class="comment">%改变柱状图颜色</span></span><br><span class="line">axis([<span class="number">-4</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">4000</span>])</span><br><span class="line"><span class="comment">%设置坐标轴显示范围</span></span><br><span class="line">xlabel(<span class="string">'u1(n)'</span>);</span><br><span class="line">ylabel(<span class="string">'个数'</span>);</span><br><span class="line">title(<span class="string">'u1(n)的直方图,均值为0，方差为0.1'</span>);</span><br><span class="line"><span class="comment">%坐标轴设置</span></span><br><span class="line">subplot(<span class="number">224</span>)</span><br><span class="line">u2=<span class="number">3</span>+u;</span><br><span class="line"><span class="comment">%设置均值为3</span></span><br><span class="line">hist(u2,<span class="number">50</span>);grid on;</span><br><span class="line"><span class="comment">%对u2(n)作直方图，检验其分布。50是对u2(n)的取值范围（0-1）所分解的细胞数</span></span><br><span class="line"><span class="comment">%显示网格</span></span><br><span class="line">u2_mean=<span class="built_in">mean</span>(u)</span><br><span class="line">u2_power=var(u)</span><br><span class="line"><span class="comment">%输出其均值和方差</span></span><br><span class="line">h=findobj(gca,<span class="string">'Type'</span>,<span class="string">'patch'</span>);</span><br><span class="line">set(h,<span class="string">'facecolor'</span>,<span class="string">'r'</span>);</span><br><span class="line"><span class="comment">%改变柱状图颜色</span></span><br><span class="line">axis([<span class="number">-4</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">4000</span>])</span><br><span class="line"><span class="comment">%设置坐标轴显示范围</span></span><br><span class="line">xlabel(<span class="string">'u2(n)'</span>);</span><br><span class="line">ylabel(<span class="string">'个数'</span>);</span><br><span class="line">title(<span class="string">'u2(n)的直方图,均值为3，方差为1'</span>);</span><br><span class="line"><span class="comment">%坐标轴设置</span></span><br></pre></td></tr></table></figure><br>在我们执行完以上程序后，我们则将会得到以下图示：<br><img src="https://img-blog.csdnimg.cn/201910051734000.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>另外在执行结束之后，我们也可以在输出行看到我们的各个数据的值<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">u_mean =</span><br><span class="line"></span><br><span class="line">   <span class="number">-0.0010</span></span><br><span class="line"></span><br><span class="line">u_power =</span><br><span class="line"></span><br><span class="line">    <span class="number">1.0034</span></span><br><span class="line"></span><br><span class="line">u1_mean =</span><br><span class="line"></span><br><span class="line">  <span class="number">-3.2553e-04</span></span><br><span class="line"></span><br><span class="line">u1_power =</span><br><span class="line"></span><br><span class="line">    <span class="number">0.1003</span></span><br><span class="line"></span><br><span class="line">u2_mean =</span><br><span class="line"></span><br><span class="line">    <span class="number">2.9990</span></span><br><span class="line"></span><br><span class="line">u2_power =</span><br><span class="line"></span><br><span class="line">    <span class="number">1.0034</span></span><br></pre></td></tr></table></figure><br>我们也可以看到，以上各个数值均是我们所需求的那样。</p>

          
        
      
    </div>
	<div>
		
	</div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kingback2019.github.io/2019/11/19/window%E4%B8%8Agnuplot%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8%E3%80%901%E3%80%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kingback">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/isme.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王延凯的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/19/window%E4%B8%8Agnuplot%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8%E3%80%901%E3%80%91/" itemprop="url">windows上gunplot的安装和使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-19T09:05:10+08:00">
                2019-11-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/c%E8%AF%AD%E8%A8%80%E7%94%BB%E5%9B%BE/" itemprop="url" rel="index">
                    <span itemprop="name">c语言画图</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-gnuplot的原理及用途"><a href="#1-gnuplot的原理及用途" class="headerlink" title="1.gnuplot的原理及用途"></a>1.gnuplot的原理及用途</h2><p>$\qquad$它是一个小巧实用的数据处理工具，主要用来绘制2D/3D的数据或者函数图像，但是也包含数学计算、拟合等功能。虽然它的名字里边有个“gnu”,但是它和大名鼎鼎的<a href="http://www.gnu.org/" target="_blank" rel="noopener">GNU</a>没有什么关系，使用的授权协议也不是GNU GPL,所以这里的“gnu”是小写，全名应该读作“new plot”。<br>所有主流的Linux版本都包含gnuplot,因此在Linux上安装很简单，只要用各相应发行版的软件安装工具直接安装就可以了。<br>$\qquad$在苹果电脑的安装也并不复杂，<a href="https://www.macports.org/" target="_blank" rel="noopener">MacPorts</a>项目把很多Linux上的应用程序移植到了苹果系统上，其中就包括gnuplot.只要在苹果电脑上安装MacPorts,之后就可以使用port命令进行安装了。<br>$\qquad$在windows下，可以直接到<a href="http://www.gnuplot.info/" target="_blank" rel="noopener">gnuplot</a>在<a href="https://sourceforge.net/projects/gnuplot/files/gnuplot/" target="_blank" rel="noopener">sourceforge</a>的下载页面进行下载，解压之后，直接安装即可使用了。</p>
<h2 id="2-gnuplot的下载及安装"><a href="#2-gnuplot的下载及安装" class="headerlink" title="2.gnuplot的下载及安装"></a>2.gnuplot的下载及安装</h2><p>$\qquad$首先在官网下载gnuplot的最新版本，<a href="https://www.typora.io/#windows" target="_blank" rel="noopener">下载地址</a>，之后按照提示，更改安装位置即可。<br><img src="https://img-blog.csdnimg.cn/20190920151746978.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>$\qquad$之后在软件安装页面找到并运行  <strong>gnuplot 5.2 patchlevel 7</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20190920151852296.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>$\qquad$在这里我们不妨先实验一下画图效果，以下我们显示画出<strong>sinx</strong>和<strong>cosx</strong>的图像</p>
<p><img src="https://img-blog.csdnimg.cn/20190920151914519.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20190920152029658.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>$\qquad$到这里我们的gnuplot的安装大功告成了。</p>
<h2 id="3-使用gcc编译c语言程序"><a href="#3-使用gcc编译c语言程序" class="headerlink" title="3.使用gcc编译c语言程序"></a>3.使用gcc编译c语言程序</h2><p>$\qquad$在编译之前，我们先创建一个c语言文件，主要实现生成画图所需要的离散变量数组。以下我们以产生<strong>sinc</strong>函数为例，并将该函数命名为<strong>test.c</strong>。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PI 3.1415926</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	 <span class="comment">//获取负半轴部分数据</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1600</span>; i &gt;<span class="number">0</span>; i--)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">double</span> t;</span><br><span class="line">		t=i/<span class="number">16.0</span>;<span class="comment">//设置采集时间=采样点数/采样频率</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%.2f %.2f\n"</span>,(<span class="keyword">float</span>)(-t),(<span class="built_in">sin</span>(t)/t));</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">//获取正半轴部分数据</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;<span class="number">1600</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">double</span> t;</span><br><span class="line">		t=i/<span class="number">16.0</span>;<span class="comment">//设置采集时间=采样点数/采样频率</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%.2f %.2f\n"</span>,(<span class="keyword">float</span>)(t),(<span class="built_in">sin</span>(t)/t));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对其使用<strong>gcc</strong>进行编译则有:<br><img src="https://img-blog.csdnimg.cn/20190920152115895.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>编译完成之后,我们就会发现多了一个<strong>test.exe</strong>文件，接下来我们要运行该可执行文件，并且将它<strong>printf</strong>的结果重定向到<strong>sinc.bat</strong>文件。</p>
<p><img src="https://img-blog.csdnimg.cn/20190920152140951.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>如果我们此时使用记事本打开sinc.bat文件我们就会发现，整个函数的输出结果全被保存到这里。<br><img src="https://img-blog.csdnimg.cn/20190920152336186.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="4-使用gnuplot调用c语言程序所产生的数据并且画出图像"><a href="#4-使用gnuplot调用c语言程序所产生的数据并且画出图像" class="headerlink" title="4.使用gnuplot调用c语言程序所产生的数据并且画出图像"></a>4.使用gnuplot调用c语言程序所产生的数据并且画出图像</h2><p>$\qquad$在做这一步之前我们需要做的一点就是，需要先将<strong>gnuplot.exe</strong>所在的路径，存入环境变量<strong>path</strong>中，这里我的路径是：<br><img src="https://img-blog.csdnimg.cn/20190920152428672.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>$\qquad$添加完成之后点击确定即可。然后在含有<strong>sinc.bat</strong>文件的文件夹下进入cmd命令行窗口,之后输入<strong>gnuplot</strong>,调用该画图函数。然后再在新出来的窗口输入命令.<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plot [<span class="number">-16</span>:<span class="number">16</span>] [<span class="number">-0.3</span>:<span class="number">1</span>] <span class="string">"sinc.bat"</span>  u <span class="number">1</span>:<span class="number">2</span> w l lt <span class="number">1</span> lw <span class="number">1</span></span><br></pre></td></tr></table></figure><br>$\qquad$具体操作以及结果如下所示：<br><img src="https://img-blog.csdnimg.cn/20190920152543860.gif" alt="在这里插入图片描述"></p>
<h2 id="5-参考文章"><a href="#5-参考文章" class="headerlink" title="5.参考文章"></a>5.参考文章</h2><blockquote>
<p>史上最完美的Typora快捷键大全：<a href="https://blog.csdn.net/cris_zz/article/details/82919401" target="_blank" rel="noopener">https://blog.csdn.net/cris_zz/article/details/82919401</a></p>
<p>c语言及gnuplot任意波形产生以及作图-三角波：<a href="https://blog.csdn.net/shaoyubin999/article/details/82819974" target="_blank" rel="noopener">https://blog.csdn.net/shaoyubin999/article/details/82819974</a></p>
<p>gnuplot使用说明：<a href="https://www.cnblogs.com/waterystone/p/5085801.html" target="_blank" rel="noopener">https://www.cnblogs.com/waterystone/p/5085801.html</a></p>
<p>gnuplot介绍：<a href="https://www.xuebuyuan.com/572269.html" target="_blank" rel="noopener">https://www.xuebuyuan.com/572269.html</a></p>
</blockquote>

          
        
      
    </div>
	<div>
		
	</div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kingback2019.github.io/2019/11/19/%E8%B6%85%E8%AF%A6%E7%BB%86%E7%9A%84gnuplot%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%E3%80%902%E3%80%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kingback">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/isme.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王延凯的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/19/%E8%B6%85%E8%AF%A6%E7%BB%86%E7%9A%84gnuplot%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%E3%80%902%E3%80%91/" itemprop="url">超详细的gunplot使用教程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-19T09:04:52+08:00">
                2019-11-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/c%E8%AF%AD%E8%A8%80%E7%94%BB%E5%9B%BE/" itemprop="url" rel="index">
                    <span itemprop="name">c语言画图</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-gnuplot参数介绍及演示"><a href="#1-gnuplot参数介绍及演示" class="headerlink" title="1.gnuplot参数介绍及演示"></a>1.gnuplot参数介绍及演示</h1><h2 id="1-1首先来解释一下会用到的各类参数以及其解释"><a href="#1-1首先来解释一下会用到的各类参数以及其解释" class="headerlink" title="1.1首先来解释一下会用到的各类参数以及其解释"></a>1.1首先来解释一下会用到的各类参数以及其解释</h2><div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>缩写</th>
<th>意义</th>
</tr>
</thead>
<tbody>
<tr>
<td>With</td>
<td>w</td>
<td>with后边跟需要指定的样式</td>
</tr>
<tr>
<td>Line</td>
<td>l</td>
<td>用线l显示</td>
</tr>
<tr>
<td>Point</td>
<td>p</td>
<td>用点显示</td>
</tr>
<tr>
<td>LinePoints</td>
<td>lp</td>
<td>用线和点画，对数据绘图时有用</td>
</tr>
<tr>
<td>LineType</td>
<td>lt</td>
<td>线的样式（0代表虚线，1-7代表实线,颜色分别为紫、蓝、绿、橙、黄、靛、红。超过7以后颜色依次循环）</td>
</tr>
<tr>
<td>LineWidth</td>
<td>lw</td>
<td>线的宽度（level从0开始，默认为1）</td>
</tr>
<tr>
<td>PointType</td>
<td>pt</td>
<td>点的样式（level从0开始，默认为1）</td>
</tr>
<tr>
<td>PointSize</td>
<td>ps</td>
<td>点的宽度（level从0开始，默认为1）</td>
</tr>
</tbody>
</table>
</div>
<h2 id="1-2-画图实际测试"><a href="#1-2-画图实际测试" class="headerlink" title="1.2 画图实际测试"></a>1.2 画图实际测试</h2><p>为了显示出不同的差别，此处我谨以sinx函数或者cos函数来进行显示：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">plot <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//当没有设置其格式时，调用默认的设置</span></span></span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190920160153918.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">plot <span class="title">sin</span><span class="params">(x)</span> w p</span></span><br><span class="line"><span class="function"><span class="comment">//表示使用点画</span></span></span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190920161057593.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">plot <span class="title">sin</span><span class="params">(x)</span> w l</span></span><br><span class="line"><span class="function"><span class="comment">//表示使用线画</span></span></span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190920161010753.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">plot <span class="title">sin</span><span class="params">(x)</span> w lp</span></span><br><span class="line"><span class="function"><span class="comment">//表示使用点和线画</span></span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190920160735752.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">plot <span class="title">sin</span><span class="params">(x)</span> w lp lt 0</span></span><br><span class="line"><span class="function"><span class="comment">//表示使用点和线画，线的种类为0</span></span></span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190920160839952.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">plot <span class="title">sin</span><span class="params">(x)</span> w l lt 1</span></span><br><span class="line"><span class="function"><span class="comment">//表示使用线画，线的种类为1</span></span></span><br></pre></td></tr></table></figure></p>
<p><img src="https://img-blog.csdnimg.cn/20190920161257971.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">plot <span class="title">sin</span><span class="params">(x)</span> w l lt 7</span></span><br><span class="line"><span class="function"><span class="comment">//表示使用线画，线的种类为7</span></span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190920162128303.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">plot <span class="title">sin</span><span class="params">(x)</span> w l lt 1 lw 4</span></span><br><span class="line"><span class="function"><span class="comment">//表示使用线画，线的种类为1，线的宽度为4</span></span></span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190920162321667.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">plot <span class="title">sin</span><span class="params">(x)</span> w p pt 4</span></span><br><span class="line"><span class="function"><span class="comment">//表示使用点画，点的种类为4</span></span></span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190920162840218.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">plot <span class="title">sin</span><span class="params">(x)</span> w p pt 4 ps 2</span></span><br><span class="line"><span class="function"><span class="comment">//表示使用点画。点的种类为4，点的大小为2</span></span></span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/2019092016304359.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="1-3-其它参数介绍（约定范围、坐标轴设定）"><a href="#1-3-其它参数介绍（约定范围、坐标轴设定）" class="headerlink" title="1.3 其它参数介绍（约定范围、坐标轴设定）"></a>1.3 其它参数介绍（约定范围、坐标轴设定）</h2><h3 id="1-3-1-约束画图范围"><a href="#1-3-1-约束画图范围" class="headerlink" title="1.3.1 约束画图范围"></a>1.3.1 约束画图范围</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plot [<span class="number">-5</span>:<span class="number">5</span>] [<span class="number">-1.2</span>:<span class="number">1.2</span>] <span class="built_in">sin</span>(x)</span><br><span class="line"><span class="comment">//表示x取值范围为[-5,5],y的取值范围为[-1.2,1.2]</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190920164811487.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h3 id="1-3-2-关于坐标轴的设定"><a href="#1-3-2-关于坐标轴的设定" class="headerlink" title="1.3.2 关于坐标轴的设定"></a>1.3.2 关于坐标轴的设定</h3><p>在对于坐标轴的设定，要注意的一点就是，在画图之前执行命令。<br>命令     | 含义<br>—————— | —————<br>set xlabel ‘x’ |x轴标为‘x’<br>set ylabel ‘y’ | y轴标为’y’<br>set ylabel ‘DOS’ tc lt 3 | ‘DOS’的颜色用第三种颜色<br>set xtics 1.0|x轴的主刻度的宽度为1.0，同样可以为y轴定义ytics<br>set mxtics 3|x轴上每个主刻度中画3个分刻度，同样可以为y轴定义mytics<br>set border 3|设为第三种边界，同样可以为上边的x轴（称为x2）和右边y（称为y2）轴进行设置，即x2tics，mx2tics，y2tics，my2tics。<br>set xtics nomirror|去掉上边x的刻度，同样可以为ytics设置<br>unset x2tics|去掉上边x的标度，同样可以为y2tics设置<br>下面我们就来验证一下上边的图吧。<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; set title 'kmust team'</span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> xlabel <span class="string">'x'</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> ylabel <span class="string">'y'</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> xtics <span class="number">1.0</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> mxtics <span class="number">3</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> border <span class="number">3</span></span><br><span class="line">gnuplot&gt; <span class="function">plot <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line">gnuplot&gt;</span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190920170828421.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h3 id="1-3-3-图例"><a href="#1-3-3-图例" class="headerlink" title="1.3.3 图例"></a>1.3.3 图例</h3><div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>set key left</td>
<td>放在左边，有left 和right两个选项</td>
</tr>
<tr>
<td>set key bottom</td>
<td>放在下边，只有这一个选项；默认在上边</td>
</tr>
<tr>
<td>set key outside</td>
<td>放在外边，但只能在右面的外边</td>
</tr>
<tr>
<td>set key left bottom</td>
<td>表示放在左下边</td>
</tr>
</tbody>
</table>
</div>
<p>代码示例：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> key right bottom</span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> title <span class="string">"kmust"</span></span><br><span class="line">gnuplot&gt; <span class="function">plot <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//将图例放在右下角</span></span></span><br><span class="line"><span class="function"><span class="comment">//设置标题为“kmust”</span></span></span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190920194230103.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h3 id="1-3-4-在图中任意位置插入文字"><a href="#1-3-4-在图中任意位置插入文字" class="headerlink" title="1.3.4 在图中任意位置插入文字"></a>1.3.4 在图中任意位置插入文字</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; set label 'I Love Kmust!' at 2.5,0.5</span><br><span class="line">gnuplot&gt; <span class="function">plot <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//在坐标（2.5，0.5）处插入文字</span></span></span><br><span class="line"><span class="function"><span class="comment">//如果想要删除文字就使用 unset label 1(此处数字代表要删除label的序号)</span></span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190920203757755.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="1-4-同时画出多条曲线"><a href="#1-4-同时画出多条曲线" class="headerlink" title="1.4 同时画出多条曲线"></a>1.4 同时画出多条曲线</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plot sin(x),cos(x)</span><br><span class="line"><span class="comment">//注意连个函数之间要使用逗号分隔开</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190920171358263.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>当然两个函数之间也可以单独约束<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plot sin(x) title 'sin(x)' w l lt 0 lw 2, cos(x) title 'cos(x)' w l lt 2 lw 2</span><br><span class="line"><span class="comment">//注意连个函数之间要使用逗号分隔开，每个函数的绘画要求紧跟着对应的函数</span></span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190920171518832.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="1-5-x轴时间设置"><a href="#1-5-x轴时间设置" class="headerlink" title="1.5 x轴时间设置"></a>1.5 x轴时间设置</h2><div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>set xdata time</td>
<td>X轴设置为时间格式</td>
</tr>
<tr>
<td>set timefmt “%Y-%m-%d”</td>
<td>文件中时间格式</td>
</tr>
<tr>
<td>set format x “%m/%d”</td>
<td>目标时间格式~</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> xdata time</span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> timefmt <span class="string">"%Y-%m-%d"</span></span><br><span class="line">gnuplot&gt; <span class="function">plot <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//设置x轴为时间格式，并且其显示形式为年-月-日</span></span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190920195359322.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_60#pic_center" alt="在这里插入图片描述"></p>
<h2 id="1-6-在图中添加直线和箭头"><a href="#1-6-在图中添加直线和箭头" class="headerlink" title="1.6 在图中添加直线和箭头"></a>1.6 在图中添加直线和箭头</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> arrow from <span class="number">0.0</span>,<span class="number">0.0</span> to <span class="number">2.0</span>,<span class="number">0.0</span></span><br><span class="line">gnuplot&gt; <span class="function">plot <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//在图的中心点（0，0）向（2，0）画一条射线</span></span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190920200240285.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> arrow from <span class="number">0.0</span>,<span class="number">0.0</span> to <span class="number">0.0</span>,<span class="number">-0.4</span> nohead</span><br><span class="line">gnuplot&gt; <span class="function">plot <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//只画一条直线的话，在画箭头的语句上方添加nohead标签</span></span></span><br><span class="line"><span class="function"><span class="comment">//从中心点（0，0）到（0，-0.4）画一条直线</span></span></span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190920200806563.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>除此之外我们还可以进行颜色调制<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> arrow from <span class="number">0.0</span>,<span class="number">0.0</span> to <span class="number">-2.0</span>,<span class="number">0.4</span> lt <span class="number">2</span> lw <span class="number">2</span></span><br><span class="line">gnuplot&gt; <span class="function">plot <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//从中心点（0，0）到（-2.0，0.4）画一条绿色射线，线条粗细等级为2</span></span></span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190920201216642.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>如果我们不小心画错了一个图形，我们又该如何删除呢，很简单，一句话就搞定了。<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; unset arrow <span class="number">3</span></span><br><span class="line">gnuplot&gt; unset arrow <span class="number">2</span></span><br><span class="line">gnuplot&gt; unset arrow <span class="number">1</span></span><br><span class="line">gnuplot&gt; <span class="function">plot <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//如果我们发现第几个值线画错了，就可以使用语句unset删除对应的直线即可</span></span></span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190920201549513.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="1-7-读取dat、txt文件进行画图"><a href="#1-7-读取dat、txt文件进行画图" class="headerlink" title="1.7 读取dat、txt文件进行画图"></a>1.7 读取dat、txt文件进行画图</h2><p>在用c语言进行程序设计的时候，有时就需要画图任务，这时gnuplot可以读取dat、txt文件内的内容，并再进行绘画。<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> arrow from <span class="number">-16.0</span>,<span class="number">0.0</span> to <span class="number">16.0</span>,<span class="number">0.0</span> nohead</span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> arrow from <span class="number">-0.3</span>,<span class="number">0.0</span> to <span class="number">1.0</span>,<span class="number">0.0</span></span><br><span class="line">gnuplot&gt; plot [<span class="number">-16</span>:<span class="number">16</span>] [<span class="number">-0.3</span>:<span class="number">1</span>] <span class="string">"sinc.bat"</span>  u <span class="number">1</span>:<span class="number">2</span> w l lt <span class="number">1</span> lw <span class="number">1</span></span><br><span class="line"><span class="comment">//从（-16，0）到（16，0）画一条直线</span></span><br><span class="line"><span class="comment">//从（-0.3，0）到（1.0，0）画一条带箭头射线</span></span><br><span class="line"><span class="comment">//读取“sinc.bat”文件内的数据，并用其内的第一列和第二列作图，，并且设置线条颜色和粗细。</span></span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190920202433729.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="1-8-设定图的大小和位置"><a href="#1-8-设定图的大小和位置" class="headerlink" title="1.8 设定图的大小和位置"></a>1.8 设定图的大小和位置</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> <span class="built_in">size</span> <span class="number">0.5</span>,<span class="number">0.5</span></span><br><span class="line">gnuplot&gt; <span class="function">plot <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//长宽均为默认宽度的一半，建议用这个取值，尤其是画成ps或eps图形的时候</span></span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190920204413633.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> origin <span class="number">0.0</span>,<span class="number">0.5</span></span><br><span class="line">gnuplot&gt; <span class="function">plot <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//设定图的最左下角的那一点在图形面板中的位置。这里图将出现在左上角。</span></span></span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190920204545846.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="1-9-画多个图"><a href="#1-9-画多个图" class="headerlink" title="1.9 画多个图"></a>1.9 画多个图</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> multiplot</span><br><span class="line"><span class="comment">//设置为多图模式</span></span><br><span class="line">multiplot&gt; <span class="built_in">set</span> origin <span class="number">0.0</span>,<span class="number">0.5</span></span><br><span class="line"><span class="comment">//设置第一个图的原点的位置</span></span><br><span class="line">multiplot&gt; <span class="built_in">set</span> <span class="built_in">size</span> <span class="number">0.5</span>,<span class="number">0.5</span></span><br><span class="line"><span class="comment">//设置第一个图的大小，长和宽均为整个图的一半</span></span><br><span class="line">multiplot&gt; <span class="function">plot <span class="title">tan</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//开始绘制第一个图</span></span></span><br><span class="line">multiplot&gt; set origin 0.5,0.5</span><br><span class="line"><span class="comment">//设置第2个图的原点的位置</span></span><br><span class="line">multiplot&gt; <span class="built_in">set</span> <span class="built_in">size</span> <span class="number">0.5</span>,<span class="number">0.5</span></span><br><span class="line"><span class="comment">//设置第2个图的大小，长和宽均为整个图的一半</span></span><br><span class="line">multiplot&gt; <span class="function">plot  <span class="title">cos</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//开始绘制第2个图</span></span></span><br><span class="line">multiplot&gt; set origin 0.0,0.0</span><br><span class="line"><span class="comment">//设置第3个图的原点的位置</span></span><br><span class="line">multiplot&gt; <span class="built_in">set</span> <span class="built_in">size</span> <span class="number">0.5</span>,<span class="number">0.5</span></span><br><span class="line"><span class="comment">//设置第3个图的大小，长和宽均为整个图的一半</span></span><br><span class="line">multiplot&gt; <span class="function">plot  <span class="title">sin</span><span class="params">(x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//开始绘制第3个图</span></span></span><br><span class="line">multiplot&gt; set origin 0.5,0.0</span><br><span class="line"><span class="comment">//设置第4个图的原点的位置</span></span><br><span class="line">multiplot&gt; <span class="built_in">set</span> <span class="built_in">size</span> <span class="number">0.5</span>,<span class="number">0.5</span></span><br><span class="line"><span class="comment">//设置第4个图的大小，长和宽均为整个图的一半</span></span><br><span class="line">multiplot&gt; plot <span class="number">1</span>/x</span><br><span class="line"><span class="comment">//开始绘制第4个图</span></span><br></pre></td></tr></table></figure>
<p>绘制完成之后就会出现这个四合一的图，当然我们还可以 为每个图设置自己的特有属性，比如颜色、标题等。<br><img src="https://img-blog.csdnimg.cn/20190920212747179.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h1 id="2-gnuplot进阶"><a href="#2-gnuplot进阶" class="headerlink" title="2.gnuplot进阶"></a>2.gnuplot进阶</h1><h2 id="2-1-使两坐标轴的单位长度等长"><a href="#2-1-使两坐标轴的单位长度等长" class="headerlink" title="2.1 使两坐标轴的单位长度等长"></a>2.1 使两坐标轴的单位长度等长</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt;  <span class="built_in">set</span> <span class="built_in">size</span> square</span><br><span class="line"><span class="comment">//设置形状为方形</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> <span class="built_in">size</span> <span class="number">0.5</span>,<span class="number">0.5</span></span><br><span class="line"><span class="comment">//设置图形的大小各为一半</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> xrange[<span class="number">-10</span>:<span class="number">10</span>]</span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> yrange[<span class="number">-10</span>:<span class="number">10</span>]</span><br><span class="line"><span class="comment">//设置x,y的范围相同</span></span><br><span class="line">gnuplot&gt; plot x+<span class="number">2</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190920220255315.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="2-2-在同一张图里利用左右两边的y轴分别画图"><a href="#2-2-在同一张图里利用左右两边的y轴分别画图" class="headerlink" title="2.2 在同一张图里利用左右两边的y轴分别画图"></a>2.2 在同一张图里利用左右两边的y轴分别画图</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> xtics nomirror</span><br><span class="line"><span class="comment">//去掉上边坐标轴x2的刻度</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> ytics nomirror</span><br><span class="line"><span class="comment">//去掉上边坐标轴y2的刻度</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> x2tics</span><br><span class="line"><span class="comment">//让上面坐标轴x2刻度自动产生</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> y2tics</span><br><span class="line"><span class="comment">//让上面坐标轴y2刻度自动产生</span></span><br><span class="line">gnuplot&gt; plot sin(x),cos(x) axes x1y2</span><br><span class="line"><span class="comment">//用x1y2坐标，axes x1y2表示用x1y2坐标轴</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190920220659444.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; plot sin(x),cos(x) axes x2y2</span><br><span class="line"><span class="comment">//用x2y2坐标，axes x2y2表示用x2y2坐标轴</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> x2range[<span class="number">-20</span>:<span class="number">20</span>]</span><br><span class="line"><span class="comment">//设定x2坐标的范围</span></span><br><span class="line">gnuplot&gt; report</span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190920220837819.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> xrange[<span class="number">-5</span>:<span class="number">5</span>]</span><br><span class="line"><span class="comment">//设定x的范围</span></span><br><span class="line">gnuplot&gt; replot</span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190920221004407.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> xlabel <span class="string">'x'</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> x2label <span class="string">'t'</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> ylabel <span class="string">'y'</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> y2label <span class="string">'s'</span></span><br><span class="line"><span class="comment">//为图形的上下左右分别起标</span></span><br><span class="line">gnuplot&gt; replot</span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190920221127740.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; set title 'The figure'</span><br><span class="line"><span class="comment">//设置标题</span></span><br><span class="line">gnuplot&gt; replot</span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190920221253818.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center#pic_center" alt="在这里插入图片描述"></p>
<h2 id="2-3画漂亮的pm3D图"><a href="#2-3画漂亮的pm3D图" class="headerlink" title="2.3画漂亮的pm3D图"></a>2.3画漂亮的pm3D图</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> pm3d</span><br><span class="line"><span class="comment">//设置pm3d模式</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> isosamples <span class="number">50</span>,<span class="number">50</span></span><br><span class="line"><span class="comment">//设置网格点为50x50</span></span><br><span class="line">gnuplot&gt; splot x**<span class="number">2</span>+y**<span class="number">2</span></span><br><span class="line"><span class="comment">//画三维图像</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190921162344681.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="2-4-画等高线"><a href="#2-4-画等高线" class="headerlink" title="2.4 画等高线"></a>2.4 画等高线</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; <span class="built_in">set</span> dgrid3d <span class="number">100</span>,<span class="number">100</span></span><br><span class="line"><span class="comment">//设置三维表面的网格书目</span></span><br><span class="line">gnuplot&gt; <span class="built_in">set</span> contour</span><br><span class="line"><span class="comment">//设置画等高线</span></span><br><span class="line">gnuplot&gt; splot x**<span class="number">2</span>+y**<span class="number">2</span></span><br><span class="line"><span class="comment">//画图像</span></span><br></pre></td></tr></table></figure>
<p> <img src="https://img-blog.csdnimg.cn/20190921163220948.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="2-5-利用脚本文件避免重复输入"><a href="#2-5-利用脚本文件避免重复输入" class="headerlink" title="2.5 利用脚本文件避免重复输入"></a>2.5 利用脚本文件避免重复输入</h2><p>我在文件夹下创建了一个 try.plt文件，其内容如下所示<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">reset</span><br><span class="line"><span class="comment">//重置画图属性</span></span><br><span class="line"><span class="built_in">set</span> pm3d</span><br><span class="line"><span class="comment">//设置为pm3d模式</span></span><br><span class="line">unset ztics</span><br><span class="line"><span class="comment">//取消z轴标题</span></span><br><span class="line"><span class="built_in">set</span> isosamples <span class="number">200</span>,<span class="number">200</span></span><br><span class="line"><span class="comment">//设置网格属性为200x200</span></span><br><span class="line">splot x**<span class="number">2</span>+y**<span class="number">2</span> w pm3d</span><br><span class="line"><span class="comment">//开始画图并且设置为pm3d模式</span></span><br></pre></td></tr></table></figure><br>然后只需在gnuplot命令界面输入<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">load 'try.plt'</span><br><span class="line"><span class="comment">//加载plt文件，执行画图任务</span></span><br></pre></td></tr></table></figure><br>其结果如下所示：<br><img src="https://img-blog.csdnimg.cn/20190921165002556.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="2-6-gnuplot画GIF动图"><a href="#2-6-gnuplot画GIF动图" class="headerlink" title="2.6 gnuplot画GIF动图"></a>2.6 gnuplot画GIF动图</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> term gif animate</span><br><span class="line"><span class="comment">//设置可以画动画</span></span><br><span class="line"><span class="built_in">set</span> output <span class="string">"e1.gif"</span></span><br><span class="line"><span class="comment">//设置输出的文件路径</span></span><br><span class="line"><span class="built_in">set</span> xrange [<span class="number">0</span>:<span class="number">4</span>*pi]</span><br><span class="line"><span class="built_in">set</span> yrange [<span class="number">-1</span>:<span class="number">1</span>]</span><br><span class="line"><span class="comment">//设置x,y范围</span></span><br><span class="line"><span class="keyword">do</span> <span class="keyword">for</span> [i=<span class="number">0</span>:<span class="number">40</span>]&#123;</span><br><span class="line">  plot <span class="built_in">sin</span>(x+i*pi/<span class="number">40</span>) lw <span class="number">1.5</span> title <span class="built_in">sprintf</span>(<span class="string">"t=%i"</span>,i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//循环输出图像</span></span><br><span class="line"><span class="built_in">set</span> output</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190921170213773.gif#pic_center" alt="在这里插入图片描述"></p>
<h1 id="3-参考文章"><a href="#3-参考文章" class="headerlink" title="3.参考文章"></a>3.参考文章</h1><blockquote>
<p>gnuplot使用: <a href="https://www.cnblogs.com/waterystone/p/5085801.html" target="_blank" rel="noopener">https://www.cnblogs.com/waterystone/p/5085801.html</a><br>gnuplot生成gif动图：<a href="https://blog.csdn.net/weixin_34187862/article/details/85648365" target="_blank" rel="noopener">https://blog.csdn.net/weixin_34187862/article/details/85648365</a><br>gnuplot三维绘图;<a href="https://blog.csdn.net/ouening/article/details/72141345" target="_blank" rel="noopener">https://blog.csdn.net/ouening/article/details/72141345</a></p>
</blockquote>

          
        
      
    </div>
	<div>
		
	</div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kingback2019.github.io/2019/11/19/matlab%E5%92%8Cc%E8%AF%AD%E8%A8%80%E5%9C%A8%E4%B8%8D%E8%B0%83%E7%94%A8%E5%8C%85%EF%BC%88%E5%BA%93%EF%BC%89%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E5%AE%9E%E7%8E%B0%E6%97%B6%E5%9F%9F%E5%8D%B7%E7%A7%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kingback">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/isme.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王延凯的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/19/matlab%E5%92%8Cc%E8%AF%AD%E8%A8%80%E5%9C%A8%E4%B8%8D%E8%B0%83%E7%94%A8%E5%8C%85%EF%BC%88%E5%BA%93%EF%BC%89%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E5%AE%9E%E7%8E%B0%E6%97%B6%E5%9F%9F%E5%8D%B7%E7%A7%AF/" itemprop="url">matlab和c语言在不调包的情况下实现时域卷积</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-19T09:04:27+08:00">
                2019-11-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86/" itemprop="url" rel="index">
                    <span itemprop="name">数字信号处理</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-实验要求，matlab实现卷积运算（不调用函数和方法）"><a href="#1-实验要求，matlab实现卷积运算（不调用函数和方法）" class="headerlink" title="1.实验要求，matlab实现卷积运算（不调用函数和方法）"></a>1.实验要求，matlab实现卷积运算（不调用函数和方法）</h1><h2 id="1-1-卷积原理讲解"><a href="#1-1-卷积原理讲解" class="headerlink" title="1.1 卷积原理讲解"></a>1.1 卷积原理讲解</h2><script type="math/tex; mode=display">
y[n]=\sum_{k=-\infty}^{\infty}{x[k]h[n-k]}=x[n]*h[n]\\s(t)=f_1(t)*f_2(t)=\int_{-\infty}^tf_1(\tau)f_1(t-\tau)d\tau</script><p>$\qquad$上述两式分别为离散卷积运算和连续卷积运算。实际上我们的电脑要进行卷积运算就是将连续的函数离散化，再来进行离散的卷积计算。</p>
<h2 id="1-2-卷积计算步骤（图解法）"><a href="#1-2-卷积计算步骤（图解法）" class="headerlink" title="1.2 卷积计算步骤（图解法）"></a>1.2 卷积计算步骤（图解法）</h2><blockquote>
<p><strong>1.翻折</strong>  先在坐标轴上画出$x(m)$和$h(m)$,将$h(m)$以纵坐标为坐标轴折叠成$h(-m)$。<br><strong>2.移位</strong> 将$h(-m)$移位$n$,得到$h(n-m)$[或将$f_1(-\tau)$移位$t$,得到$f_1(t-\tau)$],当n或t为正数时右移n或t,当n或t为负数时左移n或t。<br><strong>3.相乘</strong> 将$h(n-m)$[或$f_1(t-\tau)$]与$x(m)$[或$f_1(\tau)$]的对应序列值[(数值)]对应相乘<br><strong>4.相加</strong> 将所有的乘机累加[(积分)]起来，就得到了$y(n)$[或$s(t)$]</p>
</blockquote>
<h2 id="1-3-matlab画出两个窗函数"><a href="#1-3-matlab画出两个窗函数" class="headerlink" title="1.3 matlab画出两个窗函数"></a>1.3 matlab画出两个窗函数</h2><p>$\qquad$以下列出的是产生两个门函数的matlab代码，式中主要运用了matlab的<strong>f=@(x)</strong> 函数句柄 ，它主要是包含了函数的路径、函数名、类型以及可能存在的重载方法。函数句柄必须通过专门的定义创建的,而一般的图像的句柄是自动建立的。使用该形式的函数的方法相比于.m函数文件的优点就是，因为在计算机开始执行运算的时候是需要在整个的matlab代码中去寻找是否存在该.m文件，我们也知道，matlab整个的文件数量是非常多的，所以直接调用.m文件是会耗费一些时间的，而如果我们直接采用 <strong>@</strong> 的方式则会节省一部分时间。<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">clc</span><br><span class="line"><span class="built_in">clear</span></span><br><span class="line">%定义函数，该函数主要实现任意形式的门函数</span><br><span class="line">high_1=<span class="number">1</span>;</span><br><span class="line">left_1=<span class="number">0</span>;</span><br><span class="line">right_1=<span class="number">1</span>;</span><br><span class="line">%定义要产生的窗函数的左右区间范围以及高度</span><br><span class="line">f_1=@(x) (high_1)*(x&gt;=left_1 &amp; x&lt;right_1);%<span class="number">0</span><span class="number">-1</span>的阶跃 高<span class="number">1</span></span><br><span class="line">f_2=@(x) (high_1+<span class="number">0.5</span>)*(x&gt;=left_1+<span class="number">2</span> &amp; x&lt;right_1+<span class="number">2</span>);%<span class="number">0</span><span class="number">-1</span>的阶跃 高<span class="number">1.5</span></span><br><span class="line">x=<span class="number">-4</span>:<span class="number">0.0006</span>:<span class="number">4</span>;</span><br><span class="line">y_1=f_1(x);%得到对应的窗函数的y轴数据</span><br><span class="line">y_2=f_2(x);</span><br><span class="line">%开始画第一个图</span><br><span class="line">figure(<span class="number">1</span>)</span><br><span class="line">hold on</span><br><span class="line">plot(x,y_1,'b','LineWidth',2.5);</span><br><span class="line">%加载x(t)图像</span><br><span class="line">grid on;</span><br><span class="line">axis([<span class="number">-1</span> <span class="number">5</span> <span class="number">0</span> <span class="number">2</span>])%确定画图范围</span><br><span class="line">plot(x,y_2,'r','linewidth',2.5);</span><br><span class="line">%加载y(t)图像</span><br><span class="line">%以下是坐标轴设置</span><br><span class="line">xlabel('s/t')</span><br><span class="line">ylabel('f(x)')</span><br><span class="line">title('需要卷积的两个窗函数的时域图像')</span><br><span class="line">legend('x(t)','h(t)');</span><br><span class="line">hold off;</span><br></pre></td></tr></table></figure></p>
<p><img src="https://img-blog.csdnimg.cn/20190928213950692.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="1-4-对h-t-进行翻折得到"><a href="#1-4-对h-t-进行翻折得到" class="headerlink" title="1.4 对h(t)进行翻折得到"></a>1.4 对h(t)进行翻折得到</h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line">grid on;</span><br><span class="line">axis([<span class="number">-6</span> <span class="number">0</span> <span class="number">0</span> <span class="number">2</span>])<span class="comment">%确定画图范围</span></span><br><span class="line"><span class="built_in">plot</span>(-x,y_2,<span class="string">'r'</span>,<span class="string">'linewidth'</span>,<span class="number">2.5</span>);</span><br><span class="line"><span class="comment">%加载y(t)图像</span></span><br><span class="line"><span class="comment">%以下是坐标轴设置</span></span><br><span class="line">xlabel(<span class="string">'\tau'</span>)</span><br><span class="line">ylabel(<span class="string">'h(-\tau)'</span>)</span><br><span class="line">title(<span class="string">'对函数h(\tau)翻折'</span>)</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">'h(-\tau)'</span>);</span><br><span class="line"><span class="built_in">hold</span> off;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190928233201406.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="1-5-对-h-tau-进行移位"><a href="#1-5-对-h-tau-进行移位" class="headerlink" title="1.5 对$h(-\tau)$进行移位"></a>1.5 对$h(-\tau)$进行移位</h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot</span>(x,y_1,<span class="string">'b'</span>,<span class="string">'LineWidth'</span>,<span class="number">2.5</span>);</span><br><span class="line"><span class="comment">%画出x(t)函数</span></span><br><span class="line">grid on;</span><br><span class="line">title(<span class="string">'h(-\tau)移位演示'</span>)</span><br><span class="line">xlabel(<span class="string">'\tau'</span>)</span><br><span class="line">ylabel(<span class="string">'h(-\tau)'</span>)</span><br><span class="line"><span class="comment">%完成坐标轴设置</span></span><br><span class="line"><span class="keyword">for</span> n=<span class="number">-1</span>:<span class="number">0.08</span>:<span class="number">5</span></span><br><span class="line">    <span class="comment">%开始画卷积conv(t)=x(t)*h(t)</span></span><br><span class="line">    <span class="comment">%step1 得到h(-x)</span></span><br><span class="line">    <span class="keyword">if</span> n~=<span class="number">-1</span></span><br><span class="line">        pause(<span class="number">0.0003</span>);<span class="comment">%暂停</span></span><br><span class="line">        delete(text1);       </span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    h=f_2(n-x);</span><br><span class="line">    plot_n=<span class="built_in">plot</span>(x,h,<span class="string">'--r'</span>,<span class="string">'linewidth'</span>,<span class="number">2.5</span>);</span><br><span class="line">    axis([<span class="number">-4</span> <span class="number">5</span> <span class="number">0</span> <span class="number">2</span>]);</span><br><span class="line">    <span class="comment">%设置坐标轴范围</span></span><br><span class="line">    grid on;</span><br><span class="line">    pause(<span class="number">0.001</span>);<span class="comment">%暂停</span></span><br><span class="line">    delete(plot_n);<span class="comment">%删除原曲线</span></span><br><span class="line">    text(<span class="number">0.5</span>,<span class="number">1.8</span>,<span class="string">'当前的n数值为：'</span>);</span><br><span class="line">    text1=text(<span class="number">3.5</span>,<span class="number">1.8</span>,num2str(n*<span class="number">1.0</span>),<span class="string">'color'</span>,<span class="string">'r'</span>); </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">hold</span> off</span><br><span class="line"><span class="comment">%停止接收数据</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190929011035913.gif#pic_center" alt="在这里插入图片描述"></p>
<h2 id="1-6-对两个函数进行累乘加，并绘制卷积图像"><a href="#1-6-对两个函数进行累乘加，并绘制卷积图像" class="headerlink" title="1.6 对两个函数进行累乘加，并绘制卷积图像"></a>1.6 对两个函数进行累乘加，并绘制卷积图像</h2><p>在这一部分，我将附上整个卷积运算的全部代码和其运行结果演示。<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">clc</span><br><span class="line">clear</span><br><span class="line"><span class="comment">%定义函数，该函数主要实现任意形式的门函数</span></span><br><span class="line">high_1=<span class="number">1</span>;</span><br><span class="line">left_1=<span class="number">0</span>;</span><br><span class="line">right_1=<span class="number">1</span>;</span><br><span class="line"><span class="comment">%定义要产生的窗函数的左右区间范围以及高度</span></span><br><span class="line">f_1=@(x) (high_1)*(x&gt;=left_1 &amp; x&lt;right_1);<span class="comment">%0-1的阶跃 高1</span></span><br><span class="line">f_2=@(x) (high_1+<span class="number">0.5</span>)*(x&gt;=left_1+<span class="number">2</span> &amp; x&lt;right_1+<span class="number">2</span>);<span class="comment">%0-1的阶跃 高1.5</span></span><br><span class="line">x=<span class="number">-4</span>:<span class="number">0.0006</span>:<span class="number">4</span>;</span><br><span class="line">y_1=f_1(x);<span class="comment">%得到对应的窗函数的y轴数据</span></span><br><span class="line">y_2=f_2(x);</span><br><span class="line"><span class="comment">%开始画第一个图</span></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot</span>(x,y_1,<span class="string">'b'</span>,<span class="string">'LineWidth'</span>,<span class="number">2.5</span>);</span><br><span class="line"><span class="comment">%加载x(t)图像</span></span><br><span class="line">grid on;</span><br><span class="line">axis([<span class="number">-1</span> <span class="number">5</span> <span class="number">0</span> <span class="number">2</span>])<span class="comment">%确定画图范围</span></span><br><span class="line"><span class="built_in">plot</span>(x,y_2,<span class="string">'r'</span>,<span class="string">'linewidth'</span>,<span class="number">2.5</span>);</span><br><span class="line"><span class="comment">%加载y(t)图像</span></span><br><span class="line"><span class="comment">%以下是坐标轴设置</span></span><br><span class="line">xlabel(<span class="string">'s/t'</span>)</span><br><span class="line">ylabel(<span class="string">'f(x)'</span>)</span><br><span class="line">title(<span class="string">'需要卷积的两个窗函数的时域图像'</span>)</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">'x(t)'</span>,<span class="string">'h(t)'</span>);</span><br><span class="line"><span class="built_in">hold</span> off;</span><br><span class="line"><span class="comment">%画出第二个演示图像</span></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot</span>(x,y_1,<span class="string">'b'</span>,<span class="string">'LineWidth'</span>,<span class="number">2.5</span>);</span><br><span class="line"><span class="comment">%画出x(t)函数</span></span><br><span class="line">grid on;</span><br><span class="line">title(<span class="string">'卷积演示'</span>)</span><br><span class="line">xlabel(<span class="string">'时间\tau'</span>)</span><br><span class="line">ylabel(<span class="string">'s(\tau)'</span>)</span><br><span class="line"><span class="comment">%完成坐标轴设置</span></span><br><span class="line"><span class="keyword">for</span> n=<span class="number">-1</span>:<span class="number">0.04</span>:<span class="number">5</span></span><br><span class="line">    <span class="comment">%开始画卷积conv(t)=x(t)*h(t)</span></span><br><span class="line">    <span class="comment">%step1 得到h(-x)</span></span><br><span class="line">    h=f_2(n-x);</span><br><span class="line">    plot_n=<span class="built_in">plot</span>(x,h,<span class="string">'--r'</span>,<span class="string">'linewidth'</span>,<span class="number">2.5</span>);</span><br><span class="line">    axis([<span class="number">-4</span> <span class="number">5</span> <span class="number">0</span> <span class="number">2</span>]);</span><br><span class="line">    <span class="comment">%设置坐标轴范围</span></span><br><span class="line">    grid on;</span><br><span class="line">    pause(<span class="number">0.001</span>);<span class="comment">%暂停</span></span><br><span class="line">    delete(plot_n);<span class="comment">%删除原曲线</span></span><br><span class="line">    <span class="comment">%开始计算卷积</span></span><br><span class="line">    sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> tao=<span class="number">-2</span>:<span class="number">0.01</span>:<span class="number">5</span></span><br><span class="line">        sum=sum+<span class="number">0.01</span>*f_1(tao)*f_2(n-tao);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">%此处完成加和操作。</span></span><br><span class="line">    <span class="built_in">disp</span>(sum);</span><br><span class="line">    <span class="built_in">plot</span>(n,sum,<span class="string">'.k'</span>)</span><br><span class="line">    <span class="comment">%此次执行结束相当于完成了n=-1时的图像的卷积</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">hold</span> off</span><br><span class="line"><span class="comment">%停止接收数据</span></span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/2019092901182480.gif#pic_center" alt="在这里插入图片描述"></p>
<h1 id="2-实验要求，使用c语言画出该图像"><a href="#2-实验要求，使用c语言画出该图像" class="headerlink" title="2. 实验要求，使用c语言画出该图像"></a>2. 实验要求，使用c语言画出该图像</h1><p>$\qquad$首先讲解一下使用c语言产生该函数的数据，然后使用gnuplot画图工具调用这些数据并重绘数据图形。以下我将 分别列出产生这两个窗函数的c程序。</p>
<h2 id="2-1-产生在0-1区间上的窗函数数据"><a href="#2-1-产生在0-1区间上的窗函数数据" class="headerlink" title="2.1 产生在0-1区间上的窗函数数据"></a>2.1 产生在0-1区间上的窗函数数据</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">windows.c</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">change</span><span class="params">(<span class="keyword">double</span> x)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> y=<span class="number">0</span>;</span><br><span class="line">	y=(<span class="keyword">int</span>)((x)&gt;<span class="number">0</span> &amp;&amp; (x)&lt;=<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> x;</span><br><span class="line">	<span class="comment">//产生第一个窗函数的负半轴部分数据</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">4000</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">		<span class="comment">//此for循环产生</span></span><br><span class="line">        x=-i/<span class="number">1000.0</span>;</span><br><span class="line">        <span class="keyword">int</span> y=<span class="number">8</span>;</span><br><span class="line">		<span class="keyword">float</span> result=<span class="number">0</span>;</span><br><span class="line">		y=change(x);</span><br><span class="line">		<span class="comment">//调用函数实现窗函数数字转换</span></span><br><span class="line">		result=(<span class="keyword">float</span>)y*<span class="number">1.5</span>;</span><br><span class="line">		<span class="comment">//设置窗函数的高度</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%.3f\t%.2f\n"</span>,x,result);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//产生第一个窗函数的正半轴部分</span></span><br><span class="line">	 <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">4000</span>;i++)&#123;</span><br><span class="line">		<span class="comment">//此for循环产生</span></span><br><span class="line">        x=i/<span class="number">1000.0</span>;</span><br><span class="line">        <span class="keyword">int</span> y=<span class="number">8</span>;</span><br><span class="line">		<span class="keyword">float</span> result=<span class="number">0</span>;</span><br><span class="line">		y=change(x);</span><br><span class="line">		<span class="comment">//调用函数实现窗函数数字转换</span></span><br><span class="line">		result=(<span class="keyword">float</span>)y*<span class="number">1.0</span>;</span><br><span class="line">		<span class="comment">//设置窗函数的高度</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%.3f\t%.2f\n"</span>,x,result);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>$\quad$在编辑完该程序之后，我们再采用gcc编译器对其编译，并将其输出结果存入到res.dat文件中。<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">E:\研一c语言工程训练\gnuplot&gt;gcc windows.c -o windows</span><br><span class="line">E:\研一c语言工程训练\gnuplot&gt;windows.exe &gt; res.dat</span><br></pre></td></tr></table></figure></p>
<h2 id="2-2产生2-3区间上的窗函数"><a href="#2-2产生2-3区间上的窗函数" class="headerlink" title="2.2产生2-3区间上的窗函数"></a>2.2产生2-3区间上的窗函数</h2><p>此窗函数其非零部分高度设置一样设置为1.5，和matlab里边的设置保持一致。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">window2.c</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">change</span><span class="params">(<span class="keyword">double</span> x)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> y=<span class="number">0</span>;</span><br><span class="line">	y=(<span class="keyword">int</span>)((x)&gt;<span class="number">2</span> &amp;&amp; (x)&lt;=<span class="number">3</span>);</span><br><span class="line">	<span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> x;</span><br><span class="line">	<span class="comment">//产生第一个窗函数的负半轴部分数据</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">4000</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">		<span class="comment">//此for循环产生</span></span><br><span class="line">        x=-i/<span class="number">1000.0</span>;</span><br><span class="line">        <span class="keyword">int</span> y=<span class="number">8</span>;</span><br><span class="line">		<span class="keyword">float</span> result=<span class="number">0</span>;</span><br><span class="line">		y=change(x);</span><br><span class="line">		<span class="comment">//调用函数实现窗函数数字转换</span></span><br><span class="line">		result=(<span class="keyword">float</span>)y*<span class="number">1.5</span>;</span><br><span class="line">		<span class="comment">//设置窗函数的高度</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%.3f\t%.2f\n"</span>,x,result);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//产生第一个窗函数的正半轴部分</span></span><br><span class="line">	 <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">4000</span>;i++)&#123;</span><br><span class="line">		<span class="comment">//此for循环产生</span></span><br><span class="line">        x=i/<span class="number">1000.0</span>;</span><br><span class="line">        <span class="keyword">int</span> y=<span class="number">8</span>;</span><br><span class="line">		<span class="keyword">float</span> result=<span class="number">0</span>;</span><br><span class="line">		y=change(x);</span><br><span class="line">		<span class="comment">//调用函数实现窗函数数字转换</span></span><br><span class="line">		result=(<span class="keyword">float</span>)y*<span class="number">1.5</span>;</span><br><span class="line">		<span class="comment">//设置窗函数的高度</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%.3f\t%.2f\n"</span>,x,result);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>$\qquad$同样，在编辑完该程序之后，我们再采用gcc编译器对其编译，并将其输出结果存入到res2.dat文件中。<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">E:\研一c语言工程训练\gnuplot&gt;gcc window2.c -o window2</span><br><span class="line">E:\研一c语言工程训练\gnuplot&gt;window2.exe &gt; res2.dat</span><br></pre></td></tr></table></figure></p>
<h2 id="2-3-使用gnuplot重绘两个窗函数"><a href="#2-3-使用gnuplot重绘两个窗函数" class="headerlink" title="2.3 使用gnuplot重绘两个窗函数"></a>2.3 使用gnuplot重绘两个窗函数</h2><p>在命令行输入如下命令，对图像进行一些基础设置和绘图。<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gnuplot&gt; set title('pictures of different windows function')</span><br><span class="line">gnuplot&gt; set xlabel 'time/s'</span><br><span class="line">gnuplot&gt; set ylabel 'f(t)'</span><br><span class="line">gnuplot&gt; plot [<span class="number">-4</span>:<span class="number">4</span>] [<span class="number">0</span>:<span class="number">2</span>] <span class="string">"res.dat"</span> u <span class="number">1</span>:<span class="number">2</span> w l lt <span class="number">6</span> lw <span class="number">2</span>,<span class="string">"res2.dat"</span> w l lt <span class="number">7</span> lw <span class="number">2</span></span><br></pre></td></tr></table></figure><br>执行完之后则会产生如下图。</p>
<p><img src="https://img-blog.csdnimg.cn/20190929162713558.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>可以看到c语言产生的绘制图片与matlab绘画出来的并没有什么差别。</p>
<h2 id="2-4-c语言实现时域卷积"><a href="#2-4-c语言实现时域卷积" class="headerlink" title="2.4 c语言实现时域卷积"></a>2.4 c语言实现时域卷积</h2><p>$\qquad$对于c语言实现卷积，此处我对于上边的代码又进行了修改以及综合，在该文件内，我分别将自变量t的取值范围、窗函数1的取值、窗函数2的取值以及两个窗函数的卷积存储在对应的数组内。然后再对这几个数组统一访问，输出到本地文件。<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">change</span><span class="params">(<span class="keyword">double</span> x)</span></span>&#123;</span><br><span class="line">	<span class="comment">//定义函数1，该函数主要实现对窗函数1数值的转换，使得只在0-1范围内有取值且为1</span></span><br><span class="line">	<span class="keyword">double</span> y=<span class="number">0</span>;</span><br><span class="line">	y=(<span class="keyword">double</span>)((x)&gt;<span class="number">0</span> &amp;&amp; (x)&lt;=<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">change2</span><span class="params">(<span class="keyword">double</span> x)</span></span>&#123;</span><br><span class="line">	<span class="comment">//定义函数2，该函数主要实现对窗函数2数值的转换，使得只在2-3范围内有取值且为1</span></span><br><span class="line">	<span class="keyword">double</span> y=<span class="number">0</span>;</span><br><span class="line">	y=(<span class="keyword">double</span>)((x)&gt;<span class="number">2</span> &amp;&amp; (x)&lt;=<span class="number">3</span>);</span><br><span class="line">	<span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> x;</span><br><span class="line">	<span class="keyword">double</span> x_nums[<span class="number">8001</span>] = &#123;<span class="number">0.0</span>&#125;;</span><br><span class="line">	<span class="keyword">double</span> y_1[<span class="number">8001</span>]=&#123;<span class="number">0.0</span>&#125;;</span><br><span class="line">	<span class="keyword">double</span> y_2[<span class="number">8001</span>]=&#123;<span class="number">0.0</span>&#125;;</span><br><span class="line">	<span class="keyword">double</span> y_y[<span class="number">8001</span>]=&#123;<span class="number">0.0</span>&#125;;</span><br><span class="line">	<span class="comment">//其中x_nums中存储的是-4:0.001:4</span></span><br><span class="line">	<span class="comment">//y_1中存储的是在-4:0.001:4条件下窗函数1的取值</span></span><br><span class="line">	<span class="comment">//y_2中存储的是-4:0.001:4条件下窗函数2的取值</span></span><br><span class="line">	<span class="comment">//y_y中存储的是-4:0.001:4条件下窗函数1和窗函数卷积的取值</span></span><br><span class="line">	<span class="keyword">int</span> j=<span class="number">0</span>;</span><br><span class="line">	<span class="comment">//产生第一个窗函数的负半轴部分数据</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">4000</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">		<span class="comment">//此for循环产生</span></span><br><span class="line">        x=-(i/<span class="number">1000.0</span>);</span><br><span class="line">		j=<span class="number">4000</span>-i;</span><br><span class="line">        <span class="keyword">double</span> y,y2;</span><br><span class="line">		<span class="keyword">float</span> result,result2;</span><br><span class="line">		y=change(x);</span><br><span class="line">		y2=change2(x);</span><br><span class="line">		<span class="comment">//调用函数实现窗函数数字转换</span></span><br><span class="line">		result=y;</span><br><span class="line">		result2=y2;</span><br><span class="line">		x_nums[j]=x;</span><br><span class="line">		y_1[j]=result;</span><br><span class="line">		y_2[j]=result2*<span class="number">1.5</span>;</span><br><span class="line">		<span class="comment">//设置窗函数的高度</span></span><br><span class="line">		<span class="comment">//printf("%.3f\t%.2f\n",x,result);</span></span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//产生第一个窗函数的正半轴部分</span></span><br><span class="line">	 <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">4000</span>;i++)&#123;</span><br><span class="line">		<span class="comment">//此for循环产生</span></span><br><span class="line">        x=i/<span class="number">1000.0</span>;</span><br><span class="line">		j=i+<span class="number">4000</span>;</span><br><span class="line">        <span class="keyword">double</span> y,y2;</span><br><span class="line">		<span class="keyword">double</span> result,result2;</span><br><span class="line">		y=change(x);</span><br><span class="line">		y2=change2(x);</span><br><span class="line">		<span class="comment">//调用函数实现窗函数数字转换</span></span><br><span class="line">		result=y;</span><br><span class="line">		result2=y2;</span><br><span class="line">		<span class="comment">//设置窗函数的高度</span></span><br><span class="line">		<span class="comment">//printf("%.3f\t%.2f\n",x,result);</span></span><br><span class="line">		x_nums[j]=x;</span><br><span class="line">		y_1[j]=result;</span><br><span class="line">		y_2[j]=result2*<span class="number">1.5</span>;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//开始计算卷积</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">//step 1.计算负半轴部分卷积</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">4000</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">		x=-(i/<span class="number">1000.0</span>);</span><br><span class="line">		j=<span class="number">4000</span>-i;</span><br><span class="line">		<span class="comment">//计算tao为负的情况</span></span><br><span class="line">		<span class="keyword">double</span> sum;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">200</span>;t&gt;=<span class="number">0</span>;t--)&#123;</span><br><span class="line">			<span class="keyword">double</span> tao=-(t/<span class="number">100.0</span>);</span><br><span class="line">			sum=sum+<span class="number">0.01</span>*change(tao)*change2(x-tao)*<span class="number">1.5</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//计算tao为正的情况</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">1</span>;t&lt;=<span class="number">500</span>;t++)&#123;</span><br><span class="line">			<span class="keyword">double</span> tao=(t/<span class="number">100.0</span>);</span><br><span class="line">			sum=sum+<span class="number">0.01</span>*change(tao)*change2(x-tao)*<span class="number">1.5</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		y_y[j]=sum;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//step 2.计算正半轴部分卷积</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">4000</span>;i++)&#123;</span><br><span class="line">		x=(i/<span class="number">1000.0</span>);</span><br><span class="line">		j=<span class="number">4000</span>+i;</span><br><span class="line">		<span class="comment">//计算tao为负的情况</span></span><br><span class="line">		<span class="keyword">double</span> sum=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">200</span>;t&gt;=<span class="number">0</span>;t--)&#123;</span><br><span class="line">			<span class="keyword">double</span> tao=-(t/<span class="number">100.0</span>);</span><br><span class="line">			sum=sum+<span class="number">0.01</span>*change(tao)*change2(x-tao)*<span class="number">1.5</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//计算tao为正的情况</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">1</span>;t&lt;=<span class="number">500</span>;t++)&#123;</span><br><span class="line">			<span class="keyword">double</span> tao=(t/<span class="number">100.0</span>);</span><br><span class="line">			sum=sum+<span class="number">0.01</span>*change(tao)*change2(x-tao)*<span class="number">1.5</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		y_y[j]=sum;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//for循环输出画图需要的数据</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">8000</span>;i++) &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%.3f\t%.2f\t%.2f\t%.2f\n"</span>,x_nums[i],y_1[i],y_2[i],y_y[i]);</span><br><span class="line">		<span class="comment">//其中x_nums中存储的是-4:0.001:4</span></span><br><span class="line">		<span class="comment">//y_1中存储的是在-4:0.001:4条件下窗函数1的取值</span></span><br><span class="line">		<span class="comment">//y_2中存储的是-4:0.001:4条件下窗函数2的取值</span></span><br><span class="line">		<span class="comment">//y_y中存储的是-4:0.001:4条件下窗函数1和窗函数卷积的取值</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>其具体的操作流程如下所示:<br><img src="https://img-blog.csdnimg.cn/20190929200938158.gif#pic_center" alt="在这里插入图片描述"><br>$\qquad$在上一步的操作中，我们已经实现了将我们绘图需要的数据存到了本地，接下来我们就要使用gnuplot来对这些数据绘制。<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plot [<span class="number">-3</span>:<span class="number">5</span>] [<span class="number">0</span>:<span class="number">2</span>] <span class="string">"convolution.dat"</span> u <span class="number">1</span>:<span class="number">2</span> w l lt <span class="number">6</span> lw <span class="number">2.5</span>,<span class="string">"convolution.dat"</span> u <span class="number">1</span>:<span class="number">3</span> w l lt <span class="number">7</span> lw <span class="number">2.5</span>,<span class="string">"convolution.dat"</span> u <span class="number">1</span>:<span class="number">4</span> w p pt <span class="number">1</span> ps <span class="number">0.1</span></span><br></pre></td></tr></table></figure><br>具体的操作如下所示:<br><img src="https://img-blog.csdnimg.cn/20190929201444175.gif#pic_center" alt="在这里插入图片描述"></p>
<h1 id="3-c语言图像与matlab图像的比对"><a href="#3-c语言图像与matlab图像的比对" class="headerlink" title="3. c语言图像与matlab图像的比对"></a>3. c语言图像与matlab图像的比对</h1><p>$\qquad$另外，此时我们还需要将C语言画出来的卷积图像和matlab绘制出来的图像进行比对。下图中图1为c语言绘制的，图2为matlab绘制的。<br><img src="https://img-blog.csdnimg.cn/2019092920172674.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_50#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20190929202045488.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODQ2ODA3Nw==,size_16,color_FFFFFF,t_50#pic_center" alt="在这里插入图片描述"></p>
<h2 id="3-1-总结-amp-体会"><a href="#3-1-总结-amp-体会" class="headerlink" title="3.1 总结 &amp; 体会"></a>3.1 总结 &amp; 体会</h2><p>$\qquad$本次实践分别使用matlab和c语言，在不调用其它函数包的情况下，自主绘画了两个窗函数并且实现了两个函数的时域卷积练习。通过本次实践，更加深刻的理解了卷积的概念，对于信号与系统以及数字语音处理的学习提供了帮助。另外希望此次博客可以为自己以后的练习提供帮助吧。</p>

          
        
      
    </div>
	<div>
		
	</div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/">&lt;i class=&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/">&lt;i class=&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/isme.jpeg"
                alt="kingback" />
            
              <p class="site-author-name" itemprop="name">kingback</p>
              <p class="site-description motion-element" itemprop="description">昆明理工大学无线通信团队成员</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">31</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/kingback2019/kingback2019.github.io" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:2020465823@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://blog.csdn.net/weixin_38468077" target="_blank" title="CSDN">
                      
                        <i class="fa fa-fw fa-copyright"></i>CSDN</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">kingback</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>总访客
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>总访问量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

<script src="/live2d_models/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2d_models/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1.2,"jsonPath":"/live2d_models/assets/assets/hibiki.model.json"},"display":{"position":"right","width":200,"height":500},"mobile":{"show":true,"scale":0.5},"log":false});</script></body>
</html>
